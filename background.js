/*! For license information please see background.js.LICENSE.txt */
(()=>{var e={4943:(e,t,r)=>{!function(n){var i=r(8e3);if(!i)throw new Error("vertx-eventbus.js requires sockjs-client, see http://sockjs.org");!function(r){function n(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e,t){return t=16*Math.random(),("y"==e?3&t|8:0|t).toString(16)}))}function i(e,t){if(e){if(!t)return e;for(var r in e)e.hasOwnProperty(r)&&void 0===t[r]&&(t[r]=e[r])}return t||{}}var s=function(e,t){var n=this;t=t||{},this.pingInterval=t.vertxbus_ping_interval||5e3,this.pingTimerID=null,this.reconnectEnabled=!1,this.reconnectAttempts=0,this.reconnectTimerID=null,this.maxReconnectAttempts=t.vertxbus_reconnect_attempts_max||1/0,this.reconnectDelayMin=t.vertxbus_reconnect_delay_min||1e3,this.reconnectDelayMax=t.vertxbus_reconnect_delay_max||5e3,this.reconnectExponent=t.vertxbus_reconnect_exponent||2,this.randomizationFactor=t.vertxbus_randomization_factor||.5;var i=function(){var e=n.reconnectDelayMin*Math.pow(n.reconnectExponent,n.reconnectAttempts);if(n.randomizationFactor){var t=Math.random(),r=Math.floor(t*n.randomizationFactor*e);e=0==(1&Math.floor(10*t))?e-r:e+r}return 0|Math.min(e,n.reconnectDelayMax)};this.defaultHeaders=null,this.onerror=function(e){},this.onevent=function(e,t){return!1},this.onunhandled=function(e){try{"err"===e.type?n.onerror(e):e.event}catch(e){}};var o=function(){n.sockJSConn=new r(e,null,t),n.state=s.CONNECTING,n.handlers={},n.replyHandlers={},n.sockJSConn.onopen=function(){n.enablePing(!0),n.state=s.OPEN,n.onopen&&n.onopen(),n.reconnectTimerID&&(n.reconnectAttempts=0,n.onreconnect&&n.onreconnect())},n.sockJSConn.onclose=function(e){n.state=s.CLOSED,n.pingTimerID&&clearInterval(n.pingTimerID),n.reconnectEnabled&&n.reconnectAttempts<n.maxReconnectAttempts&&(n.sockJSConn=null,n.reconnectTimerID=setTimeout(o,i()),++n.reconnectAttempts),n.onclose&&n.onclose(e)},n.sockJSConn.onmessage=function(e){var t;try{t=JSON.parse(e.data)}catch(r){t={type:"err",failureType:r.toString(),message:e.data}}if(t.replyAddress&&Object.defineProperty(t,"reply",{value:function(e,r,i){n.send(t.replyAddress,e,r,i)}}),n.handlers[t.address])for(var r=n.handlers[t.address],i=0;i<r.length;i++)"err"===t.type?r[i]({failureCode:t.failureCode,failureType:t.failureType,message:t.message}):r[i](null,t);else if(n.replyHandlers[t.address]){var s=n.replyHandlers[t.address];delete n.replyHandlers[t.address],"err"===t.type?s({failureCode:t.failureCode,failureType:t.failureType,message:t.message}):s(null,t)}else t.event&&n.onevent(t.event,t.message)||n.onunhandled(t)}};o()};s.prototype.send=function(e,t,r,o){if(this.state!==s.OPEN)throw new Error("INVALID_STATE_ERR");"function"==typeof r&&(o=r,r={});var a={type:"send",address:e,headers:i(this.defaultHeaders,r),body:t};if(o){var c=n();a.replyAddress=c,this.replyHandlers[c]=o}this.sockJSConn.send(JSON.stringify(a))},s.prototype.publish=function(e,t,r){if(this.state!==s.OPEN)throw new Error("INVALID_STATE_ERR");this.sockJSConn.send(JSON.stringify({type:"publish",address:e,headers:i(this.defaultHeaders,r),body:t}))},s.prototype.registerHandler=function(e,t,r){if(this.state!==s.OPEN)throw new Error("INVALID_STATE_ERR");"function"==typeof t&&(r=t,t={}),this.handlers[e]||(this.handlers[e]=[],this.sockJSConn.send(JSON.stringify({type:"register",address:e,headers:i(this.defaultHeaders,t)}))),this.handlers[e].push(r)},s.prototype.unregisterHandler=function(e,t,r){if(this.state!==s.OPEN)throw new Error("INVALID_STATE_ERR");var n=this.handlers[e];if(n){"function"==typeof t&&(r=t,t={});var o=n.indexOf(r);-1!==o&&(n.splice(o,1),0===n.length&&(this.sockJSConn.send(JSON.stringify({type:"unregister",address:e,headers:i(this.defaultHeaders,t)})),delete this.handlers[e]))}},s.prototype.close=function(){this.state=s.CLOSING,this.enableReconnect(!1),this.sockJSConn.close()},s.CONNECTING=0,s.OPEN=1,s.CLOSING=2,s.CLOSED=3,s.prototype.enablePing=function(e){var t=this;if(e){var r=function(){t.sockJSConn.send(JSON.stringify({type:"ping"}))};t.pingInterval>0&&(r(),t.pingTimerID=setInterval(r,t.pingInterval))}else t.pingTimerID&&(clearInterval(t.pingTimerID),t.pingTimerID=null)},s.prototype.enableReconnect=function(e){var t=this;t.reconnectEnabled=e,!e&&t.reconnectTimerID&&(clearTimeout(t.reconnectTimerID),t.reconnectTimerID=null,t.reconnectAttempts=0)},e.exports?t=e.exports=s:t.EventBus=s}(i)}()},7240:(e,t,r)=>{var n=n||e.exports||{},i=i||r(8800);n.Long=i.Long,function(e){function t(e,t){switch(t){case 0:for(;128&e.readByte(););break;case 2:e.skip(e.readVarint32());break;case 5:e.skip(4);break;case 1:e.skip(8);break;default:throw new Error("Unimplemented type: "+t)}}n.encodeMetadata=function(t){var r,n,s=new i(e,!0);(r=t.manufacture_name)!==e&&(s.writeVarint32(10),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));(r=t.model_name)!==e&&(s.writeVarint32(18),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));(r=t.os_name)!==e&&(s.writeVarint32(26),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));(r=t.os_version)!==e&&(s.writeVarint32(34),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));(r=t.os_vendor_layer)!==e&&(s.writeVarint32(42),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));(r=t.client_version)!==e&&(s.writeVarint32(50),(n=new i(e,!0)).writeUTF8String(r),s.writeVarint32(n.flip().limit),s.append(n));return s.flip().toBuffer()},n.decodeMetadata=function(e){var r={};e instanceof i||(e=new i.fromBinary(e,!0));e:for(;e.remaining()>0;){var n=e.readVarint32();switch(n>>>3){case 0:break e;case 1:r.manufacture_name=e.readUTF8String(e.readVarint32(),"b");break;case 2:r.model_name=e.readUTF8String(e.readVarint32(),"b");break;case 3:r.os_name=e.readUTF8String(e.readVarint32(),"b");break;case 4:r.os_version=e.readUTF8String(e.readVarint32(),"b");break;case 5:r.os_vendor_layer=e.readUTF8String(e.readVarint32(),"b");break;case 6:r.client_version=e.readUTF8String(e.readVarint32(),"b");break;default:t(e,7&n)}}return r}}()},8800:function(e,t,r){var n,i,s;i=[r(9178)],void 0===(s="function"==typeof(n=function(e){"use strict";var t=function(e,r,i){if(void 0===e&&(e=t.DEFAULT_CAPACITY),void 0===r&&(r=t.DEFAULT_ENDIAN),void 0===i&&(i=t.DEFAULT_NOASSERT),!i){if((e|=0)<0)throw RangeError("Illegal capacity");r=!!r,i=!!i}this.buffer=0===e?n:new ArrayBuffer(e),this.view=0===e?null:new Uint8Array(this.buffer),this.offset=0,this.markedOffset=-1,this.limit=e,this.littleEndian=r,this.noAssert=i};t.VERSION="5.0.1",t.LITTLE_ENDIAN=!0,t.BIG_ENDIAN=!1,t.DEFAULT_CAPACITY=16,t.DEFAULT_ENDIAN=t.BIG_ENDIAN,t.DEFAULT_NOASSERT=!1,t.Long=e||null;var r=t.prototype;r.__isByteBuffer__,Object.defineProperty(r,"__isByteBuffer__",{value:!0,enumerable:!1,configurable:!1});var n=new ArrayBuffer(0),i=String.fromCharCode;function s(e){var t=0;return function(){return t<e.length?e.charCodeAt(t++):null}}function o(){var e=[],t=[];return function(){if(0===arguments.length)return t.join("")+i.apply(String,e);e.length+arguments.length>1024&&(t.push(i.apply(String,e)),e.length=0),Array.prototype.push.apply(e,arguments)}}function a(e,t,r,n,i){var s,o,a=8*i-n-1,c=(1<<a)-1,h=c>>1,l=-7,u=r?i-1:0,f=r?-1:1,d=e[t+u];for(u+=f,s=d&(1<<-l)-1,d>>=-l,l+=a;l>0;s=256*s+e[t+u],u+=f,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+u],u+=f,l-=8);if(0===s)s=1-h;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=h}return(d?-1:1)*o*Math.pow(2,s-n)}function c(e,t,r,n,i,s){var o,a,c,h=8*s-i-1,l=(1<<h)-1,u=l>>1,f=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),(t+=o+u>=1?f/c:f*Math.pow(2,1-u))*c>=2&&(o++,c/=2),o+u>=l?(a=0,o=l):o+u>=1?(a=(t*c-1)*Math.pow(2,i),o+=u):(a=t*Math.pow(2,u-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&a,d+=p,a/=256,i-=8);for(o=o<<i|a,h+=i;h>0;e[r+d]=255&o,d+=p,o/=256,h-=8);e[r+d-p]|=128*g}t.accessor=function(){return Uint8Array},t.allocate=function(e,r,n){return new t(e,r,n)},t.concat=function(e,r,n,i){"boolean"!=typeof r&&"string"==typeof r||(i=n,n=r,r=void 0);for(var s,o=0,a=0,c=e.length;a<c;++a)t.isByteBuffer(e[a])||(e[a]=t.wrap(e[a],r)),(s=e[a].limit-e[a].offset)>0&&(o+=s);if(0===o)return new t(0,n,i);var h,l=new t(o,n,i);for(a=0;a<c;)(s=(h=e[a++]).limit-h.offset)<=0||(l.view.set(h.view.subarray(h.offset,h.limit),l.offset),l.offset+=s);return l.limit=l.offset,l.offset=0,l},t.isByteBuffer=function(e){return!0===(e&&e.__isByteBuffer__)},t.type=function(){return ArrayBuffer},t.wrap=function(e,n,i,s){if("string"!=typeof n&&(s=i,i=n,n=void 0),"string"==typeof e)switch(void 0===n&&(n="utf8"),n){case"base64":return t.fromBase64(e,i);case"hex":return t.fromHex(e,i);case"binary":return t.fromBinary(e,i);case"utf8":return t.fromUTF8(e,i);case"debug":return t.fromDebug(e,i);default:throw Error("Unsupported encoding: "+n)}if(null===e||"object"!=typeof e)throw TypeError("Illegal buffer");var o;if(t.isByteBuffer(e))return(o=r.clone.call(e)).markedOffset=-1,o;if(e instanceof Uint8Array)o=new t(0,i,s),e.length>0&&(o.buffer=e.buffer,o.offset=e.byteOffset,o.limit=e.byteOffset+e.byteLength,o.view=new Uint8Array(e.buffer));else if(e instanceof ArrayBuffer)o=new t(0,i,s),e.byteLength>0&&(o.buffer=e,o.offset=0,o.limit=e.byteLength,o.view=e.byteLength>0?new Uint8Array(e):null);else{if("[object Array]"!==Object.prototype.toString.call(e))throw TypeError("Illegal buffer");(o=new t(e.length,i,s)).limit=e.length;for(var a=0;a<e.length;++a)o.view[a]=e[a]}return o},r.writeBitSet=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if(!(e instanceof Array))throw TypeError("Illegal BitSet: Not an array");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,i=t,s=e.length,o=s>>3,a=0;for(t+=this.writeVarint32(s,t);o--;)n=1&!!e[a++]|(1&!!e[a++])<<1|(1&!!e[a++])<<2|(1&!!e[a++])<<3|(1&!!e[a++])<<4|(1&!!e[a++])<<5|(1&!!e[a++])<<6|(1&!!e[a++])<<7,this.writeByte(n,t++);if(a<s){var c=0;for(n=0;a<s;)n|=(1&!!e[a++])<<c++;this.writeByte(n,t++)}return r?(this.offset=t,this):t-i},r.readBitSet=function(e){var t=void 0===e;t&&(e=this.offset);var r,n=this.readVarint32(e),i=n.value,s=i>>3,o=0,a=[];for(e+=n.length;s--;)r=this.readByte(e++),a[o++]=!!(1&r),a[o++]=!!(2&r),a[o++]=!!(4&r),a[o++]=!!(8&r),a[o++]=!!(16&r),a[o++]=!!(32&r),a[o++]=!!(64&r),a[o++]=!!(128&r);if(o<i){var c=0;for(r=this.readByte(e++);o<i;)a[o++]=!!(r>>c++&1)}return t&&(this.offset=e),a},r.readBytes=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+"+e+") <= "+this.buffer.byteLength)}var n=this.slice(t,t+e);return r&&(this.offset+=e),n},r.writeBytes=r.append,r.writeInt8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,r&&(this.offset+=1),this},r.writeByte=r.writeInt8,r.readInt8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view[e];return 128==(128&r)&&(r=-(255-r+1)),t&&(this.offset+=1),r},r.readByte=r.readInt8,r.writeUint8=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=1;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=1,this.view[t]=e,r&&(this.offset+=1),this},r.writeUInt8=r.writeUint8,r.readUint8=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r=this.view[e];return t&&(this.offset+=1),r},r.readUInt8=r.readUint8,r.writeInt16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),r&&(this.offset+=2),this},r.writeShort=r.writeInt16,r.readInt16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[e],r|=this.view[e+1]<<8):(r=this.view[e]<<8,r|=this.view[e+1]),32768==(32768&r)&&(r=-(65535-r+1)),t&&(this.offset+=2),r},r.readShort=r.readInt16,r.writeUint16=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=2;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=2,this.littleEndian?(this.view[t+1]=(65280&e)>>>8,this.view[t]=255&e):(this.view[t]=(65280&e)>>>8,this.view[t+1]=255&e),r&&(this.offset+=2),this},r.writeUInt16=r.writeUint16,r.readUint16=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+2>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+2) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[e],r|=this.view[e+1]<<8):(r=this.view[e]<<8,r|=this.view[e+1]),t&&(this.offset+=2),r},r.readUInt16=r.readUint16,r.writeInt32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),r&&(this.offset+=4),this},r.writeInt=r.writeInt32,r.readInt32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0):(r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0),r|=0,t&&(this.offset+=4),r},r.readInt=r.readInt32,r.writeUint32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=4,this.littleEndian?(this.view[t+3]=e>>>24&255,this.view[t+2]=e>>>16&255,this.view[t+1]=e>>>8&255,this.view[t]=255&e):(this.view[t]=e>>>24&255,this.view[t+1]=e>>>16&255,this.view[t+2]=e>>>8&255,this.view[t+3]=255&e),r&&(this.offset+=4),this},r.writeUInt32=r.writeUint32,r.readUint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=0;return this.littleEndian?(r=this.view[e+2]<<16,r|=this.view[e+1]<<8,r|=this.view[e],r+=this.view[e+3]<<24>>>0):(r=this.view[e+1]<<16,r|=this.view[e+2]<<8,r|=this.view[e+3],r+=this.view[e]<<24>>>0),t&&(this.offset+=4),r},r.readUInt32=r.readUint32,e&&(r.writeInt64=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var s=t.low,o=t.high;return this.littleEndian?(this.view[r+3]=s>>>24&255,this.view[r+2]=s>>>16&255,this.view[r+1]=s>>>8&255,this.view[r]=255&s,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=s>>>24&255,this.view[r+1]=s>>>16&255,this.view[r+2]=s>>>8&255,this.view[r+3]=255&s),n&&(this.offset+=8),this},r.writeLong=r.writeInt64,r.readInt64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0);var s=new e(n,i,!1);return r&&(this.offset+=8),s},r.readLong=r.readInt64,r.writeUint64=function(t,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"==typeof t)t=e.fromNumber(t);else if("string"==typeof t)t=e.fromString(t);else if(!(t&&t instanceof e))throw TypeError("Illegal value: "+t+" (not an integer or Long)");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t)),r+=8;var i=this.buffer.byteLength;r>i&&this.resize((i*=2)>r?i:r),r-=8;var s=t.low,o=t.high;return this.littleEndian?(this.view[r+3]=s>>>24&255,this.view[r+2]=s>>>16&255,this.view[r+1]=s>>>8&255,this.view[r]=255&s,r+=4,this.view[r+3]=o>>>24&255,this.view[r+2]=o>>>16&255,this.view[r+1]=o>>>8&255,this.view[r]=255&o):(this.view[r]=o>>>24&255,this.view[r+1]=o>>>16&255,this.view[r+2]=o>>>8&255,this.view[r+3]=255&o,r+=4,this.view[r]=s>>>24&255,this.view[r+1]=s>>>16&255,this.view[r+2]=s>>>8&255,this.view[r+3]=255&s),n&&(this.offset+=8),this},r.writeUInt64=r.writeUint64,r.readUint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+8) <= "+this.buffer.byteLength)}var n=0,i=0;this.littleEndian?(n=this.view[t+2]<<16,n|=this.view[t+1]<<8,n|=this.view[t],n+=this.view[t+3]<<24>>>0,t+=4,i=this.view[t+2]<<16,i|=this.view[t+1]<<8,i|=this.view[t],i+=this.view[t+3]<<24>>>0):(i=this.view[t+1]<<16,i|=this.view[t+2]<<8,i|=this.view[t+3],i+=this.view[t]<<24>>>0,t+=4,n=this.view[t+1]<<16,n|=this.view[t+2]<<8,n|=this.view[t+3],n+=this.view[t]<<24>>>0);var s=new e(n,i,!0);return r&&(this.offset+=8),s},r.readUInt64=r.readUint64),r.writeFloat32=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=4;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=4,c(this.view,e,t,this.littleEndian,23,4),r&&(this.offset+=4),this},r.writeFloat=r.writeFloat32,r.readFloat32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var r=a(this.view,e,this.littleEndian,23,4);return t&&(this.offset+=4),r},r.readFloat=r.readFloat32,r.writeFloat64=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof e)throw TypeError("Illegal value: "+e+" (not a number)");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}t+=8;var n=this.buffer.byteLength;return t>n&&this.resize((n*=2)>t?n:t),t-=8,c(this.view,e,t,this.littleEndian,52,8),r&&(this.offset+=8),this},r.writeDouble=r.writeFloat64,r.readFloat64=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+8>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+8) <= "+this.buffer.byteLength)}var r=a(this.view,e,this.littleEndian,52,8);return t&&(this.offset+=8),r},r.readDouble=r.readFloat64,t.MAX_VARINT32_BYTES=5,t.calculateVarint32=function(e){return(e>>>=0)<128?1:e<16384?2:e<1<<21?3:e<1<<28?4:5},t.zigZagEncode32=function(e){return((e|=0)<<1^e>>31)>>>0},t.zigZagDecode32=function(e){return e>>>1^-(1&e)|0},r.writeVarint32=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,s=t.calculateVarint32(e);r+=s;var o=this.buffer.byteLength;for(r>o&&this.resize((o*=2)>r?o:r),r-=s,e>>>=0;e>=128;)i=127&e|128,this.view[r++]=i,e>>>=7;return this.view[r++]=e,n?(this.offset=r,this):s},r.writeVarint32ZigZag=function(e,r){return this.writeVarint32(t.zigZagEncode32(e),r)},r.readVarint32=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,n=0,i=0;do{if(!this.noAssert&&e>this.limit){var s=Error("Truncated");throw s.truncated=!0,s}r=this.view[e++],n<5&&(i|=(127&r)<<7*n),++n}while(0!=(128&r));return i|=0,t?(this.offset=e,i):{value:i,length:n}},r.readVarint32ZigZag=function(e){var r=this.readVarint32(e);return"object"==typeof r?r.value=t.zigZagDecode32(r.value):r=t.zigZagDecode32(r),r},e&&(t.MAX_VARINT64_BYTES=10,t.calculateVarint64=function(t){"number"==typeof t?t=e.fromNumber(t):"string"==typeof t&&(t=e.fromString(t));var r=t.toInt()>>>0,n=t.shiftRightUnsigned(28).toInt()>>>0,i=t.shiftRightUnsigned(56).toInt()>>>0;return 0==i?0==n?r<16384?r<128?1:2:r<1<<21?3:4:n<16384?n<128?5:6:n<1<<21?7:8:i<128?9:10},t.zigZagEncode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftLeft(1).xor(t.shiftRight(63)).toUnsigned()},t.zigZagDecode64=function(t){return"number"==typeof t?t=e.fromNumber(t,!1):"string"==typeof t?t=e.fromString(t,!1):!1!==t.unsigned&&(t=t.toSigned()),t.shiftRightUnsigned(1).xor(t.and(e.ONE).toSigned().negate()).toSigned()},r.writeVarint64=function(r,n){var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"==typeof r)r=e.fromNumber(r);else if("string"==typeof r)r=e.fromString(r);else if(!(r&&r instanceof e))throw TypeError("Illegal value: "+r+" (not an integer or Long)");if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}"number"==typeof r?r=e.fromNumber(r,!1):"string"==typeof r?r=e.fromString(r,!1):!1!==r.unsigned&&(r=r.toSigned());var s=t.calculateVarint64(r),o=r.toInt()>>>0,a=r.shiftRightUnsigned(28).toInt()>>>0,c=r.shiftRightUnsigned(56).toInt()>>>0;n+=s;var h=this.buffer.byteLength;switch(n>h&&this.resize((h*=2)>n?h:n),n-=s,s){case 10:this.view[n+9]=c>>>7&1;case 9:this.view[n+8]=9!==s?128|c:127&c;case 8:this.view[n+7]=8!==s?a>>>21|128:a>>>21&127;case 7:this.view[n+6]=7!==s?a>>>14|128:a>>>14&127;case 6:this.view[n+5]=6!==s?a>>>7|128:a>>>7&127;case 5:this.view[n+4]=5!==s?128|a:127&a;case 4:this.view[n+3]=4!==s?o>>>21|128:o>>>21&127;case 3:this.view[n+2]=3!==s?o>>>14|128:o>>>14&127;case 2:this.view[n+1]=2!==s?o>>>7|128:o>>>7&127;case 1:this.view[n]=1!==s?128|o:127&o}return i?(this.offset+=s,this):s},r.writeVarint64ZigZag=function(e,r){return this.writeVarint64(t.zigZagEncode64(e),r)},r.readVarint64=function(t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+1) <= "+this.buffer.byteLength)}var n=t,i=0,s=0,o=0,a=0;if(i=127&(a=this.view[t++]),128&a&&(i|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(i|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(s=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<7,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<14,(128&a||this.noAssert&&void 0===a)&&(s|=(127&(a=this.view[t++]))<<21,(128&a||this.noAssert&&void 0===a)&&(o=127&(a=this.view[t++]),(128&a||this.noAssert&&void 0===a)&&(o|=(127&(a=this.view[t++]))<<7,128&a||this.noAssert&&void 0===a))))))))))throw Error("Buffer overrun");var c=e.fromBits(i|s<<28,s>>>4|o<<24,!1);return r?(this.offset=t,c):{value:c,length:t-n}},r.readVarint64ZigZag=function(r){var n=this.readVarint64(r);return n&&n.value instanceof e?n.value=t.zigZagDecode64(n.value):n=t.zigZagDecode64(n),n}),r.writeCString=function(e,t){var r=void 0===t;r&&(t=this.offset);var n,i=e.length;if(!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");for(n=0;n<i;++n)if(0===e.charCodeAt(n))throw RangeError("Illegal str: Contains NULL-characters");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}i=l.calculateUTF16asUTF8(s(e))[1],t+=i+1;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=i+1,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this)),this.view[t++]=0,r?(this.offset=t,this):i},r.readCString=function(e){var t=void 0===e;if(t&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var r,n=e,i=-1;return l.decodeUTF8toUTF16(function(){if(0===i)return null;if(e>=this.limit)throw RangeError("Illegal range: Truncated data, "+e+" < "+this.limit);return 0===(i=this.view[e++])?null:i}.bind(this),r=o(),!0),t?(this.offset=e,r()):{string:r(),length:e-n}},r.writeIString=function(e,t){var r=void 0===t;if(r&&(t=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var n,i=t;n=l.calculateUTF16asUTF8(s(e),this.noAssert)[1],t+=4+n;var o=this.buffer.byteLength;if(t>o&&this.resize((o*=2)>t?o:t),t-=4+n,this.littleEndian?(this.view[t+3]=n>>>24&255,this.view[t+2]=n>>>16&255,this.view[t+1]=n>>>8&255,this.view[t]=255&n):(this.view[t]=n>>>24&255,this.view[t+1]=n>>>16&255,this.view[t+2]=n>>>8&255,this.view[t+3]=255&n),t+=4,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this)),t!==i+4+n)throw RangeError("Illegal range: Truncated data, "+t+" == "+(t+4+n));return r?(this.offset=t,this):t-i},r.readIString=function(e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+4>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+4) <= "+this.buffer.byteLength)}var n=e,i=this.readUint32(e),s=this.readUTF8String(i,t.METRICS_BYTES,e+=4);return e+=s.length,r?(this.offset=e,s.string):{string:s.string,length:e-n}},t.METRICS_CHARS="c",t.METRICS_BYTES="b",r.writeUTF8String=function(e,t){var r,n=void 0===t;if(n&&(t=this.offset),!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: "+t+" (not an integer)");if((t>>>=0)<0||t+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+t+" (+0) <= "+this.buffer.byteLength)}var i=t;r=l.calculateUTF16asUTF8(s(e))[1],t+=r;var o=this.buffer.byteLength;return t>o&&this.resize((o*=2)>t?o:t),t-=r,l.encodeUTF16toUTF8(s(e),function(e){this.view[t++]=e}.bind(this)),n?(this.offset=t,this):t-i},r.writeString=r.writeUTF8String,t.calculateUTF8Chars=function(e){return l.calculateUTF16asUTF8(s(e))[0]},t.calculateUTF8Bytes=function(e){return l.calculateUTF16asUTF8(s(e))[1]},t.calculateString=t.calculateUTF8Bytes,r.readUTF8String=function(e,r,n){"number"==typeof r&&(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),void 0===r&&(r=t.METRICS_CHARS),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");if(e|=0,"number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}var s,a=0,c=n;if(r===t.METRICS_CHARS){if(s=o(),l.decodeUTF8(function(){return a<e&&n<this.limit?this.view[n++]:null}.bind(this),(function(e){++a,l.UTF8toUTF16(e,s)})),a!==e)throw RangeError("Illegal range: Truncated data, "+a+" == "+e);return i?(this.offset=n,s()):{string:s(),length:n-c}}if(r===t.METRICS_BYTES){if(!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+e>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+"+e+") <= "+this.buffer.byteLength)}var h=n+e;if(l.decodeUTF8toUTF16(function(){return n<h?this.view[n++]:null}.bind(this),s=o(),this.noAssert),n!==h)throw RangeError("Illegal range: Truncated data, "+n+" == "+h);return i?(this.offset=n,s()):{string:s(),length:n-c}}throw TypeError("Unsupported metrics: "+r)},r.readString=r.readUTF8String,r.writeVString=function(e,r){var n=void 0===r;if(n&&(r=this.offset),!this.noAssert){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if("number"!=typeof r||r%1!=0)throw TypeError("Illegal offset: "+r+" (not an integer)");if((r>>>=0)<0||r+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+r+" (+0) <= "+this.buffer.byteLength)}var i,o,a=r;i=l.calculateUTF16asUTF8(s(e),this.noAssert)[1],o=t.calculateVarint32(i),r+=o+i;var c=this.buffer.byteLength;if(r>c&&this.resize((c*=2)>r?c:r),r-=o+i,r+=this.writeVarint32(i,r),l.encodeUTF16toUTF8(s(e),function(e){this.view[r++]=e}.bind(this)),r!==a+i+o)throw RangeError("Illegal range: Truncated data, "+r+" == "+(r+i+o));return n?(this.offset=r,this):r-a},r.readVString=function(e){var r=void 0===e;if(r&&(e=this.offset),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+1>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+1) <= "+this.buffer.byteLength)}var n=e,i=this.readVarint32(e),s=this.readUTF8String(i.value,t.METRICS_BYTES,e+=i.length);return e+=s.length,r?(this.offset=e,s.string):{string:s.string,length:e-n}},r.append=function(e,r,n){"number"!=typeof r&&"string"==typeof r||(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,r));var s=e.limit-e.offset;if(s<=0)return this;n+=s;var o=this.buffer.byteLength;return n>o&&this.resize((o*=2)>n?o:n),n-=s,this.view.set(e.view.subarray(e.offset,e.limit),n),e.offset+=s,i&&(this.offset+=s),this},r.appendTo=function(e,t){return e.append(this,t),this},r.assert=function(e){return this.noAssert=!e,this},r.capacity=function(){return this.buffer.byteLength},r.clear=function(){return this.offset=0,this.limit=this.buffer.byteLength,this.markedOffset=-1,this},r.clone=function(e){var r=new t(0,this.littleEndian,this.noAssert);return e?(r.buffer=new ArrayBuffer(this.buffer.byteLength),r.view=new Uint8Array(r.buffer)):(r.buffer=this.buffer,r.view=this.view),r.offset=this.offset,r.markedOffset=this.markedOffset,r.limit=this.limit,r},r.compact=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}if(0===e&&t===this.buffer.byteLength)return this;var r=t-e;if(0===r)return this.buffer=n,this.view=null,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=0,this;var i=new ArrayBuffer(r),s=new Uint8Array(i);return s.set(this.view.subarray(e,t)),this.buffer=i,this.view=s,this.markedOffset>=0&&(this.markedOffset-=e),this.offset=0,this.limit=r,this},r.copy=function(e,r){if(void 0===e&&(e=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,e<0||e>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+r+" <= "+this.buffer.byteLength)}if(e===r)return new t(0,this.littleEndian,this.noAssert);var n=r-e,i=new t(n,this.littleEndian,this.noAssert);return i.offset=0,i.limit=n,i.markedOffset>=0&&(i.markedOffset-=e),this.copyTo(i,0,e,r),i},r.copyTo=function(e,r,n,i){var s,o;if(!this.noAssert&&!t.isByteBuffer(e))throw TypeError("Illegal target: Not a ByteBuffer");if(r=(o=void 0===r)?e.offset:0|r,n=(s=void 0===n)?this.offset:0|n,i=void 0===i?this.limit:0|i,r<0||r>e.buffer.byteLength)throw RangeError("Illegal target range: 0 <= "+r+" <= "+e.buffer.byteLength);if(n<0||i>this.buffer.byteLength)throw RangeError("Illegal source range: 0 <= "+n+" <= "+this.buffer.byteLength);var a=i-n;return 0===a?e:(e.ensureCapacity(r+a),e.view.set(this.view.subarray(n,i),r),s&&(this.offset+=a),o&&(e.offset+=a),this)},r.ensureCapacity=function(e){var t=this.buffer.byteLength;return t<e?this.resize((t*=2)>e?t:e):this},r.fill=function(e,t,r){var n=void 0===t;if(n&&(t=this.offset),"string"==typeof e&&e.length>0&&(e=e.charCodeAt(0)),void 0===t&&(t=this.offset),void 0===r&&(r=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal value: "+e+" (not an integer)");if(e|=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal begin: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal end: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(t>=r)return this;for(;t<r;)this.view[t++]=e;return n&&(this.offset=t),this},r.flip=function(){return this.limit=this.offset,this.offset=0,this},r.mark=function(e){if(e=void 0===e?this.offset:e,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal offset: "+e+" (not an integer)");if((e>>>=0)<0||e+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+e+" (+0) <= "+this.buffer.byteLength)}return this.markedOffset=e,this},r.order=function(e){if(!this.noAssert&&"boolean"!=typeof e)throw TypeError("Illegal littleEndian: Not a boolean");return this.littleEndian=!!e,this},r.LE=function(e){return this.littleEndian=void 0===e||!!e,this},r.BE=function(e){return this.littleEndian=void 0!==e&&!e,this},r.prepend=function(e,r,n){"number"!=typeof r&&"string"==typeof r||(n=r,r=void 0);var i=void 0===n;if(i&&(n=this.offset),!this.noAssert){if("number"!=typeof n||n%1!=0)throw TypeError("Illegal offset: "+n+" (not an integer)");if((n>>>=0)<0||n+0>this.buffer.byteLength)throw RangeError("Illegal offset: 0 <= "+n+" (+0) <= "+this.buffer.byteLength)}e instanceof t||(e=t.wrap(e,r));var s=e.limit-e.offset;if(s<=0)return this;var o=s-n;if(o>0){var a=new ArrayBuffer(this.buffer.byteLength+o),c=new Uint8Array(a);c.set(this.view.subarray(n,this.buffer.byteLength),s),this.buffer=a,this.view=c,this.offset+=o,this.markedOffset>=0&&(this.markedOffset+=o),this.limit+=o,n+=o}else new Uint8Array(this.buffer);return this.view.set(e.view.subarray(e.offset,e.limit),n-s),e.offset=e.limit,i&&(this.offset-=s),this},r.prependTo=function(e,t){return e.prepend(this,t),this},r.printDebug=function(e){"function"!=typeof e&&(e=void 0),e(this.toString()+"\n-------------------------------------------------------------------\n"+this.toDebug(!0))},r.remaining=function(){return this.limit-this.offset},r.reset=function(){return this.markedOffset>=0?(this.offset=this.markedOffset,this.markedOffset=-1):this.offset=0,this},r.resize=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal capacity: "+e+" (not an integer)");if((e|=0)<0)throw RangeError("Illegal capacity: 0 <= "+e)}if(this.buffer.byteLength<e){var t=new ArrayBuffer(e),r=new Uint8Array(t);r.set(this.view),this.buffer=t,this.view=r}return this},r.reverse=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}return e===t||Array.prototype.reverse.call(this.view.subarray(e,t)),this},r.skip=function(e){if(!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal length: "+e+" (not an integer)");e|=0}var t=this.offset+e;if(!this.noAssert&&(t<0||t>this.buffer.byteLength))throw RangeError("Illegal length: 0 <= "+this.offset+" + "+e+" <= "+this.buffer.byteLength);return this.offset=t,this},r.slice=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r=this.clone();return r.offset=e,r.limit=t,r},r.toBuffer=function(e){var t=this.offset,r=this.limit;if(!this.noAssert){if("number"!=typeof t||t%1!=0)throw TypeError("Illegal offset: Not an integer");if(t>>>=0,"number"!=typeof r||r%1!=0)throw TypeError("Illegal limit: Not an integer");if(r>>>=0,t<0||t>r||r>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+t+" <= "+r+" <= "+this.buffer.byteLength)}if(!e&&0===t&&r===this.buffer.byteLength)return this.buffer;if(t===r)return n;var i=new ArrayBuffer(r-t);return new Uint8Array(i).set(new Uint8Array(this.buffer).subarray(t,r),0),i},r.toArrayBuffer=r.toBuffer,r.toString=function(e,t,r){if(void 0===e)return"ByteBufferAB(offset="+this.offset+",markedOffset="+this.markedOffset+",limit="+this.limit+",capacity="+this.capacity()+")";switch("number"==typeof e&&(r=t=e="utf8"),e){case"utf8":return this.toUTF8(t,r);case"base64":return this.toBase64(t,r);case"hex":return this.toHex(t,r);case"binary":return this.toBinary(t,r);case"debug":return this.toDebug();case"columns":return this.toColumns();default:throw Error("Unsupported encoding: "+e)}};var h=function(){for(var e={},t=[65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,48,49,50,51,52,53,54,55,56,57,43,47],r=[],n=0,i=t.length;n<i;++n)r[t[n]]=n;return e.encode=function(e,r){for(var n,i;null!==(n=e());)r(t[n>>2&63]),i=(3&n)<<4,null!==(n=e())?(r(t[63&((i|=n>>4&15)|n>>4&15)]),i=(15&n)<<2,null!==(n=e())?(r(t[63&(i|n>>6&3)]),r(t[63&n])):(r(t[63&i]),r(61))):(r(t[63&i]),r(61),r(61))},e.decode=function(e,t){var n,i,s;function o(e){throw Error("Illegal character code: "+e)}for(;null!==(n=e());)if(void 0===(i=r[n])&&o(n),null!==(n=e())&&(void 0===(s=r[n])&&o(n),t(i<<2>>>0|(48&s)>>4),null!==(n=e()))){if(void 0===(i=r[n])){if(61===n)break;o(n)}if(t((15&s)<<4>>>0|(60&i)>>2),null!==(n=e())){if(void 0===(s=r[n])){if(61===n)break;o(n)}t((3&i)<<6>>>0|s)}}},e.test=function(e){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)},e}();r.toBase64=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity||e>t)throw RangeError("begin, end");var r;return h.encode(function(){return e<t?this.view[e++]:null}.bind(this),r=o()),r()},t.fromBase64=function(e,r){if("string"!=typeof e)throw TypeError("str");var n=new t(e.length/4*3,r),i=0;return h.decode(s(e),(function(e){n.view[i++]=e})),n.limit=i,n},t.btoa=function(e){return t.fromBinary(e).toBase64()},t.atob=function(e){return t.fromBase64(e).toBinary()},r.toBinary=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),t|=0,(e|=0)<0||t>this.capacity()||e>t)throw RangeError("begin, end");if(e===t)return"";for(var r=[],n=[];e<t;)r.push(this.view[e++]),r.length>=1024&&(n.push(String.fromCharCode.apply(String,r)),r=[]);return n.join("")+String.fromCharCode.apply(String,r)},t.fromBinary=function(e,r){if("string"!=typeof e)throw TypeError("str");for(var n,i=0,s=e.length,o=new t(s,r);i<s;){if((n=e.charCodeAt(i))>255)throw RangeError("illegal char code: "+n);o.view[i++]=n}return o.limit=s,o},r.toDebug=function(e){for(var t,r=-1,n=this.buffer.byteLength,i="",s="",o="";r<n;){if(-1!==r&&(i+=(t=this.view[r])<16?"0"+t.toString(16).toUpperCase():t.toString(16).toUpperCase(),e&&(s+=t>32&&t<127?String.fromCharCode(t):".")),++r,e&&r>0&&r%16==0&&r!==n){for(;i.length<51;)i+=" ";o+=i+s+"\n",i=s=""}r===this.offset&&r===this.limit?i+=r===this.markedOffset?"!":"|":r===this.offset?i+=r===this.markedOffset?"[":"<":r===this.limit?i+=r===this.markedOffset?"]":">":i+=r===this.markedOffset?"'":e||0!==r&&r!==n?" ":""}if(e&&" "!==i){for(;i.length<51;)i+=" ";o+=i+s+"\n"}return e?o:i},t.fromDebug=function(e,r,n){for(var i,s,o=e.length,a=new t((o+1)/3|0,r,n),c=0,h=0,l=!1,u=!1,f=!1,d=!1,p=!1;c<o;){switch(i=e.charAt(c++)){case"!":if(!n){if(u||f||d){p=!0;break}u=f=d=!0}a.offset=a.markedOffset=a.limit=h,l=!1;break;case"|":if(!n){if(u||d){p=!0;break}u=d=!0}a.offset=a.limit=h,l=!1;break;case"[":if(!n){if(u||f){p=!0;break}u=f=!0}a.offset=a.markedOffset=h,l=!1;break;case"<":if(!n){if(u){p=!0;break}u=!0}a.offset=h,l=!1;break;case"]":if(!n){if(d||f){p=!0;break}d=f=!0}a.limit=a.markedOffset=h,l=!1;break;case">":if(!n){if(d){p=!0;break}d=!0}a.limit=h,l=!1;break;case"'":if(!n){if(f){p=!0;break}f=!0}a.markedOffset=h,l=!1;break;case" ":l=!1;break;default:if(!n&&l){p=!0;break}if(s=parseInt(i+e.charAt(c++),16),!n&&(isNaN(s)||s<0||s>255))throw TypeError("Illegal str: Not a debug encoded string");a.view[h++]=s,l=!0}if(p)throw TypeError("Illegal str: Invalid symbol at "+c)}if(!n){if(!u||!d)throw TypeError("Illegal str: Missing offset or limit");if(h<a.buffer.byteLength)throw TypeError("Illegal str: Not a debug encoded string (is it hex?) "+h+" < "+o)}return a},r.toHex=function(e,t){if(e=void 0===e?this.offset:e,t=void 0===t?this.limit:t,!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}for(var r,n=new Array(t-e);e<t;)(r=this.view[e++])<16?n.push("0",r.toString(16)):n.push(r.toString(16));return n.join("")},t.fromHex=function(e,r,n){if(!n){if("string"!=typeof e)throw TypeError("Illegal str: Not a string");if(e.length%2!=0)throw TypeError("Illegal str: Length not a multiple of 2")}for(var i,s=e.length,o=new t(s/2|0,r),a=0,c=0;a<s;a+=2){if(i=parseInt(e.substring(a,a+2),16),!n&&(!isFinite(i)||i<0||i>255))throw TypeError("Illegal str: Contains non-hex characters");o.view[c++]=i}return o.limit=c,o};var l=function(){var e={MAX_CODEPOINT:1114111,encodeUTF8:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<128?t(127&r):r<2048?(t(r>>6&31|192),t(63&r|128)):r<65536?(t(r>>12&15|224),t(r>>6&63|128),t(63&r|128)):(t(r>>18&7|240),t(r>>12&63|128),t(r>>6&63|128),t(63&r|128)),r=null},decodeUTF8:function(e,t){for(var r,n,i,s,o=function(e){e=e.slice(0,e.indexOf(null));var t=Error(e.toString());throw t.name="TruncatedError",t.bytes=e,t};null!==(r=e());)if(0==(128&r))t(r);else if(192==(224&r))null===(n=e())&&o([r,n]),t((31&r)<<6|63&n);else if(224==(240&r))(null===(n=e())||null===(i=e()))&&o([r,n,i]),t((15&r)<<12|(63&n)<<6|63&i);else{if(240!=(248&r))throw RangeError("Illegal starting byte: "+r);(null===(n=e())||null===(i=e())||null===(s=e()))&&o([r,n,i,s]),t((7&r)<<18|(63&n)<<12|(63&i)<<6|63&s)}},UTF16toUTF8:function(e,t){for(var r,n=null;null!==(r=null!==n?n:e());)r>=55296&&r<=57343&&null!==(n=e())&&n>=56320&&n<=57343?(t(1024*(r-55296)+n-56320+65536),n=null):t(r);null!==n&&t(n)},UTF8toUTF16:function(e,t){var r=null;for("number"==typeof e&&(r=e,e=function(){return null});null!==r||null!==(r=e());)r<=65535?t(r):(t(55296+((r-=65536)>>10)),t(r%1024+56320)),r=null},encodeUTF16toUTF8:function(t,r){e.UTF16toUTF8(t,(function(t){e.encodeUTF8(t,r)}))},decodeUTF8toUTF16:function(t,r){e.decodeUTF8(t,(function(t){e.UTF8toUTF16(t,r)}))},calculateCodePoint:function(e){return e<128?1:e<2048?2:e<65536?3:4},calculateUTF8:function(e){for(var t,r=0;null!==(t=e());)r+=t<128?1:t<2048?2:t<65536?3:4;return r},calculateUTF16asUTF8:function(t){var r=0,n=0;return e.UTF16toUTF8(t,(function(e){++r,n+=e<128?1:e<2048?2:e<65536?3:4})),[r,n]}};return e}();return r.toUTF8=function(e,t){if(void 0===e&&(e=this.offset),void 0===t&&(t=this.limit),!this.noAssert){if("number"!=typeof e||e%1!=0)throw TypeError("Illegal begin: Not an integer");if(e>>>=0,"number"!=typeof t||t%1!=0)throw TypeError("Illegal end: Not an integer");if(t>>>=0,e<0||e>t||t>this.buffer.byteLength)throw RangeError("Illegal range: 0 <= "+e+" <= "+t+" <= "+this.buffer.byteLength)}var r;try{l.decodeUTF8toUTF16(function(){return e<t?this.view[e++]:null}.bind(this),r=o())}catch(r){if(e!==t)throw RangeError("Illegal range: Truncated data, "+e+" != "+t)}return r()},t.fromUTF8=function(e,r,n){if(!n&&"string"!=typeof e)throw TypeError("Illegal str: Not a string");var i=new t(l.calculateUTF16asUTF8(s(e),!0)[1],r,n),o=0;return l.encodeUTF16toUTF8(s(e),(function(e){i.view[o++]=e})),i.limit=o,i},t})?n.apply(t,i):n)||(e.exports=s)},5717:e=>{"function"==typeof Object.create?e.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:e.exports=function(e,t){if(t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}}},2307:(e,t,r)=>{e=r.nmd(e);var n="__lodash_hash_undefined__",i=9007199254740991,s="[object Arguments]",o="[object Array]",a="[object Boolean]",c="[object Date]",h="[object Error]",l="[object Function]",u="[object Map]",f="[object Number]",d="[object Object]",p="[object Promise]",g="[object RegExp]",b="[object Set]",m="[object String]",y="[object Symbol]",v="[object WeakMap]",w="[object ArrayBuffer]",_="[object DataView]",E=/^\[object .+?Constructor\]$/,S=/^(?:0|[1-9]\d*)$/,I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0,I[s]=I[o]=I[w]=I[a]=I[_]=I[c]=I[h]=I[l]=I[u]=I[f]=I[d]=I[g]=I[b]=I[m]=I[v]=!1;var T="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,x="object"==typeof self&&self&&self.Object===Object&&self,C=T||x||Function("return this")(),A=t&&!t.nodeType&&t,O=A&&e&&!e.nodeType&&e,k=O&&O.exports===A,L=k&&T.process,N=function(){try{return L&&L.binding&&L.binding("util")}catch(e){}}(),R=N&&N.isTypedArray;function U(e,t){for(var r=-1,n=null==e?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}function P(e){var t=-1,r=Array(e.size);return e.forEach((function(e,n){r[++t]=[n,e]})),r}function B(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var F,j,M,D=Array.prototype,q=Function.prototype,G=Object.prototype,V=C["__core-js_shared__"],$=q.toString,H=G.hasOwnProperty,z=(F=/[^.]+$/.exec(V&&V.keys&&V.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"",W=G.toString,K=RegExp("^"+$.call(H).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J=k?C.Buffer:void 0,X=C.Symbol,Z=C.Uint8Array,Y=G.propertyIsEnumerable,Q=D.splice,ee=X?X.toStringTag:void 0,te=Object.getOwnPropertySymbols,re=J?J.isBuffer:void 0,ne=(j=Object.keys,M=Object,function(e){return j(M(e))}),ie=Ne(C,"DataView"),se=Ne(C,"Map"),oe=Ne(C,"Promise"),ae=Ne(C,"Set"),ce=Ne(C,"WeakMap"),he=Ne(Object,"create"),le=Be(ie),ue=Be(se),fe=Be(oe),de=Be(ae),pe=Be(ce),ge=X?X.prototype:void 0,be=ge?ge.valueOf:void 0;function me(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ye(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ve(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function we(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ve;++t<r;)this.add(e[t])}function _e(e){var t=this.__data__=new ye(e);this.size=t.size}function Ee(e,t){var r=Me(e),n=!r&&je(e),i=!r&&!n&&De(e),s=!r&&!n&&!i&&He(e),o=r||n||i||s,a=o?function(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}(e.length,String):[],c=a.length;for(var h in e)!t&&!H.call(e,h)||o&&("length"==h||i&&("offset"==h||"parent"==h)||s&&("buffer"==h||"byteLength"==h||"byteOffset"==h)||Pe(h,c))||a.push(h);return a}function Se(e,t){for(var r=e.length;r--;)if(Fe(e[r][0],t))return r;return-1}function Ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ee&&ee in Object(e)?function(e){var t=H.call(e,ee),r=e[ee];try{e[ee]=void 0;var n=!0}catch(e){}var i=W.call(e);n&&(t?e[ee]=r:delete e[ee]);return i}(e):function(e){return W.call(e)}(e)}function Te(e){return $e(e)&&Ie(e)==s}function xe(e,t,r,n,i){return e===t||(null==e||null==t||!$e(e)&&!$e(t)?e!=e&&t!=t:function(e,t,r,n,i,l){var p=Me(e),v=Me(t),E=p?o:Ue(e),S=v?o:Ue(t),I=(E=E==s?d:E)==d,T=(S=S==s?d:S)==d,x=E==S;if(x&&De(e)){if(!De(t))return!1;p=!0,I=!1}if(x&&!I)return l||(l=new _e),p||He(e)?Oe(e,t,r,n,i,l):function(e,t,r,n,i,s,o){switch(r){case _:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!s(new Z(e),new Z(t)));case a:case c:case f:return Fe(+e,+t);case h:return e.name==t.name&&e.message==t.message;case g:case m:return e==t+"";case u:var l=P;case b:var d=1&n;if(l||(l=B),e.size!=t.size&&!d)return!1;var p=o.get(e);if(p)return p==t;n|=2,o.set(e,t);var v=Oe(l(e),l(t),n,i,s,o);return o.delete(e),v;case y:if(be)return be.call(e)==be.call(t)}return!1}(e,t,E,r,n,i,l);if(!(1&r)){var C=I&&H.call(e,"__wrapped__"),A=T&&H.call(t,"__wrapped__");if(C||A){var O=C?e.value():e,k=A?t.value():t;return l||(l=new _e),i(O,k,r,n,l)}}if(!x)return!1;return l||(l=new _e),function(e,t,r,n,i,s){var o=1&r,a=ke(e),c=a.length,h=ke(t).length;if(c!=h&&!o)return!1;var l=c;for(;l--;){var u=a[l];if(!(o?u in t:H.call(t,u)))return!1}var f=s.get(e);if(f&&s.get(t))return f==t;var d=!0;s.set(e,t),s.set(t,e);var p=o;for(;++l<c;){var g=e[u=a[l]],b=t[u];if(n)var m=o?n(b,g,u,t,e,s):n(g,b,u,e,t,s);if(!(void 0===m?g===b||i(g,b,r,n,s):m)){d=!1;break}p||(p="constructor"==u)}if(d&&!p){var y=e.constructor,v=t.constructor;y==v||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v||(d=!1)}return s.delete(e),s.delete(t),d}(e,t,r,n,i,l)}(e,t,r,n,xe,i))}function Ce(e){return!(!Ve(e)||function(e){return!!z&&z in e}(e))&&(qe(e)?K:E).test(Be(e))}function Ae(e){if(r=(t=e)&&t.constructor,n="function"==typeof r&&r.prototype||G,t!==n)return ne(e);var t,r,n,i=[];for(var s in Object(e))H.call(e,s)&&"constructor"!=s&&i.push(s);return i}function Oe(e,t,r,n,i,s){var o=1&r,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var h=s.get(e);if(h&&s.get(t))return h==t;var l=-1,u=!0,f=2&r?new we:void 0;for(s.set(e,t),s.set(t,e);++l<a;){var d=e[l],p=t[l];if(n)var g=o?n(p,d,l,t,e,s):n(d,p,l,e,t,s);if(void 0!==g){if(g)continue;u=!1;break}if(f){if(!U(t,(function(e,t){if(o=t,!f.has(o)&&(d===e||i(d,e,r,n,s)))return f.push(t);var o}))){u=!1;break}}else if(d!==p&&!i(d,p,r,n,s)){u=!1;break}}return s.delete(e),s.delete(t),u}function ke(e){return function(e,t,r){var n=t(e);return Me(e)?n:function(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}(n,r(e))}(e,ze,Re)}function Le(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function Ne(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Ce(r)?r:void 0}me.prototype.clear=function(){this.__data__=he?he(null):{},this.size=0},me.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},me.prototype.get=function(e){var t=this.__data__;if(he){var r=t[e];return r===n?void 0:r}return H.call(t,e)?t[e]:void 0},me.prototype.has=function(e){var t=this.__data__;return he?void 0!==t[e]:H.call(t,e)},me.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=he&&void 0===t?n:t,this},ye.prototype.clear=function(){this.__data__=[],this.size=0},ye.prototype.delete=function(e){var t=this.__data__,r=Se(t,e);return!(r<0)&&(r==t.length-1?t.pop():Q.call(t,r,1),--this.size,!0)},ye.prototype.get=function(e){var t=this.__data__,r=Se(t,e);return r<0?void 0:t[r][1]},ye.prototype.has=function(e){return Se(this.__data__,e)>-1},ye.prototype.set=function(e,t){var r=this.__data__,n=Se(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this},ve.prototype.clear=function(){this.size=0,this.__data__={hash:new me,map:new(se||ye),string:new me}},ve.prototype.delete=function(e){var t=Le(this,e).delete(e);return this.size-=t?1:0,t},ve.prototype.get=function(e){return Le(this,e).get(e)},ve.prototype.has=function(e){return Le(this,e).has(e)},ve.prototype.set=function(e,t){var r=Le(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this},we.prototype.add=we.prototype.push=function(e){return this.__data__.set(e,n),this},we.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.clear=function(){this.__data__=new ye,this.size=0},_e.prototype.delete=function(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r},_e.prototype.get=function(e){return this.__data__.get(e)},_e.prototype.has=function(e){return this.__data__.has(e)},_e.prototype.set=function(e,t){var r=this.__data__;if(r instanceof ye){var n=r.__data__;if(!se||n.length<199)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new ve(n)}return r.set(e,t),this.size=r.size,this};var Re=te?function(e){return null==e?[]:(e=Object(e),function(e,t){for(var r=-1,n=null==e?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}(te(e),(function(t){return Y.call(e,t)})))}:function(){return[]},Ue=Ie;function Pe(e,t){return!!(t=null==t?i:t)&&("number"==typeof e||S.test(e))&&e>-1&&e%1==0&&e<t}function Be(e){if(null!=e){try{return $.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Fe(e,t){return e===t||e!=e&&t!=t}(ie&&Ue(new ie(new ArrayBuffer(1)))!=_||se&&Ue(new se)!=u||oe&&Ue(oe.resolve())!=p||ae&&Ue(new ae)!=b||ce&&Ue(new ce)!=v)&&(Ue=function(e){var t=Ie(e),r=t==d?e.constructor:void 0,n=r?Be(r):"";if(n)switch(n){case le:return _;case ue:return u;case fe:return p;case de:return b;case pe:return v}return t});var je=Te(function(){return arguments}())?Te:function(e){return $e(e)&&H.call(e,"callee")&&!Y.call(e,"callee")},Me=Array.isArray;var De=re||function(){return!1};function qe(e){if(!Ve(e))return!1;var t=Ie(e);return t==l||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}function Ge(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=i}function Ve(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function $e(e){return null!=e&&"object"==typeof e}var He=R?function(e){return function(t){return e(t)}}(R):function(e){return $e(e)&&Ge(e.length)&&!!I[Ie(e)]};function ze(e){return null!=(t=e)&&Ge(t.length)&&!qe(t)?Ee(e):Ae(e);var t}e.exports=function(e,t){return xe(e,t)}},7644:(e,t,r)=>{var n="__lodash_hash_undefined__",i="[object Function]",s="[object GeneratorFunction]",o=/^\[object .+?Constructor\]$/,a="object"==typeof r.g&&r.g&&r.g.Object===Object&&r.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=a||c||Function("return this")();function l(e,t){return!!(e?e.length:0)&&function(e,t,r){if(t!=t)return function(e,t,r,n){var i=e.length,s=r+(n?1:-1);for(;n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}(e,f,r);var n=r-1,i=e.length;for(;++n<i;)if(e[n]===t)return n;return-1}(e,t,0)>-1}function u(e,t,r){for(var n=-1,i=e?e.length:0;++n<i;)if(r(t,e[n]))return!0;return!1}function f(e){return e!=e}function d(e,t){return e.has(t)}function p(e){var t=-1,r=Array(e.size);return e.forEach((function(e){r[++t]=e})),r}var g,b=Array.prototype,m=Function.prototype,y=Object.prototype,v=h["__core-js_shared__"],w=(g=/[^.]+$/.exec(v&&v.keys&&v.keys.IE_PROTO||""))?"Symbol(src)_1."+g:"",_=m.toString,E=y.hasOwnProperty,S=y.toString,I=RegExp("^"+_.call(E).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=b.splice,x=F(h,"Map"),C=F(h,"Set"),A=F(Object,"create");function O(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function k(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function L(e){var t=-1,r=e?e.length:0;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function N(e){var t=-1,r=e?e.length:0;for(this.__data__=new L;++t<r;)this.add(e[t])}function R(e,t){for(var r,n,i=e.length;i--;)if((r=e[i][0])===(n=t)||r!=r&&n!=n)return i;return-1}function U(e){return!(!j(e)||(t=e,w&&w in t))&&(function(e){var t=j(e)?S.call(e):"";return t==i||t==s}(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?I:o).test(function(e){if(null!=e){try{return _.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}O.prototype.clear=function(){this.__data__=A?A(null):{}},O.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},O.prototype.get=function(e){var t=this.__data__;if(A){var r=t[e];return r===n?void 0:r}return E.call(t,e)?t[e]:void 0},O.prototype.has=function(e){var t=this.__data__;return A?void 0!==t[e]:E.call(t,e)},O.prototype.set=function(e,t){return this.__data__[e]=A&&void 0===t?n:t,this},k.prototype.clear=function(){this.__data__=[]},k.prototype.delete=function(e){var t=this.__data__,r=R(t,e);return!(r<0)&&(r==t.length-1?t.pop():T.call(t,r,1),!0)},k.prototype.get=function(e){var t=this.__data__,r=R(t,e);return r<0?void 0:t[r][1]},k.prototype.has=function(e){return R(this.__data__,e)>-1},k.prototype.set=function(e,t){var r=this.__data__,n=R(r,e);return n<0?r.push([e,t]):r[n][1]=t,this},L.prototype.clear=function(){this.__data__={hash:new O,map:new(x||k),string:new O}},L.prototype.delete=function(e){return B(this,e).delete(e)},L.prototype.get=function(e){return B(this,e).get(e)},L.prototype.has=function(e){return B(this,e).has(e)},L.prototype.set=function(e,t){return B(this,e).set(e,t),this},N.prototype.add=N.prototype.push=function(e){return this.__data__.set(e,n),this},N.prototype.has=function(e){return this.__data__.has(e)};var P=C&&1/p(new C([,-0]))[1]==1/0?function(e){return new C(e)}:function(){};function B(e,t){var r,n,i=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?i["string"==typeof t?"string":"hash"]:i.map}function F(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return U(r)?r:void 0}function j(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}e.exports=function(e){return e&&e.length?function(e,t,r){var n=-1,i=l,s=e.length,o=!0,a=[],c=a;if(r)o=!1,i=u;else if(s>=200){var h=t?null:P(e);if(h)return p(h);o=!1,i=d,c=new N}else c=t?[]:a;e:for(;++n<s;){var f=e[n],g=t?t(f):f;if(f=r||0!==f?f:0,o&&g==g){for(var b=c.length;b--;)if(c[b]===g)continue e;t&&c.push(g),a.push(f)}else i(c,g,r)||(c!==a&&c.push(g),a.push(f))}return a}(e):[]}},9178:function(e,t){var r,n,i;n=[],void 0===(i="function"==typeof(r=function(){"use strict";function e(e,t,r){this.low=0|e,this.high=0|t,this.unsigned=!!r}function t(e){return!0===(e&&e.__isLong__)}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0,enumerable:!1,configurable:!1}),e.isLong=t;var r={},n={};function i(e,t){var i,s,a;return t?(a=0<=(e>>>=0)&&e<256)&&(s=n[e])?s:(i=o(e,(0|e)<0?-1:0,!0),a&&(n[e]=i),i):(a=-128<=(e|=0)&&e<128)&&(s=r[e])?s:(i=o(e,e<0?-1:0,!1),a&&(r[e]=i),i)}function s(e,t){if(isNaN(e)||!isFinite(e))return t?b:g;if(t){if(e<0)return b;if(e>=f)return _}else{if(e<=-d)return E;if(e+1>=d)return w}return e<0?s(-e,t).neg():o(e%u|0,e/u|0,t)}function o(t,r,n){return new e(t,r,n)}e.fromInt=i,e.fromNumber=s,e.fromBits=o;var a=Math.pow;function c(e,t,r){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return g;if("number"==typeof t?(r=t,t=!1):t=!!t,(r=r||10)<2||36<r)throw RangeError("radix");var n;if((n=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===n)return c(e.substring(1),t,r).neg();for(var i=s(a(r,8)),o=g,h=0;h<e.length;h+=8){var l=Math.min(8,e.length-h),u=parseInt(e.substring(h,h+l),r);if(l<8){var f=s(a(r,l));o=o.mul(f).add(s(u))}else o=(o=o.mul(i)).add(s(u))}return o.unsigned=t,o}function h(t){return t instanceof e?t:"number"==typeof t?s(t):"string"==typeof t?c(t):o(t.low,t.high,t.unsigned)}e.fromString=c,e.fromValue=h;var l=65536,u=l*l,f=u*u,d=f/2,p=i(1<<24),g=i(0);e.ZERO=g;var b=i(0,!0);e.UZERO=b;var m=i(1);e.ONE=m;var y=i(1,!0);e.UONE=y;var v=i(-1);e.NEG_ONE=v;var w=o(-1,2147483647,!1);e.MAX_VALUE=w;var _=o(-1,-1,!0);e.MAX_UNSIGNED_VALUE=_;var E=o(0,-2147483648,!1);e.MIN_VALUE=E;var S=e.prototype;return S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*u+(this.low>>>0):this.high*u+(this.low>>>0)},S.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(E)){var t=s(e),r=this.div(t),n=r.mul(t).sub(this);return r.toString(e)+n.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var i=s(a(e,6),this.unsigned),o=this,c="";;){var h=o.div(i),l=(o.sub(h.mul(i)).toInt()>>>0).toString(e);if((o=h).isZero())return l+c;for(;l.length<6;)l="0"+l;c=""+l+c}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(E)?64:this.neg().getNumBitsAbs();for(var e=0!=this.high?this.high:this.low,t=31;t>0&&0==(e&1<<t);t--);return 0!=this.high?t+33:t+1},S.isZero=function(){return 0===this.high&&0===this.low},S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return 1==(1&this.low)},S.isEven=function(){return 0==(1&this.low)},S.equals=function(e){return t(e)||(e=h(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},S.eq=S.equals,S.notEquals=function(e){return!this.eq(e)},S.neq=S.notEquals,S.lessThan=function(e){return this.comp(e)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(e){return this.comp(e)<=0},S.lte=S.lessThanOrEqual,S.greaterThan=function(e){return this.comp(e)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(e){return this.comp(e)>=0},S.gte=S.greaterThanOrEqual,S.compare=function(e){if(t(e)||(e=h(e)),this.eq(e))return 0;var r=this.isNegative(),n=e.isNegative();return r&&!n?-1:!r&&n?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(E)?E:this.not().add(m)},S.neg=S.negate,S.add=function(e){t(e)||(e=h(e));var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,s=65535&this.low,a=e.high>>>16,c=65535&e.high,l=e.low>>>16,u=0,f=0,d=0,p=0;return d+=(p+=s+(65535&e.low))>>>16,f+=(d+=i+l)>>>16,u+=(f+=n+c)>>>16,u+=r+a,o((d&=65535)<<16|(p&=65535),(u&=65535)<<16|(f&=65535),this.unsigned)},S.subtract=function(e){return t(e)||(e=h(e)),this.add(e.neg())},S.sub=S.subtract,S.multiply=function(e){if(this.isZero())return g;if(t(e)||(e=h(e)),e.isZero())return g;if(this.eq(E))return e.isOdd()?E:g;if(e.eq(E))return this.isOdd()?E:g;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(p)&&e.lt(p))return s(this.toNumber()*e.toNumber(),this.unsigned);var r=this.high>>>16,n=65535&this.high,i=this.low>>>16,a=65535&this.low,c=e.high>>>16,l=65535&e.high,u=e.low>>>16,f=65535&e.low,d=0,b=0,m=0,y=0;return m+=(y+=a*f)>>>16,b+=(m+=i*f)>>>16,m&=65535,b+=(m+=a*u)>>>16,d+=(b+=n*f)>>>16,b&=65535,d+=(b+=i*u)>>>16,b&=65535,d+=(b+=a*l)>>>16,d+=r*f+n*u+i*l+a*c,o((m&=65535)<<16|(y&=65535),(d&=65535)<<16|(b&=65535),this.unsigned)},S.mul=S.multiply,S.divide=function(e){if(t(e)||(e=h(e)),e.isZero())throw Error("division by zero");if(this.isZero())return this.unsigned?b:g;var r,n,i;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return b;if(e.gt(this.shru(1)))return y;i=b}else{if(this.eq(E))return e.eq(m)||e.eq(v)?E:e.eq(E)?m:(r=this.shr(1).div(e).shl(1)).eq(g)?e.isNegative()?m:v:(n=this.sub(e.mul(r)),i=r.add(n.div(e)));if(e.eq(E))return this.unsigned?b:g;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();i=g}for(n=this;n.gte(e);){r=Math.max(1,Math.floor(n.toNumber()/e.toNumber()));for(var o=Math.ceil(Math.log(r)/Math.LN2),c=o<=48?1:a(2,o-48),l=s(r),u=l.mul(e);u.isNegative()||u.gt(n);)u=(l=s(r-=c,this.unsigned)).mul(e);l.isZero()&&(l=m),i=i.add(l),n=n.sub(u)}return i},S.div=S.divide,S.modulo=function(e){return t(e)||(e=h(e)),this.sub(this.div(e).mul(e))},S.mod=S.modulo,S.not=function(){return o(~this.low,~this.high,this.unsigned)},S.and=function(e){return t(e)||(e=h(e)),o(this.low&e.low,this.high&e.high,this.unsigned)},S.or=function(e){return t(e)||(e=h(e)),o(this.low|e.low,this.high|e.high,this.unsigned)},S.xor=function(e){return t(e)||(e=h(e)),o(this.low^e.low,this.high^e.high,this.unsigned)},S.shiftLeft=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):o(0,this.low<<e-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(e){return t(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?o(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):o(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(e){if(t(e)&&(e=e.toInt()),0==(e&=63))return this;var r=this.high;return e<32?o(this.low>>>e|r<<32-e,r>>>e,this.unsigned):o(32===e?r:r>>>e-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.toSigned=function(){return this.unsigned?o(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:o(this.low,this.high,!0)},S.toBytes=function(e){return e?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var e=this.high,t=this.low;return[255&t,t>>>8&255,t>>>16&255,t>>>24&255,255&e,e>>>8&255,e>>>16&255,e>>>24&255]},S.toBytesBE=function(){var e=this.high,t=this.low;return[e>>>24&255,e>>>16&255,e>>>8&255,255&e,t>>>24&255,t>>>16&255,t>>>8&255,255&t]},e})?r.apply(t,n):r)||(e.exports=i)},1795:function(e,t,r){var n;e=r.nmd(e),function(){"use strict";var i={function:!0,object:!0},s=i[typeof window]&&window||this,o=i[typeof t]&&t,a=i.object&&e&&!e.nodeType&&e,c=o&&a&&"object"==typeof r.g&&r.g;!c||c.global!==c&&c.window!==c&&c.self!==c||(s=c);var h=Math.pow(2,53)-1,l=/\bOpera/,u=Object.prototype,f=u.hasOwnProperty,d=u.toString;function p(e){return(e=String(e)).charAt(0).toUpperCase()+e.slice(1)}function g(e){return e=w(e),/^(?:webOS|i(?:OS|P))/.test(e)?e:p(e)}function b(e,t){for(var r in e)f.call(e,r)&&t(e[r],r,e)}function m(e){return null==e?p(e):d.call(e).slice(8,-1)}function y(e){return String(e).replace(/([ -])(?!$)/g,"$1?")}function v(e,t){var r=null;return function(e,t){var r=-1,n=e?e.length:0;if("number"==typeof n&&n>-1&&n<=h)for(;++r<n;)t(e[r],r,e);else b(e,t)}(e,(function(n,i){r=t(r,n,i,e)})),r}function w(e){return String(e).replace(/^ +| +$/g,"")}var _=function e(t){var r=s,n=t&&"object"==typeof t&&"String"!=m(t);n&&(r=t,t=null);var i=r.navigator||{},o=i.userAgent||"";t||(t=o);var a,c,h,u,f,p=n?!!i.likeChrome:/\bChrome\b/.test(t)&&!/internal|\n/i.test(d.toString()),_="Object",E=n?_:"ScriptBridgingProxyObject",S=n?_:"Environment",I=n&&r.java?"JavaPackage":m(r.java),T=n?_:"RuntimeObject",x=/\bJava/.test(I)&&r.java,C=x&&m(r.environment)==S,A=x?"a":"α",O=x?"b":"β",k=r.document||{},L=r.operamini||r.opera,N=l.test(N=n&&L?L["[[Class]]"]:m(L))?N:L=null,R=t,U=[],P=null,B=t==o,F=B&&L&&"function"==typeof L.version&&L.version(),j=v([{label:"EdgeHTML",pattern:"Edge"},"Trident",{label:"WebKit",pattern:"AppleWebKit"},"iCab","Presto","NetFront","Tasman","KHTML","Gecko"],(function(e,r){return e||RegExp("\\b"+(r.pattern||y(r))+"\\b","i").exec(t)&&(r.label||r)})),M=function(e){return v(e,(function(e,r){return e||RegExp("\\b"+(r.pattern||y(r))+"\\b","i").exec(t)&&(r.label||r)}))}(["Adobe AIR","Arora","Avant Browser","Breach","Camino","Electron","Epiphany","Fennec","Flock","Galeon","GreenBrowser","iCab","Iceweasel","K-Meleon","Konqueror","Lunascape","Maxthon",{label:"Microsoft Edge",pattern:"(?:Edge|Edg|EdgA|EdgiOS)"},"Midori","Nook Browser","PaleMoon","PhantomJS","Raven","Rekonq","RockMelt",{label:"Samsung Internet",pattern:"SamsungBrowser"},"SeaMonkey",{label:"Silk",pattern:"(?:Cloud9|Silk-Accelerated)"},"Sleipnir","SlimBrowser",{label:"SRWare Iron",pattern:"Iron"},"Sunrise","Swiftfox","Vivaldi","Waterfox","WebPositive",{label:"Yandex Browser",pattern:"YaBrowser"},{label:"UC Browser",pattern:"UCBrowser"},"Opera Mini",{label:"Opera Mini",pattern:"OPiOS"},"Opera",{label:"Opera",pattern:"OPR"},"Chromium","Chrome",{label:"Chrome",pattern:"(?:HeadlessChrome)"},{label:"Chrome Mobile",pattern:"(?:CriOS|CrMo)"},{label:"Firefox",pattern:"(?:Firefox|Minefield)"},{label:"Firefox for iOS",pattern:"FxiOS"},{label:"IE",pattern:"IEMobile"},{label:"IE",pattern:"MSIE"},"Safari"]),D=V([{label:"BlackBerry",pattern:"BB10"},"BlackBerry",{label:"Galaxy S",pattern:"GT-I9000"},{label:"Galaxy S2",pattern:"GT-I9100"},{label:"Galaxy S3",pattern:"GT-I9300"},{label:"Galaxy S4",pattern:"GT-I9500"},{label:"Galaxy S5",pattern:"SM-G900"},{label:"Galaxy S6",pattern:"SM-G920"},{label:"Galaxy S6 Edge",pattern:"SM-G925"},{label:"Galaxy S7",pattern:"SM-G930"},{label:"Galaxy S7 Edge",pattern:"SM-G935"},"Google TV","Lumia","iPad","iPod","iPhone","Kindle",{label:"Kindle Fire",pattern:"(?:Cloud9|Silk-Accelerated)"},"Nexus","Nook","PlayBook","PlayStation Vita","PlayStation","TouchPad","Transformer",{label:"Wii U",pattern:"WiiU"},"Wii","Xbox One",{label:"Xbox 360",pattern:"Xbox"},"Xoom"]),q=function(e){return v(e,(function(e,r,n){return e||(r[D]||r[/^[a-z]+(?: +[a-z]+\b)*/i.exec(D)]||RegExp("\\b"+y(n)+"(?:\\b|\\w*\\d)","i").exec(t))&&n}))}({Apple:{iPad:1,iPhone:1,iPod:1},Alcatel:{},Archos:{},Amazon:{Kindle:1,"Kindle Fire":1},Asus:{Transformer:1},"Barnes & Noble":{Nook:1},BlackBerry:{PlayBook:1},Google:{"Google TV":1,Nexus:1},HP:{TouchPad:1},HTC:{},Huawei:{},Lenovo:{},LG:{},Microsoft:{Xbox:1,"Xbox One":1},Motorola:{Xoom:1},Nintendo:{"Wii U":1,Wii:1},Nokia:{Lumia:1},Oppo:{},Samsung:{"Galaxy S":1,"Galaxy S2":1,"Galaxy S3":1,"Galaxy S4":1},Sony:{PlayStation:1,"PlayStation Vita":1},Xiaomi:{Mi:1,Redmi:1}}),G=function(e){return v(e,(function(e,r){var n=r.pattern||y(r);return!e&&(e=RegExp("\\b"+n+"(?:/[\\d.]+|[ \\w.]*)","i").exec(t))&&(e=function(e,t,r){var n={"10.0":"10",6.4:"10 Technical Preview",6.3:"8.1",6.2:"8",6.1:"Server 2008 R2 / 7","6.0":"Server 2008 / Vista",5.2:"Server 2003 / XP 64-bit",5.1:"XP",5.01:"2000 SP1","5.0":"2000","4.0":"NT","4.90":"ME"};return t&&r&&/^Win/i.test(e)&&!/^Windows Phone /i.test(e)&&(n=n[/[\d.]+$/.exec(e)])&&(e="Windows "+n),e=String(e),t&&r&&(e=e.replace(RegExp(t,"i"),r)),g(e.replace(/ ce$/i," CE").replace(/\bhpw/i,"web").replace(/\bMacintosh\b/,"Mac OS").replace(/_PowerPC\b/i," OS").replace(/\b(OS X) [^ \d]+/i,"$1").replace(/\bMac (OS X)\b/,"$1").replace(/\/(\d)/," $1").replace(/_/g,".").replace(/(?: BePC|[ .]*fc[ \d.]+)$/i,"").replace(/\bx86\.64\b/gi,"x86_64").replace(/\b(Windows Phone) OS\b/,"$1").replace(/\b(Chrome OS \w+) [\d.]+\b/,"$1").split(" on ")[0])}(e,n,r.label||r)),e}))}(["Windows Phone","KaiOS","Android","CentOS",{label:"Chrome OS",pattern:"CrOS"},"Debian",{label:"DragonFly BSD",pattern:"DragonFly"},"Fedora","FreeBSD","Gentoo","Haiku","Kubuntu","Linux Mint","OpenBSD","Red Hat","SuSE","Ubuntu","Xubuntu","Cygwin","Symbian OS","hpwOS","webOS ","webOS","Tablet OS","Tizen","Linux","Mac OS X","Macintosh","Mac","Windows 98;","Windows "]);function V(e){return v(e,(function(e,r){var n=r.pattern||y(r);return!e&&(e=RegExp("\\b"+n+" *\\d+[.\\w_]*","i").exec(t)||RegExp("\\b"+n+" *\\w+-[\\w]*","i").exec(t)||RegExp("\\b"+n+"(?:; *(?:[a-z]+[_-])?[a-z]+\\d+|[^ ();-]*)","i").exec(t))&&((e=String(r.label&&!RegExp(n,"i").test(r.label)?r.label:e).split("/"))[1]&&!/[\d.]+/.test(e[0])&&(e[0]+=" "+e[1]),r=r.label||r,e=g(e[0].replace(RegExp(n,"i"),r).replace(RegExp("; *(?:"+r+"[_-])?","i")," ").replace(RegExp("("+r+")[-_.]?(\\w)","i"),"$1 $2"))),e}))}function $(e){return v(e,(function(e,r){return e||(RegExp(r+"(?:-[\\d.]+/|(?: for [\\w-]+)?[ /-])([\\d.]+[^ ();/_-]*)","i").exec(t)||0)[1]||null}))}if(j&&(j=[j]),/\bAndroid\b/.test(G)&&!D&&(a=/\bAndroid[^;]*;(.*?)(?:Build|\) AppleWebKit)\b/i.exec(t))&&(D=w(a[1]).replace(/^[a-z]{2}-[a-z]{2};\s*/i,"")||null),q&&!D?D=V([q]):q&&D&&(D=D.replace(RegExp("^("+y(q)+")[-_.\\s]","i"),q+" ").replace(RegExp("^("+y(q)+")[-_.]?(\\w)","i"),q+" $2")),(a=/\bGoogle TV\b/.exec(D))&&(D=a[0]),/\bSimulator\b/i.test(t)&&(D=(D?D+" ":"")+"Simulator"),"Opera Mini"==M&&/\bOPiOS\b/.test(t)&&U.push("running in Turbo/Uncompressed mode"),"IE"==M&&/\blike iPhone OS\b/.test(t)?(q=(a=e(t.replace(/like iPhone OS/,""))).manufacturer,D=a.product):/^iP/.test(D)?(M||(M="Safari"),G="iOS"+((a=/ OS ([\d_]+)/i.exec(t))?" "+a[1].replace(/_/g,"."):"")):"Konqueror"==M&&/^Linux\b/i.test(G)?G="Kubuntu":q&&"Google"!=q&&(/Chrome/.test(M)&&!/\bMobile Safari\b/i.test(t)||/\bVita\b/.test(D))||/\bAndroid\b/.test(G)&&/^Chrome/.test(M)&&/\bVersion\//i.test(t)?(M="Android Browser",G=/\bAndroid\b/.test(G)?G:"Android"):"Silk"==M?(/\bMobi/i.test(t)||(G="Android",U.unshift("desktop mode")),/Accelerated *= *true/i.test(t)&&U.unshift("accelerated")):"UC Browser"==M&&/\bUCWEB\b/.test(t)?U.push("speed mode"):"PaleMoon"==M&&(a=/\bFirefox\/([\d.]+)\b/.exec(t))?U.push("identifying as Firefox "+a[1]):"Firefox"==M&&(a=/\b(Mobile|Tablet|TV)\b/i.exec(t))?(G||(G="Firefox OS"),D||(D=a[1])):!M||(a=!/\bMinefield\b/i.test(t)&&/\b(?:Firefox|Safari)\b/.exec(M))?(M&&!D&&/[\/,]|^[^(]+?\)/.test(t.slice(t.indexOf(a+"/")+8))&&(M=null),(a=D||q||G)&&(D||q||/\b(?:Android|Symbian OS|Tablet OS|webOS)\b/.test(G))&&(M=/[a-z]+(?: Hat)?/i.exec(/\bAndroid\b/.test(G)?G:a)+" Browser")):"Electron"==M&&(a=(/\bChrome\/([\d.]+)\b/.exec(t)||0)[1])&&U.push("Chromium "+a),F||(F=$(["(?:Cloud9|CriOS|CrMo|Edge|Edg|EdgA|EdgiOS|FxiOS|HeadlessChrome|IEMobile|Iron|Opera ?Mini|OPiOS|OPR|Raven|SamsungBrowser|Silk(?!/[\\d.]+$)|UCBrowser|YaBrowser)","Version",y(M),"(?:Firefox|Minefield|NetFront)"])),(a=("iCab"==j&&parseFloat(F)>3?"WebKit":/\bOpera\b/.test(M)&&(/\bOPR\b/.test(t)?"Blink":"Presto"))||/\b(?:Midori|Nook|Safari)\b/i.test(t)&&!/^(?:Trident|EdgeHTML)$/.test(j)&&"WebKit"||!j&&/\bMSIE\b/i.test(t)&&("Mac OS"==G?"Tasman":"Trident")||"WebKit"==j&&/\bPlayStation\b(?! Vita\b)/i.test(M)&&"NetFront")&&(j=[a]),"IE"==M&&(a=(/; *(?:XBLWP|ZuneWP)(\d+)/i.exec(t)||0)[1])?(M+=" Mobile",G="Windows Phone "+(/\+$/.test(a)?a:a+".x"),U.unshift("desktop mode")):/\bWPDesktop\b/i.test(t)?(M="IE Mobile",G="Windows Phone 8.x",U.unshift("desktop mode"),F||(F=(/\brv:([\d.]+)/.exec(t)||0)[1])):"IE"!=M&&"Trident"==j&&(a=/\brv:([\d.]+)/.exec(t))&&(M&&U.push("identifying as "+M+(F?" "+F:"")),M="IE",F=a[1]),B){if(u="global",f=null!=(h=r)?typeof h[u]:"number",/^(?:boolean|number|string|undefined)$/.test(f)||"object"==f&&!h[u])m(a=r.runtime)==E?(M="Adobe AIR",G=a.flash.system.Capabilities.os):m(a=r.phantom)==T?(M="PhantomJS",F=(a=a.version||null)&&a.major+"."+a.minor+"."+a.patch):"number"==typeof k.documentMode&&(a=/\bTrident\/(\d+)/i.exec(t))?(F=[F,k.documentMode],(a=+a[1]+4)!=F[1]&&(U.push("IE "+F[1]+" mode"),j&&(j[1]=""),F[1]=a),F="IE"==M?String(F[1].toFixed(1)):F[0]):"number"==typeof k.documentMode&&/^(?:Chrome|Firefox)\b/.test(M)&&(U.push("masking as "+M+" "+F),M="IE",F="11.0",j=["Trident"],G="Windows");else if(x&&(R=(a=x.lang.System).getProperty("os.arch"),G=G||a.getProperty("os.name")+" "+a.getProperty("os.version")),C){try{F=r.require("ringo/engine").version.join("."),M="RingoJS"}catch(e){(a=r.system)&&a.global.system==r.system&&(M="Narwhal",G||(G=a[0].os||null))}M||(M="Rhino")}else"object"==typeof r.process&&!r.process.browser&&(a=r.process)&&("object"==typeof a.versions&&("string"==typeof a.versions.electron?(U.push("Node "+a.versions.node),M="Electron",F=a.versions.electron):"string"==typeof a.versions.nw&&(U.push("Chromium "+F,"Node "+a.versions.node),M="NW.js",F=a.versions.nw)),M||(M="Node.js",R=a.arch,G=a.platform,F=(F=/[\d.]+/.exec(a.version))?F[0]:null));G=G&&g(G)}if(F&&(a=/(?:[ab]|dp|pre|[ab]\d+pre)(?:\d+\+?)?$/i.exec(F)||/(?:alpha|beta)(?: ?\d)?/i.exec(t+";"+(B&&i.appMinorVersion))||/\bMinefield\b/i.test(t)&&"a")&&(P=/b/i.test(a)?"beta":"alpha",F=F.replace(RegExp(a+"\\+?$"),"")+("beta"==P?O:A)+(/\d+\+?/.exec(a)||"")),"Fennec"==M||"Firefox"==M&&/\b(?:Android|Firefox OS|KaiOS)\b/.test(G))M="Firefox Mobile";else if("Maxthon"==M&&F)F=F.replace(/\.[\d.]+/,".x");else if(/\bXbox\b/i.test(D))"Xbox 360"==D&&(G=null),"Xbox 360"==D&&/\bIEMobile\b/.test(t)&&U.unshift("mobile mode");else if(!/^(?:Chrome|IE|Opera)$/.test(M)&&(!M||D||/Browser|Mobi/.test(M))||"Windows CE"!=G&&!/Mobi/i.test(t))if("IE"==M&&B)try{null===r.external&&U.unshift("platform preview")}catch(e){U.unshift("embedded")}else(/\bBlackBerry\b/.test(D)||/\bBB10\b/.test(t))&&(a=(RegExp(D.replace(/ +/g," *")+"/([.\\d]+)","i").exec(t)||0)[1]||F)?(G=((a=[a,/BB10/.test(t)])[1]?(D=null,q="BlackBerry"):"Device Software")+" "+a[0],F=null):this!=b&&"Wii"!=D&&(B&&L||/Opera/.test(M)&&/\b(?:MSIE|Firefox)\b/i.test(t)||"Firefox"==M&&/\bOS X (?:\d+\.){2,}/.test(G)||"IE"==M&&(G&&!/^Win/.test(G)&&F>5.5||/\bWindows XP\b/.test(G)&&F>8||8==F&&!/\bTrident\b/.test(t)))&&!l.test(a=e.call(b,t.replace(l,"")+";"))&&a.name&&(a="ing as "+a.name+((a=a.version)?" "+a:""),l.test(M)?(/\bIE\b/.test(a)&&"Mac OS"==G&&(G=null),a="identify"+a):(a="mask"+a,M=N?g(N.replace(/([a-z])([A-Z])/g,"$1 $2")):"Opera",/\bIE\b/.test(a)&&(G=null),B||(F=null)),j=["Presto"],U.push(a));else M+=" Mobile";(a=(/\bAppleWebKit\/([\d.]+\+?)/i.exec(t)||0)[1])&&(a=[parseFloat(a.replace(/\.(\d)$/,".0$1")),a],"Safari"==M&&"+"==a[1].slice(-1)?(M="WebKit Nightly",P="alpha",F=a[1].slice(0,-1)):F!=a[1]&&F!=(a[2]=(/\bSafari\/([\d.]+\+?)/i.exec(t)||0)[1])||(F=null),a[1]=(/\b(?:Headless)?Chrome\/([\d.]+)/i.exec(t)||0)[1],537.36==a[0]&&537.36==a[2]&&parseFloat(a[1])>=28&&"WebKit"==j&&(j=["Blink"]),B&&(p||a[1])?(j&&(j[1]="like Chrome"),a=a[1]||((a=a[0])<530?1:a<532?2:a<532.05?3:a<533?4:a<534.03?5:a<534.07?6:a<534.1?7:a<534.13?8:a<534.16?9:a<534.24?10:a<534.3?11:a<535.01?12:a<535.02?"13+":a<535.07?15:a<535.11?16:a<535.19?17:a<536.05?18:a<536.1?19:a<537.01?20:a<537.11?"21+":a<537.13?23:a<537.18?24:a<537.24?25:a<537.36?26:"Blink"!=j?"27":"28")):(j&&(j[1]="like Safari"),a=(a=a[0])<400?1:a<500?2:a<526?3:a<533?4:a<534?"4+":a<535?5:a<537?6:a<538?7:a<601?8:a<602?9:a<604?10:a<606?11:a<608?12:"12"),j&&(j[1]+=" "+(a+="number"==typeof a?".x":/[.+]/.test(a)?"":"+")),"Safari"==M&&(!F||parseInt(F)>45)?F=a:"Chrome"==M&&/\bHeadlessChrome/i.test(t)&&U.unshift("headless")),"Opera"==M&&(a=/\bzbov|zvav$/.exec(G))?(M+=" ",U.unshift("desktop mode"),"zvav"==a?(M+="Mini",F=null):M+="Mobile",G=G.replace(RegExp(" *"+a+"$"),"")):"Safari"==M&&/\bChrome\b/.exec(j&&j[1])?(U.unshift("desktop mode"),M="Chrome Mobile",F=null,/\bOS X\b/.test(G)?(q="Apple",G="iOS 4.3+"):G=null):/\bSRWare Iron\b/.test(M)&&!F&&(F=$("Chrome")),F&&0==F.indexOf(a=/[\d.]+$/.exec(G))&&t.indexOf("/"+a+"-")>-1&&(G=w(G.replace(a,""))),G&&-1!=G.indexOf(M)&&!RegExp(M+" OS").test(G)&&(G=G.replace(RegExp(" *"+y(M)+" *"),"")),j&&!/\b(?:Avant|Nook)\b/.test(M)&&(/Browser|Lunascape|Maxthon/.test(M)||"Safari"!=M&&/^iOS/.test(G)&&/\bSafari\b/.test(j[1])||/^(?:Adobe|Arora|Breach|Midori|Opera|Phantom|Rekonq|Rock|Samsung Internet|Sleipnir|SRWare Iron|Vivaldi|Web)/.test(M)&&j[1])&&(a=j[j.length-1])&&U.push(a),U.length&&(U=["("+U.join("; ")+")"]),q&&D&&D.indexOf(q)<0&&U.push("on "+q),D&&U.push((/^on /.test(U[U.length-1])?"":"on ")+D),G&&(a=/ ([\d.+]+)$/.exec(G),c=a&&"/"==G.charAt(G.length-a[0].length-1),G={architecture:32,family:a&&!c?G.replace(a[0],""):G,version:a?a[1]:null,toString:function(){var e=this.version;return this.family+(e&&!c?" "+e:"")+(64==this.architecture?" 64-bit":"")}}),(a=/\b(?:AMD|IA|Win|WOW|x86_|x)64\b/i.exec(R))&&!/\bi686\b/i.test(R)?(G&&(G.architecture=64,G.family=G.family.replace(RegExp(" *"+a),"")),M&&(/\bWOW64\b/i.test(t)||B&&/\w(?:86|32)$/.test(i.cpuClass||i.platform)&&!/\bWin64; x64\b/i.test(t))&&U.unshift("32-bit")):G&&/^OS X/.test(G.family)&&"Chrome"==M&&parseFloat(F)>=39&&(G.architecture=64),t||(t=null);var H={};return H.description=t,H.layout=j&&j[0],H.manufacturer=q,H.name=M,H.prerelease=P,H.product=D,H.ua=t,H.version=M&&F,H.os=G||{architecture:null,family:null,version:null,toString:function(){return"null"}},H.parse=e,H.toString=function(){return this.description||""},H.version&&U.unshift(F),H.name&&U.unshift(M),G&&M&&(G!=String(G).split(" ")[0]||G!=M.split(" ")[0]&&!D)&&U.push(D?"("+G+")":"on "+G),U.length&&(H.description=U.join(" ")),H}();s.platform=_,void 0===(n=function(){return _}.call(t,r,t,e))||(e.exports=n)}.call(this)},7129:(e,t)=>{"use strict";var r=Object.prototype.hasOwnProperty;function n(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}function i(e){try{return encodeURIComponent(e)}catch(e){return null}}t.stringify=function(e,t){t=t||"";var n,s,o=[];for(s in"string"!=typeof t&&(t="?"),e)if(r.call(e,s)){if((n=e[s])||null!=n&&!isNaN(n)||(n=""),s=i(s),n=i(n),null===s||null===n)continue;o.push(s+"="+n)}return o.length?t+o.join("&"):""},t.parse=function(e){for(var t,r=/([^=?#&]+)=?([^&]*)/g,i={};t=r.exec(e);){var s=n(t[1]),o=n(t[2]);null===s||null===o||s in i||(i[s]=o)}return i}},7418:e=>{"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},8e3:(e,t,r)=>{"use strict";var n=r(7581);e.exports=r(3626)(n),"_sockjs_onload"in r.g&&setTimeout(r.g._sockjs_onload,1)},2530:(e,t,r)=>{"use strict";var n=r(5717),i=r(685);function s(){i.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}n(s,i),e.exports=s},3212:(e,t,r)=>{"use strict";var n=r(5717),i=r(3184);function s(){i.call(this)}n(s,i),s.prototype.removeAllListeners=function(e){e?delete this._listeners[e]:this._listeners={}},s.prototype.once=function(e,t){var r=this,n=!1;this.on(e,(function i(){r.removeListener(e,i),n||(n=!0,t.apply(this,arguments))}))},s.prototype.emit=function(){var e=arguments[0],t=this._listeners[e];if(t){for(var r=arguments.length,n=new Array(r-1),i=1;i<r;i++)n[i-1]=arguments[i];for(var s=0;s<t.length;s++)t[s].apply(this,n)}},s.prototype.on=s.prototype.addListener=i.prototype.addEventListener,s.prototype.removeListener=i.prototype.removeEventListener,e.exports.v=s},685:e=>{"use strict";function t(e){this.type=e}t.prototype.initEvent=function(e,t,r){return this.type=e,this.bubbles=t,this.cancelable=r,this.timeStamp=+new Date,this},t.prototype.stopPropagation=function(){},t.prototype.preventDefault=function(){},t.CAPTURING_PHASE=1,t.AT_TARGET=2,t.BUBBLING_PHASE=3,e.exports=t},3184:e=>{"use strict";function t(){this._listeners={}}t.prototype.addEventListener=function(e,t){e in this._listeners||(this._listeners[e]=[]);var r=this._listeners[e];-1===r.indexOf(t)&&(r=r.concat([t])),this._listeners[e]=r},t.prototype.removeEventListener=function(e,t){var r=this._listeners[e];if(r){var n=r.indexOf(t);-1===n||(r.length>1?this._listeners[e]=r.slice(0,n).concat(r.slice(n+1)):delete this._listeners[e])}},t.prototype.dispatchEvent=function(){var e=arguments[0],t=e.type,r=1===arguments.length?[e]:Array.apply(null,arguments);if(this["on"+t]&&this["on"+t].apply(this,r),t in this._listeners)for(var n=this._listeners[t],i=0;i<n.length;i++)n[i].apply(this,r)},e.exports=t},3326:(e,t,r)=>{"use strict";var n=r(5717),i=r(685);function s(e){i.call(this),this.initEvent("message",!1,!1),this.data=e}n(s,i),e.exports=s},691:(e,t,r)=>{"use strict";var n=r(3683);function i(e){this._transport=e,e.on("message",this._transportMessage.bind(this)),e.on("close",this._transportClose.bind(this))}i.prototype._transportClose=function(e,t){n.postMessage("c",JSON.stringify([e,t]))},i.prototype._transportMessage=function(e){n.postMessage("t",e)},i.prototype._send=function(e){this._transport.send(e)},i.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()},e.exports=i},551:(e,t,r)=>{"use strict";var n=r(273),i=r(7705),s=r(691),o=r(6311),a=r(3683),c=r(7486);e.exports=function(e,t){var r,h={};t.forEach((function(e){e.facadeTransport&&(h[e.facadeTransport.transportName]=e.facadeTransport)})),h[o.transportName]=o,e.bootstrap_iframe=function(){var t;a.currentWindowId=c.hash.slice(1);i.attachEvent("message",(function(i){if(i.source===parent&&(void 0===r&&(r=i.origin),i.origin===r)){var o;try{o=JSON.parse(i.data)}catch(e){return void i.data}if(o.windowId===a.currentWindowId)switch(o.type){case"s":var l;try{l=JSON.parse(o.data)}catch(e){o.data;break}var u=l[0],f=l[1],d=l[2],p=l[3];if(u!==e.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+e.version+'".');if(!n.isOriginEqual(d,c.href)||!n.isOriginEqual(p,c.href))throw new Error("Can't connect to different domain from within an iframe. ("+c.href+", "+d+", "+p+")");t=new s(new h[f](d,p));break;case"m":t._send(o.data);break;case"c":t&&t._close(),t=null}}})),a.postMessage("s")}}},2550:(e,t,r)=>{"use strict";var n=r(3212).v,i=r(5717),s=r(2217);function o(e,t){n.call(this);var r=this,i=+new Date;this.xo=new t("GET",e),this.xo.once("finish",(function(e,t){var n,o;if(200===e){if(o=+new Date-i,t)try{n=JSON.parse(t)}catch(e){}s.isObject(n)||(n={})}r.emit("finish",n,o),r.removeAllListeners()}))}i(o,n),o.prototype.close=function(){this.removeAllListeners(),this.xo.close()},e.exports=o},6311:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v,s=r(3515),o=r(2550);function a(e){var t=this;i.call(this),this.ir=new o(e,s),this.ir.once("finish",(function(e,r){t.ir=null,t.emit("message",JSON.stringify([e,r]))}))}n(a,i),a.transportName="iframe-info-receiver",a.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()},e.exports=a},3616:(e,t,r)=>{"use strict";var n=r(3212).v,i=r(5717),s=r(7705),o=r(5088),a=r(6311);function c(e,t){var i=this;n.call(this);var c=function(){var r=i.ifr=new o(a.transportName,t,e);r.once("message",(function(e){if(e){var t;try{t=JSON.parse(e)}catch(e){return i.emit("finish"),void i.close()}var r=t[0],n=t[1];i.emit("finish",r,n)}i.close()})),r.once("close",(function(){i.emit("finish"),i.close()}))};r.g.document.body?c():s.attachEvent("load",c)}i(c,n),c.enabled=function(){return o.enabled()},c.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null},e.exports=c},5172:(e,t,r)=>{"use strict";var n=r(3212).v,i=r(5717),s=r(273),o=r(6073),a=r(9033),c=r(3515),h=r(7103),l=r(3616),u=r(2550);function f(e,t){var r=this;n.call(this),setTimeout((function(){r.doXhr(e,t)}),0)}i(f,n),f._getReceiver=function(e,t,r){return r.sameOrigin?new u(t,c):a.enabled?new u(t,a):o.enabled&&r.sameScheme?new u(t,o):l.enabled()?new l(e,t):new u(t,h)},f.prototype.doXhr=function(e,t){var r=this,n=s.addPath(e,"/info");this.xo=f._getReceiver(e,n,t),this.timeoutRef=setTimeout((function(){r._cleanup(!1),r.emit("finish")}),f.timeout),this.xo.once("finish",(function(e,t){r._cleanup(!0),r.emit("finish",e,t)}))},f.prototype._cleanup=function(e){clearTimeout(this.timeoutRef),this.timeoutRef=null,!e&&this.xo&&this.xo.close(),this.xo=null},f.prototype.close=function(){this.removeAllListeners(),this._cleanup(!1)},f.timeout=8e3,e.exports=f},7486:(e,t,r)=>{"use strict";e.exports=r.g.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}},3626:(e,t,r)=>{"use strict";r(1247);var n,i=r(4564),s=r(5717),o=r(8915),a=r(8028),c=r(273),h=r(7705),l=r(5581),u=r(2217),f=r(8510),d=r(4886),p=r(685),g=r(3184),b=r(7486),m=r(2530),y=r(3326),v=r(5172);function w(e,t,r){if(!(this instanceof w))return new w(e,t,r);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");g.call(this),this.readyState=w.CONNECTING,this.extensions="",this.protocol="",(r=r||{}).protocols_whitelist&&d.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=r.transports,this._transportOptions=r.transportOptions||{},this._timeout=r.timeout||0;var n=r.sessionId||8;if("function"==typeof n)this._generateSessionId=n;else{if("number"!=typeof n)throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._generateSessionId=function(){return o.string(n)}}this._server=r.server||o.numberString(1e3);var s=new i(e);if(!s.host||!s.protocol)throw new SyntaxError("The URL '"+e+"' is invalid");if(s.hash)throw new SyntaxError("The URL must not contain a fragment");if("http:"!==s.protocol&&"https:"!==s.protocol)throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+s.protocol+"' is not allowed.");var a="https:"===s.protocol;if("https:"===b.protocol&&!a&&!c.isLoopbackAddr(s.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");t?Array.isArray(t)||(t=[t]):t=[];var h=t.sort();h.forEach((function(e,t){if(!e)throw new SyntaxError("The protocols entry '"+e+"' is invalid.");if(t<h.length-1&&e===h[t+1])throw new SyntaxError("The protocols entry '"+e+"' is duplicated.")}));var l=c.getOrigin(b.href);this._origin=l?l.toLowerCase():null,s.set("pathname",s.pathname.replace(/\/+$/,"")),this.url=s.href,this.url,this._urlInfo={nullOrigin:!f.hasDomain(),sameOrigin:c.isOriginEqual(this.url,b.href),sameScheme:c.isSchemeEqual(this.url,b.href)},this._ir=new v(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}function _(e){return 1e3===e||e>=3e3&&e<=4999}s(w,g),w.prototype.close=function(e,t){if(e&&!_(e))throw new Error("InvalidAccessError: Invalid code");if(t&&t.length>123)throw new SyntaxError("reason argument has an invalid length");if(this.readyState!==w.CLOSING&&this.readyState!==w.CLOSED){this._close(e||1e3,t||"Normal closure",!0)}},w.prototype.send=function(e){if("string"!=typeof e&&(e=""+e),this.readyState===w.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===w.OPEN&&this._transport.send(a.quote(e))},w.version=r(2828),w.CONNECTING=0,w.OPEN=1,w.CLOSING=2,w.CLOSED=3,w.prototype._receiveInfo=function(e,t){if(this._ir=null,e){this._rto=this.countRTO(t),this._transUrl=e.base_url?e.base_url:this.url,e=u.extend(e,this._urlInfo);var r=n.filterToEnabled(this._transportsWhitelist,e);this._transports=r.main,this._transports.length,this._connect()}else this._close(1002,"Cannot connect to server")},w.prototype._connect=function(){for(var e=this._transports.shift();e;e=this._transports.shift()){if(e.transportName,e.needBody&&(!r.g.document.body||void 0!==r.g.document.readyState&&"complete"!==r.g.document.readyState&&"interactive"!==r.g.document.readyState))return this._transports.unshift(e),void h.attachEvent("load",this._connect.bind(this));var t=Math.max(this._timeout,this._rto*e.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),t);var n=c.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[e.transportName],s=new e(n,this._transUrl,i);return s.on("message",this._transportMessage.bind(this)),s.once("close",this._transportClose.bind(this)),s.transportName=e.transportName,void(this._transport=s)}this._close(2e3,"All transports failed",!1)},w.prototype._transportTimeout=function(){this.readyState===w.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))},w.prototype._transportMessage=function(e){var t,r=this,n=e.slice(0,1),i=e.slice(1);switch(n){case"o":return void this._open();case"h":return this.dispatchEvent(new p("heartbeat")),void this.transport}if(i)try{t=JSON.parse(i)}catch(e){}if(void 0!==t)switch(n){case"a":Array.isArray(t)&&t.forEach((function(e){r.transport,r.dispatchEvent(new y(e))}));break;case"m":this.transport,this.dispatchEvent(new y(t));break;case"c":Array.isArray(t)&&2===t.length&&this._close(t[0],t[1],!0)}},w.prototype._transportClose=function(e,t){this.transport,this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),_(e)||2e3===e||this.readyState!==w.CONNECTING?this._close(e,t):this._connect()},w.prototype._open=function(){this._transport&&this._transport.transportName,this.readyState,this.readyState===w.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=w.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new p("open")),this.transport):this._close(1006,"Server lost session")},w.prototype._close=function(e,t,r){this.transport,this.readyState;var n=!1;if(this._ir&&(n=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===w.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=w.CLOSING,setTimeout(function(){this.readyState=w.CLOSED,n&&this.dispatchEvent(new p("error"));var i=new m("close");i.wasClean=r||!1,i.code=e||1e3,i.reason=t,this.dispatchEvent(i),this.onmessage=this.onclose=this.onerror=null}.bind(this),0)},w.prototype.countRTO=function(e){return e>100?4*e:300+e},e.exports=function(e){return n=l(e),r(551)(w,e),w}},1247:()=>{"use strict";var e,t=Array.prototype,r=Object.prototype,n=Function.prototype,i=String.prototype,s=t.slice,o=r.toString,a=function(e){return"[object Function]"===r.toString.call(e)},c=function(e){return"[object String]"===o.call(e)},h=Object.defineProperty&&function(){try{return Object.defineProperty({},"x",{}),!0}catch(e){return!1}}();e=h?function(e,t,r,n){!n&&t in e||Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:!0,value:r})}:function(e,t,r,n){!n&&t in e||(e[t]=r)};var l=function(t,n,i){for(var s in n)r.hasOwnProperty.call(n,s)&&e(t,s,n[s],i)},u=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)};function f(e){var t=+e;return t!=t?t=0:0!==t&&t!==1/0&&t!==-1/0&&(t=(t>0||-1)*Math.floor(Math.abs(t))),t}function d(){}l(n,{bind:function(e){var t=this;if(!a(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var r=s.call(arguments,1),n=function(){if(this instanceof h){var n=t.apply(this,r.concat(s.call(arguments)));return Object(n)===n?n:this}return t.apply(e,r.concat(s.call(arguments)))},i=Math.max(0,t.length-r.length),o=[],c=0;c<i;c++)o.push("$"+c);var h=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(n);return t.prototype&&(d.prototype=t.prototype,h.prototype=new d,d.prototype=null),h}}),l(Array,{isArray:function(e){return"[object Array]"===o.call(e)}});var p,g,b,m=Object("a"),y="a"!==m[0]||!(0 in m);l(t,{forEach:function(e){var t=u(this),r=y&&c(this)?this.split(""):t,n=arguments[1],i=-1,s=r.length>>>0;if(!a(e))throw new TypeError;for(;++i<s;)i in r&&e.call(n,r[i],i,t)}},(p=t.forEach,g=!0,b=!0,p&&(p.call("foo",(function(e,t,r){"object"!=typeof r&&(g=!1)})),p.call([1],(function(){b="string"==typeof this}),"x")),!(p&&g&&b)));var v=Array.prototype.indexOf&&-1!==[0,1].indexOf(1,2);l(t,{indexOf:function(e){var t=y&&c(this)?this.split(""):u(this),r=t.length>>>0;if(!r)return-1;var n=0;for(arguments.length>1&&(n=f(arguments[1])),n=n>=0?n:Math.max(0,r+n);n<r;n++)if(n in t&&t[n]===e)return n;return-1}},v);var w,_=i.split;2!=="ab".split(/(?:ab)*/).length||4!==".".split(/(.?)(.?)/).length||"t"==="tesst".split(/(s)*/)[1]||4!=="test".split(/(?:)/,-1).length||"".split(/.?/).length||".".split(/()()/).length>1?(w=void 0===/()??/.exec("")[1],i.split=function(e,r){var n=this;if(void 0===e&&0===r)return[];if("[object RegExp]"!==o.call(e))return _.call(this,e,r);var i,s,a,c,h=[],l=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),u=0;for(e=new RegExp(e.source,l+"g"),n+="",w||(i=new RegExp("^"+e.source+"$(?!\\s)",l)),r=void 0===r?-1>>>0:r>>>0;(s=e.exec(n))&&!((a=s.index+s[0].length)>u&&(h.push(n.slice(u,s.index)),!w&&s.length>1&&s[0].replace(i,(function(){for(var e=1;e<arguments.length-2;e++)void 0===arguments[e]&&(s[e]=void 0)})),s.length>1&&s.index<n.length&&t.push.apply(h,s.slice(1)),c=s[0].length,u=a,h.length>=r));)e.lastIndex===s.index&&e.lastIndex++;return u===n.length?!c&&e.test("")||h.push(""):h.push(n.slice(u)),h.length>r?h.slice(0,r):h}):"0".split(void 0,0).length&&(i.split=function(e,t){return void 0===e&&0===t?[]:_.call(this,e,t)});var E=i.substr,S="".substr&&"b"!=="0b".substr(-1);l(i,{substr:function(e,t){return E.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},S)},7581:(e,t,r)=>{"use strict";e.exports=[r(2412),r(9842),r(4620),r(3004),r(882)(r(3004)),r(5616),r(882)(r(5616)),r(2387),r(9998),r(882)(r(2387)),r(5375)]},2940:(e,t,r)=>{"use strict";var n=r(3212).v,i=r(5717),s=r(7705),o=r(273),a=r.g.XMLHttpRequest;function c(e,t,r,i){var s=this;n.call(this),setTimeout((function(){s._start(e,t,r,i)}),0)}i(c,n),c.prototype._start=function(e,t,r,n){var i=this;try{this.xhr=new a}catch(e){}if(!this.xhr)return this.emit("finish",0,"no xhr support"),void this._cleanup();t=o.addQuery(t,"t="+ +new Date),this.unloadRef=s.unloadAdd((function(){i._cleanup(!0)}));try{this.xhr.open(e,t,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){i.emit("finish",0,""),i._cleanup(!1)})}catch(e){return this.emit("finish",0,""),void this._cleanup(!1)}if(n&&n.noCredentials||!c.supportsCORS||(this.xhr.withCredentials=!0),n&&n.headers)for(var h in n.headers)this.xhr.setRequestHeader(h,n.headers[h]);this.xhr.onreadystatechange=function(){if(i.xhr){var e,t,r=i.xhr;switch(r.readyState,r.readyState){case 3:try{t=r.status,e=r.responseText}catch(e){}1223===t&&(t=204),200===t&&e&&e.length>0&&i.emit("chunk",t,e);break;case 4:1223===(t=r.status)&&(t=204),12005!==t&&12029!==t||(t=0),r.responseText,i.emit("finish",t,r.responseText),i._cleanup(!1)}}};try{i.xhr.send(r)}catch(e){i.emit("finish",0,""),i._cleanup(!1)}},c.prototype._cleanup=function(e){if(this.xhr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),e)try{this.xhr.abort()}catch(e){}this.unloadRef=this.xhr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!!a;var h=["Active"].concat("Object").join("X");!c.enabled&&h in r.g&&(a=function(){try{return new r.g[h]("Microsoft.XMLHTTP")}catch(e){return null}},c.enabled=!!new a);var l=!1;try{l="withCredentials"in new a}catch(e){}c.supportsCORS=l,e.exports=c},3759:(e,t,r)=>{e.exports=r.g.EventSource},9334:(e,t,r)=>{"use strict";var n=r.g.WebSocket||r.g.MozWebSocket;e.exports=n?function(e){return new n(e)}:void 0},3004:(e,t,r)=>{"use strict";var n=r(5717),i=r(9395),s=r(6709),o=r(9033),a=r(3759);function c(e){if(!c.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/eventsource",s,o)}n(c,i),c.enabled=function(){return!!a},c.transportName="eventsource",c.roundTrips=2,e.exports=c},5616:(e,t,r)=>{"use strict";var n=r(5717),i=r(3608),s=r(3515),o=r(9395);function a(e){if(!i.enabled)throw new Error("Transport created when disabled");o.call(this,e,"/htmlfile",i,s)}n(a,o),a.enabled=function(e){return i.enabled&&e.sameOrigin},a.transportName="htmlfile",a.roundTrips=2,e.exports=a},5088:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v,s=r(2828),o=r(273),a=r(3683),c=r(7705),h=r(8915);function l(e,t,r){if(!l.enabled())throw new Error("Transport created when disabled");i.call(this);var n=this;this.origin=o.getOrigin(r),this.baseUrl=r,this.transUrl=t,this.transport=e,this.windowId=h.string(8);var s=o.addPath(r,"/iframe.html")+"#"+this.windowId;this.iframeObj=a.createIframe(s,(function(e){n.emit("close",1006,"Unable to load an iframe ("+e+")"),n.close()})),this.onmessageCallback=this._message.bind(this),c.attachEvent("message",this.onmessageCallback)}n(l,i),l.prototype.close=function(){if(this.removeAllListeners(),this.iframeObj){c.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch(e){}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}},l.prototype._message=function(e){if(e.data,!o.isOriginEqual(e.origin,this.origin))return e.origin,void this.origin;var t;try{t=JSON.parse(e.data)}catch(t){return void e.data}if(t.windowId!==this.windowId)return t.windowId,void this.windowId;switch(t.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([s,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",t.data);break;case"c":var r;try{r=JSON.parse(t.data)}catch(e){return void t.data}this.emit("close",r[0],r[1]),this.close()}},l.prototype.postMessage=function(e,t){this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:e,data:t||""}),this.origin)},l.prototype.send=function(e){this.postMessage("m",e)},l.enabled=function(){return a.iframeEnabled},l.transportName="iframe",l.roundTrips=2,e.exports=l},5375:(e,t,r)=>{"use strict";var n=r(5717),i=r(8347),s=r(514),o=r(771);function a(e){if(!a.enabled())throw new Error("Transport created when disabled");i.call(this,e,"/jsonp",o,s)}n(a,i),a.enabled=function(){return!!r.g.document},a.transportName="jsonp-polling",a.roundTrips=1,a.needBody=!0,e.exports=a},9395:(e,t,r)=>{"use strict";var n=r(5717),i=r(273),s=r(8347);function o(e,t,r,n){s.call(this,e,t,function(e){return function(t,r,n){var s={};"string"==typeof r&&(s.headers={"Content-type":"text/plain"});var o=i.addPath(t,"/xhr_send"),a=new e("POST",o,r,s);return a.once("finish",(function(e){if(a=null,200!==e&&204!==e)return n(new Error("http status "+e));n()})),function(){a.close(),a=null;var e=new Error("Aborted");e.code=1e3,n(e)}}}(n),r,n)}n(o,s),e.exports=o},1851:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v;function s(e,t){i.call(this),this.sendBuffer=[],this.sender=t,this.url=e}n(s,i),s.prototype.send=function(e){this.sendBuffer.push(e),this.sendStop||this.sendSchedule()},s.prototype.sendScheduleWait=function(){var e,t=this;this.sendStop=function(){t.sendStop=null,clearTimeout(e)},e=setTimeout((function(){t.sendStop=null,t.sendSchedule()}),25)},s.prototype.sendSchedule=function(){this.sendBuffer.length;var e=this;if(this.sendBuffer.length>0){var t="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,t,(function(t){e.sendStop=null,t?(e.emit("close",t.code||1006,"Sending error: "+t),e.close()):e.sendScheduleWait()})),this.sendBuffer=[]}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.close=function(){this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)},e.exports=s},882:(e,t,r)=>{"use strict";var n=r(5717),i=r(5088),s=r(2217);e.exports=function(e){function t(t,r){i.call(this,e.transportName,t,r)}return n(t,i),t.enabled=function(t,n){if(!r.g.document)return!1;var o=s.extend({},n);return o.sameOrigin=!0,e.enabled(o)&&i.enabled()},t.transportName="iframe-"+e.transportName,t.needBody=!0,t.roundTrips=i.roundTrips+e.roundTrips-1,t.facadeTransport=e,t}},1265:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v;function s(e,t,r){i.call(this),this.Receiver=e,this.receiveUrl=t,this.AjaxObject=r,this._scheduleReceiver()}n(s,i),s.prototype._scheduleReceiver=function(){var e=this,t=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);t.on("message",(function(t){e.emit("message",t)})),t.once("close",(function(r,n){e.pollIsClosing,e.poll=t=null,e.pollIsClosing||("network"===n?e._scheduleReceiver():(e.emit("close",r||1006,n),e.removeAllListeners()))}))},s.prototype.abort=function(){this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()},e.exports=s},8347:(e,t,r)=>{"use strict";var n=r(5717),i=r(273),s=r(1851),o=r(1265);function a(e,t,r,n,a){var c=i.addPath(e,t),h=this;s.call(this,e,r),this.poll=new o(n,c,a),this.poll.on("message",(function(e){h.emit("message",e)})),this.poll.once("close",(function(e,t){h.poll=null,h.emit("close",e,t),h.close()}))}n(a,s),a.prototype.close=function(){s.prototype.close.call(this),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)},e.exports=a},6709:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v,s=r(3759);function o(e){i.call(this);var t=this,r=this.es=new s(e);r.onmessage=function(e){e.data,t.emit("message",decodeURI(e.data))},r.onerror=function(e){r.readyState;var n=2!==r.readyState?"network":"permanent";t._cleanup(),t._close(n)}}n(o,i),o.prototype.abort=function(){this._cleanup(),this._close("user")},o.prototype._cleanup=function(){var e=this.es;e&&(e.onmessage=e.onerror=null,e.close(),this.es=null)},o.prototype._close=function(e){var t=this;setTimeout((function(){t.emit("close",null,e),t.removeAllListeners()}),200)},e.exports=o},3608:(e,t,r)=>{"use strict";var n=r(5717),i=r(3683),s=r(273),o=r(3212).v,a=r(8915);function c(e){o.call(this);var t=this;i.polluteGlobalNamespace(),this.id="a"+a.string(6),e=s.addQuery(e,"c="+decodeURIComponent(i.WPrefix+"."+this.id)),c.htmlfileEnabled;var n=c.htmlfileEnabled?i.createHtmlfile:i.createIframe;r.g[i.WPrefix][this.id]={start:function(){t.iframeObj.loaded()},message:function(e){t.emit("message",e)},stop:function(){t._cleanup(),t._close("network")}},this.iframeObj=n(e,(function(){t._cleanup(),t._close("permanent")}))}n(c,o),c.prototype.abort=function(){this._cleanup(),this._close("user")},c.prototype._cleanup=function(){this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete r.g[i.WPrefix][this.id]},c.prototype._close=function(e){this.emit("close",null,e),this.removeAllListeners()},c.htmlfileEnabled=!1;var h=["Active"].concat("Object").join("X");if(h in r.g)try{c.htmlfileEnabled=!!new r.g[h]("htmlfile")}catch(e){}c.enabled=c.htmlfileEnabled||i.iframeEnabled,e.exports=c},514:(e,t,r)=>{"use strict";var n=r(3683),i=r(8915),s=r(8510),o=r(273),a=r(5717),c=r(3212).v;function h(e){var t=this;c.call(this),n.polluteGlobalNamespace(),this.id="a"+i.string(6);var s=o.addQuery(e,"c="+encodeURIComponent(n.WPrefix+"."+this.id));r.g[n.WPrefix][this.id]=this._callback.bind(this),this._createScript(s),this.timeoutId=setTimeout((function(){t._abort(new Error("JSONP script loaded abnormally (timeout)"))}),h.timeout)}a(h,c),h.prototype.abort=function(){if(r.g[n.WPrefix][this.id]){var e=new Error("JSONP user aborted read");e.code=1e3,this._abort(e)}},h.timeout=35e3,h.scriptErrorTimeout=1e3,h.prototype._callback=function(e){this._cleanup(),this.aborting||(e&&this.emit("message",e),this.emit("close",null,"network"),this.removeAllListeners())},h.prototype._abort=function(e){this._cleanup(),this.aborting=!0,this.emit("close",e.code,e.message),this.removeAllListeners()},h.prototype._cleanup=function(){if(clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var e=this.script;e.parentNode.removeChild(e),e.onreadystatechange=e.onerror=e.onload=e.onclick=null,this.script=null}delete r.g[n.WPrefix][this.id]},h.prototype._scriptError=function(){var e=this;this.errorTimer||(this.errorTimer=setTimeout((function(){e.loadedOkay||e._abort(new Error("JSONP script loaded abnormally (onerror)"))}),h.scriptErrorTimeout))},h.prototype._createScript=function(e){var t,n=this,o=this.script=r.g.document.createElement("script");if(o.id="a"+i.string(8),o.src=e,o.type="text/javascript",o.charset="UTF-8",o.onerror=this._scriptError.bind(this),o.onload=function(){n._abort(new Error("JSONP script loaded abnormally (onload)"))},o.onreadystatechange=function(){if(o.readyState,/loaded|closed/.test(o.readyState)){if(o&&o.htmlFor&&o.onclick){n.loadedOkay=!0;try{o.onclick()}catch(e){}}o&&n._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},void 0===o.async&&r.g.document.attachEvent)if(s.isOpera())(t=this.script2=r.g.document.createElement("script")).text="try{var a = document.getElementById('"+o.id+"'); if(a)a.onerror();}catch(x){};",o.async=t.async=!1;else{try{o.htmlFor=o.id,o.event="onclick"}catch(e){}o.async=!0}void 0!==o.async&&(o.async=!0);var a=r.g.document.getElementsByTagName("head")[0];a.insertBefore(o,a.firstChild),t&&a.insertBefore(t,a.firstChild)},e.exports=h},1044:(e,t,r)=>{"use strict";var n=r(5717),i=r(3212).v;function s(e,t){i.call(this);var r=this;this.bufferPosition=0,this.xo=new t("POST",e,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",(function(e,t){r._chunkHandler(e,t),r.xo=null;var n=200===e?"network":"permanent";r.emit("close",null,n),r._cleanup()}))}n(s,i),s.prototype._chunkHandler=function(e,t){if(200===e&&t)for(var r=-1;;this.bufferPosition+=r+1){var n=t.slice(this.bufferPosition);if(-1===(r=n.indexOf("\n")))break;var i=n.slice(0,r);i&&this.emit("message",i)}},s.prototype._cleanup=function(){this.removeAllListeners()},s.prototype.abort=function(){this.xo&&(this.xo.close(),this.emit("close",null,"user"),this.xo=null),this._cleanup()},e.exports=s},771:(e,t,r)=>{"use strict";var n,i,s=r(8915),o=r(273);e.exports=function(e,t,a){n||((n=r.g.document.createElement("form")).style.display="none",n.style.position="absolute",n.method="POST",n.enctype="application/x-www-form-urlencoded",n.acceptCharset="UTF-8",(i=r.g.document.createElement("textarea")).name="d",n.appendChild(i),r.g.document.body.appendChild(n));var c="a"+s.string(8);n.target=c,n.action=o.addQuery(o.addPath(e,"/jsonp_send"),"i="+c);var h=function(e){try{return r.g.document.createElement('<iframe name="'+e+'">')}catch(n){var t=r.g.document.createElement("iframe");return t.name=e,t}}(c);h.id=c,h.style.display="none",n.appendChild(h);try{i.value=t}catch(e){}n.submit();var l=function(e){h.onerror&&(h.onreadystatechange=h.onerror=h.onload=null,setTimeout((function(){h.parentNode.removeChild(h),h=null}),500),i.value="",a(e))};return h.onerror=function(){l()},h.onload=function(){l()},h.onreadystatechange=function(e){h.readyState,"complete"===h.readyState&&l()},function(){l(new Error("Aborted"))}}},6073:(e,t,r)=>{"use strict";var n=r(3212).v,i=r(5717),s=r(7705),o=r(8510),a=r(273);function c(e,t,r){var i=this;n.call(this),setTimeout((function(){i._start(e,t,r)}),0)}i(c,n),c.prototype._start=function(e,t,n){var i=this,o=new r.g.XDomainRequest;t=a.addQuery(t,"t="+ +new Date),o.onerror=function(){i._error()},o.ontimeout=function(){i._error()},o.onprogress=function(){o.responseText,i.emit("chunk",200,o.responseText)},o.onload=function(){i.emit("finish",200,o.responseText),i._cleanup(!1)},this.xdr=o,this.unloadRef=s.unloadAdd((function(){i._cleanup(!0)}));try{this.xdr.open(e,t),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(n)}catch(e){this._error()}},c.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)},c.prototype._cleanup=function(e){if(this.xdr){if(this.removeAllListeners(),s.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,e)try{this.xdr.abort()}catch(e){}this.unloadRef=this.xdr=null}},c.prototype.close=function(){this._cleanup(!0)},c.enabled=!(!r.g.XDomainRequest||!o.hasDomain()),e.exports=c},9033:(e,t,r)=>{"use strict";var n=r(5717),i=r(2940);function s(e,t,r,n){i.call(this,e,t,r,n)}n(s,i),s.enabled=i.enabled&&i.supportsCORS,e.exports=s},7103:(e,t,r)=>{"use strict";var n=r(3212).v;function i(){var e=this;n.call(this),this.to=setTimeout((function(){e.emit("finish",200,"{}")}),i.timeout)}r(5717)(i,n),i.prototype.close=function(){clearTimeout(this.to)},i.timeout=2e3,e.exports=i},3515:(e,t,r)=>{"use strict";var n=r(5717),i=r(2940);function s(e,t,r){i.call(this,e,t,r,{noCredentials:!0})}n(s,i),s.enabled=i.enabled,e.exports=s},2412:(e,t,r)=>{"use strict";var n=r(7705),i=r(273),s=r(5717),o=r(3212).v,a=r(9334);function c(e,t,r){if(!c.enabled())throw new Error("Transport created when disabled");o.call(this);var s=this,h=i.addPath(e,"/websocket");h="https"===h.slice(0,5)?"wss"+h.slice(5):"ws"+h.slice(4),this.url=h,this.ws=new a(this.url,[],r),this.ws.onmessage=function(e){e.data,s.emit("message",e.data)},this.unloadRef=n.unloadAdd((function(){s.ws.close()})),this.ws.onclose=function(e){e.code,e.reason,s.emit("close",e.code,e.reason),s._cleanup()},this.ws.onerror=function(e){s.emit("close",1006,"WebSocket connection broken"),s._cleanup()}}s(c,o),c.prototype.send=function(e){var t="["+e+"]";this.ws.send(t)},c.prototype.close=function(){var e=this.ws;this._cleanup(),e&&e.close()},c.prototype._cleanup=function(){var e=this.ws;e&&(e.onmessage=e.onclose=e.onerror=null),n.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()},c.enabled=function(){return!!a},c.transportName="websocket",c.roundTrips=2,e.exports=c},9998:(e,t,r)=>{"use strict";var n=r(5717),i=r(9395),s=r(4620),o=r(1044),a=r(6073);function c(e){if(!a.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",o,a)}n(c,i),c.enabled=s.enabled,c.transportName="xdr-polling",c.roundTrips=2,e.exports=c},4620:(e,t,r)=>{"use strict";var n=r(5717),i=r(9395),s=r(1044),o=r(6073);function a(e){if(!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,o)}n(a,i),a.enabled=function(e){return!e.cookie_needed&&!e.nullOrigin&&(o.enabled&&e.sameScheme)},a.transportName="xdr-streaming",a.roundTrips=2,e.exports=a},2387:(e,t,r)=>{"use strict";var n=r(5717),i=r(9395),s=r(1044),o=r(9033),a=r(3515);function c(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr",s,o)}n(c,i),c.enabled=function(e){return!e.nullOrigin&&(!(!a.enabled||!e.sameOrigin)||o.enabled)},c.transportName="xhr-polling",c.roundTrips=2,e.exports=c},9842:(e,t,r)=>{"use strict";var n=r(5717),i=r(9395),s=r(1044),o=r(9033),a=r(3515),c=r(8510);function h(e){if(!a.enabled&&!o.enabled)throw new Error("Transport created when disabled");i.call(this,e,"/xhr_streaming",s,o)}n(h,i),h.enabled=function(e){return!e.nullOrigin&&(!c.isOpera()&&o.enabled)},h.transportName="xhr-streaming",h.roundTrips=2,h.needBody=!!r.g.document,e.exports=h},2017:(e,t,r)=>{"use strict";r.g.crypto&&r.g.crypto.getRandomValues?e.exports.randomBytes=function(e){var t=new Uint8Array(e);return r.g.crypto.getRandomValues(t),t}:e.exports.randomBytes=function(e){for(var t=new Array(e),r=0;r<e;r++)t[r]=Math.floor(256*Math.random());return t}},8510:(e,t,r)=>{"use strict";e.exports={isOpera:function(){return r.g.navigator&&/opera/i.test(r.g.navigator.userAgent)},isKonqueror:function(){return r.g.navigator&&/konqueror/i.test(r.g.navigator.userAgent)},hasDomain:function(){if(!r.g.document)return!0;try{return!!r.g.document.domain}catch(e){return!1}}}},8028:e=>{"use strict";var t,r=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g;e.exports={quote:function(e){var n=JSON.stringify(e);return r.lastIndex=0,r.test(n)?(t||(t=function(e){var t,r={},n=[];for(t=0;t<65536;t++)n.push(String.fromCharCode(t));return e.lastIndex=0,n.join("").replace(e,(function(e){return r[e]="\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4),""})),e.lastIndex=0,r}(r)),n.replace(r,(function(e){return t[e]}))):n}}},7705:(e,t,r)=>{"use strict";var n=r(8915),i={},s=!1,o=r.g.chrome&&r.g.chrome.app&&r.g.chrome.app.runtime;e.exports={attachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.addEventListener(e,t,!1):r.g.document&&r.g.attachEvent&&(r.g.document.attachEvent("on"+e,t),r.g.attachEvent("on"+e,t))},detachEvent:function(e,t){void 0!==r.g.addEventListener?r.g.removeEventListener(e,t,!1):r.g.document&&r.g.detachEvent&&(r.g.document.detachEvent("on"+e,t),r.g.detachEvent("on"+e,t))},unloadAdd:function(e){if(o)return null;var t=n.string(8);return i[t]=e,s&&setTimeout(this.triggerUnloadCallbacks,0),t},unloadDel:function(e){e in i&&delete i[e]},triggerUnloadCallbacks:function(){for(var e in i)i[e](),delete i[e]}};o||e.exports.attachEvent("unload",(function(){s||(s=!0,e.exports.triggerUnloadCallbacks())}))},3683:(e,t,r)=>{"use strict";var n=r(7705),i=r(8510);e.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){e.exports.WPrefix in r.g||(r.g[e.exports.WPrefix]={})},postMessage:function(t,n){r.g.parent!==r.g&&r.g.parent.postMessage(JSON.stringify({windowId:e.exports.currentWindowId,type:t,data:n||""}),"*")},createIframe:function(e,t){var i,s,o=r.g.document.createElement("iframe"),a=function(){clearTimeout(i);try{o.onload=null}catch(e){}o.onerror=null},c=function(){o&&(a(),setTimeout((function(){o&&o.parentNode.removeChild(o),o=null}),0),n.unloadDel(s))},h=function(e){o&&(c(),t(e))};return o.src=e,o.style.display="none",o.style.position="absolute",o.onerror=function(){h("onerror")},o.onload=function(){clearTimeout(i),i=setTimeout((function(){h("onload timeout")}),2e3)},r.g.document.body.appendChild(o),i=setTimeout((function(){h("timeout")}),15e3),s=n.unloadAdd(c),{post:function(e,t){setTimeout((function(){try{o&&o.contentWindow&&o.contentWindow.postMessage(e,t)}catch(e){}}),0)},cleanup:c,loaded:a}},createHtmlfile:function(t,i){var s,o,a,c=["Active"].concat("Object").join("X"),h=new r.g[c]("htmlfile"),l=function(){clearTimeout(s),a.onerror=null},u=function(){h&&(l(),n.unloadDel(o),a.parentNode.removeChild(a),a=h=null,CollectGarbage())},f=function(e){h&&(u(),i(e))};h.open(),h.write('<html><script>document.domain="'+r.g.document.domain+'";<\/script></html>'),h.close(),h.parentWindow[e.exports.WPrefix]=r.g[e.exports.WPrefix];var d=h.createElement("div");return h.body.appendChild(d),a=h.createElement("iframe"),d.appendChild(a),a.src=t,a.onerror=function(){f("onerror")},s=setTimeout((function(){f("timeout")}),15e3),o=n.unloadAdd(u),{post:function(e,t){try{setTimeout((function(){a&&a.contentWindow&&a.contentWindow.postMessage(e,t)}),0)}catch(e){}},cleanup:u,loaded:l}}},e.exports.iframeEnabled=!1,r.g.document&&(e.exports.iframeEnabled=("function"==typeof r.g.postMessage||"object"==typeof r.g.postMessage)&&!i.isKonqueror())},4886:(e,t,r)=>{"use strict";var n={};["log","debug","warn"].forEach((function(e){var t;try{t=r.g.console&&r.g.console[e]&&r.g.console[e].apply}catch(e){}n[e]=t?function(){return r.g.console[e].apply(r.g.console,arguments)}:"log"===e?function(){}:n.log})),e.exports=n},2217:e=>{"use strict";e.exports={isObject:function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},extend:function(e){if(!this.isObject(e))return e;for(var t,r,n=1,i=arguments.length;n<i;n++)for(r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}}},8915:(e,t,r)=>{"use strict";var n=r(2017),i="abcdefghijklmnopqrstuvwxyz012345";e.exports={string:function(e){for(var t=i.length,r=n.randomBytes(e),s=[],o=0;o<e;o++)s.push(i.substr(r[o]%t,1));return s.join("")},number:function(e){return Math.floor(Math.random()*e)},numberString:function(e){var t=(""+(e-1)).length;return(new Array(t+1).join("0")+this.number(e)).slice(-t)}}},5581:e=>{"use strict";e.exports=function(e){return{filterToEnabled:function(t,r){var n={main:[],facade:[]};return t?"string"==typeof t&&(t=[t]):t=[],e.forEach((function(e){e&&("websocket"===e.transportName&&!1===r.websocket||(t.length&&-1===t.indexOf(e.transportName)?e.transportName:e.enabled(r)?(e.transportName,n.main.push(e),e.facadeTransport&&n.facade.push(e.facadeTransport)):e.transportName))})),n}}}},273:(e,t,r)=>{"use strict";var n=r(4564);e.exports={getOrigin:function(e){if(!e)return null;var t=new n(e);if("file:"===t.protocol)return null;var r=t.port;return r||(r="https:"===t.protocol?"443":"80"),t.protocol+"//"+t.hostname+":"+r},isOriginEqual:function(e,t){var r=this.getOrigin(e)===this.getOrigin(t);return r},isSchemeEqual:function(e,t){return e.split(":")[0]===t.split(":")[0]},addPath:function(e,t){var r=e.split("?");return r[0]+t+(r[1]?"?"+r[1]:"")},addQuery:function(e,t){return e+(-1===e.indexOf("?")?"?"+t:"&"+t)},isLoopbackAddr:function(e){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(e)||/^\[::1\]$/.test(e)}}},2828:e=>{e.exports="1.6.1"},4564:(e,t,r)=>{"use strict";var n=r(7418),i=r(7129),s=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,h=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,l=/^[a-zA-Z]:/;function u(e){return(e||"").toString().replace(s,"")}var f=[["#","hash"],["?","query"],function(e,t){return g(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],d={hash:1,query:1};function p(e){var t,n=("undefined"!=typeof window?window:void 0!==r.g?r.g:"undefined"!=typeof self?self:{}).location||{},i={},s=typeof(e=e||n);if("blob:"===e.protocol)i=new m(unescape(e.pathname),{});else if("string"===s)for(t in i=new m(e,{}),d)delete i[t];else if("object"===s){for(t in e)t in d||(i[t]=e[t]);void 0===i.slashes&&(i.slashes=a.test(e.href))}return i}function g(e){return"file:"===e||"ftp:"===e||"http:"===e||"https:"===e||"ws:"===e||"wss:"===e}function b(e,t){e=(e=u(e)).replace(o,""),t=t||{};var r,n=h.exec(e),i=n[1]?n[1].toLowerCase():"",s=!!n[2],a=!!n[3],c=0;return s?a?(r=n[2]+n[3]+n[4],c=n[2].length+n[3].length):(r=n[2]+n[4],c=n[2].length):a?(r=n[3]+n[4],c=n[3].length):r=n[4],"file:"===i?c>=2&&(r=r.slice(2)):g(i)?r=n[4]:i?s&&(r=r.slice(2)):c>=2&&g(t.protocol)&&(r=n[4]),{protocol:i,slashes:s||g(i),slashesCount:c,rest:r}}function m(e,t,r){if(e=(e=u(e)).replace(o,""),!(this instanceof m))return new m(e,t,r);var s,a,c,h,d,y,v=f.slice(),w=typeof t,_=this,E=0;for("object"!==w&&"string"!==w&&(r=t,t=null),r&&"function"!=typeof r&&(r=i.parse),s=!(a=b(e||"",t=p(t))).protocol&&!a.slashes,_.slashes=a.slashes||s&&t.slashes,_.protocol=a.protocol||t.protocol||"",e=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||l.test(e))||!a.slashes&&(a.protocol||a.slashesCount<2||!g(_.protocol)))&&(v[3]=[/(.*)/,"pathname"]);E<v.length;E++)"function"!=typeof(h=v[E])?(c=h[0],y=h[1],c!=c?_[y]=e:"string"==typeof c?~(d="@"===c?e.lastIndexOf(c):e.indexOf(c))&&("number"==typeof h[2]?(_[y]=e.slice(0,d),e=e.slice(d+h[2])):(_[y]=e.slice(d),e=e.slice(0,d))):(d=c.exec(e))&&(_[y]=d[1],e=e.slice(0,d.index)),_[y]=_[y]||s&&h[3]&&t[y]||"",h[4]&&(_[y]=_[y].toLowerCase())):e=h(e,_);r&&(_.query=r(_.query)),s&&t.slashes&&"/"!==_.pathname.charAt(0)&&(""!==_.pathname||""!==t.pathname)&&(_.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,i=r[n-1],s=!1,o=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),o++):o&&(0===n&&(s=!0),r.splice(n,1),o--);return s&&r.unshift(""),"."!==i&&".."!==i||r.push(""),r.join("/")}(_.pathname,t.pathname)),"/"!==_.pathname.charAt(0)&&g(_.protocol)&&(_.pathname="/"+_.pathname),n(_.port,_.protocol)||(_.host=_.hostname,_.port=""),_.username=_.password="",_.auth&&(~(d=_.auth.indexOf(":"))?(_.username=_.auth.slice(0,d),_.username=encodeURIComponent(decodeURIComponent(_.username)),_.password=_.auth.slice(d+1),_.password=encodeURIComponent(decodeURIComponent(_.password))):_.username=encodeURIComponent(decodeURIComponent(_.auth)),_.auth=_.password?_.username+":"+_.password:_.username),_.origin="file:"!==_.protocol&&g(_.protocol)&&_.host?_.protocol+"//"+_.host:"null",_.href=_.toString()}m.prototype={set:function(e,t,r){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||i.parse)(t)),s[e]=t;break;case"port":s[e]=t,n(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,c.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!r;break;case"pathname":case"hash":if(t){var o="pathname"===e?"/":"#";s[e]=t.charAt(0)!==o?o+t:t}else s[e]=t;break;case"username":case"password":s[e]=encodeURIComponent(t);break;case"auth":var a=t.indexOf(":");~a?(s.username=t.slice(0,a),s.username=encodeURIComponent(decodeURIComponent(s.username)),s.password=t.slice(a+1),s.password=encodeURIComponent(decodeURIComponent(s.password))):s.username=encodeURIComponent(decodeURIComponent(t))}for(var h=0;h<f.length;h++){var l=f[h];l[4]&&(s[l[1]]=s[l[1]].toLowerCase())}return s.auth=s.password?s.username+":"+s.password:s.username,s.origin="file:"!==s.protocol&&g(s.protocol)&&s.host?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=i.stringify);var t,r=this,n=r.host,s=r.protocol;s&&":"!==s.charAt(s.length-1)&&(s+=":");var o=s+(r.protocol&&r.slashes||g(r.protocol)?"//":"");return r.username?(o+=r.username,r.password&&(o+=":"+r.password),o+="@"):r.password?(o+=":"+r.password,o+="@"):"file:"!==r.protocol&&g(r.protocol)&&!n&&"/"!==r.pathname&&(o+="@"),(":"===n[n.length-1]||c.test(r.hostname)&&!r.port)&&(n+=":"),o+=n+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(o+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(o+=r.hash),o}},m.extractProtocol=b,m.location=p,m.trimLeft=u,m.qs=i,e.exports=m}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(s.exports,s,s.exports,r),s.loaded=!0,s.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var t=r(2307),n=r.n(t),i=r(7644),s=r.n(i);const o="lastCheckin",a="keyPair",c="cloudId",h="secretLength",l="globalSettings";class u{static get browserRuntime(){return CHANNEL_SERVICE_CONFIG.browserEngine}static get KEY_LAST_CHECKIN(){return o}static get KEY_KEY_PAIR(){return a}static get KEY_CLOUD_ID(){return c}static save(e,t){return new Promise(((r,n)=>{const i={};i[e]=t,this.browserRuntime.storage.local.set(i,(()=>{u.checkError(),r()}))}))}static find(e){return new Promise((t=>{this.browserRuntime.storage.local.get(e,(r=>{u.checkError(),t(r[e])}))}))}static checkError(){if(this.browserRuntime.runtime.lastError)throw{name:"StorageApi",message:this.browserRuntime.runtime.lastError}}static cleanStorage(){this.browserRuntime.storage.local.clear()}}class f{static createKeyPair(){return new Promise((function(e,t){forge.rsa.generateKeyPair({bits:2048,workers:-1,workerScript:"/dist/forge-bower/prime.worker.js"},(function(r,n){r?t(r):e(n)}))}))}static generateKeys(e){return{publicKey:this.generateFromPem(e.publicKey),privateKey:this.generateFromPem(e.privateKey)}}static generatePem(e){if(e.hasOwnProperty("encrypt"))return forge.pki.publicKeyToPem(e);if(e.hasOwnProperty("decrypt"))return forge.pki.privateKeyToPem(e);throw new Error("Not a valid key object")}static generateFromPem(e){if(null!=e.match(/PUBLIC KEY/g))return forge.pki.publicKeyFromPem(e);if(null!=e.match(/PRIVATE KEY/g))return forge.pki.privateKeyFromPem(e);throw new Error("Invalid pem file format")}static trimPem(e){let t=(e=e.replace(/(\r\n|\n|\r)/gm,"")).match(/-+(.+?)-+/g);return e.substring(t[0].length,e.length-t[1].length)}static keyToString(e){return this.trimPem(this.generatePem(e))}static signMessage(e,t){let r=forge.md.sha256.create();return r.update(e,"utf8"),forge.util.encode64(t.sign(r))}static sha256Hash(e){let t=forge.md.sha256.create();return t.update(e,"utf8"),t.digest().toHex()}static decryptMessage(e,t){let r=forge.util.decode64(e);return t.decrypt(r)}static encryptMessage(e,t){return forge.util.encode64(t.encrypt(e))}static hybridDecryptMessage(e,t){let r=forge.util.decode64(e),n=forge.cipher.createDecipher("AES-CBC",t);return n.start({iv:r.substring(0,16)}),n.update(forge.util.createBuffer(r.substring(16,r.length))),n.finish(),n.output.toString()}static hybridEncryptMessage(e,t){let r=forge.random.getBytesSync(16),n=forge.cipher.createCipher("AES-CBC",t);return n.start({iv:r}),n.update(forge.util.createBuffer(e)),n.finish(),forge.util.encode64(r+n.output.data)}}var d="undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof self&&self||void 0!==d&&d,p="URLSearchParams"in d,g="Symbol"in d&&"iterator"in Symbol,b="FileReader"in d&&"Blob"in d&&function(){try{return new Blob,!0}catch(e){return!1}}(),m="FormData"in d,y="ArrayBuffer"in d;if(y)var v=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],w=ArrayBuffer.isView||function(e){return e&&v.indexOf(Object.prototype.toString.call(e))>-1};function _(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(e)||""===e)throw new TypeError('Invalid character in header field name: "'+e+'"');return e.toLowerCase()}function E(e){return"string"!=typeof e&&(e=String(e)),e}function S(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return g&&(t[Symbol.iterator]=function(){return t}),t}function I(e){this.map={},e instanceof I?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function T(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function x(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function C(e){var t=new FileReader,r=x(t);return t.readAsArrayBuffer(e),r}function A(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function O(){return this.bodyUsed=!1,this._initBody=function(e){var t;this.bodyUsed=this.bodyUsed,this._bodyInit=e,e?"string"==typeof e?this._bodyText=e:b&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:m&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:p&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():y&&b&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=A(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):y&&(ArrayBuffer.prototype.isPrototypeOf(e)||w(e))?this._bodyArrayBuffer=A(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):p&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},b&&(this.blob=function(){var e=T(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var e=T(this);return e||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}return this.blob().then(C)}),this.text=function(){var e,t,r,n=T(this);if(n)return n;if(this._bodyBlob)return e=this._bodyBlob,t=new FileReader,r=x(t),t.readAsText(e),r;if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},m&&(this.formData=function(){return this.text().then(N)}),this.json=function(){return this.text().then(JSON.parse)},this}I.prototype.append=function(e,t){e=_(e),t=E(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},I.prototype.delete=function(e){delete this.map[_(e)]},I.prototype.get=function(e){return e=_(e),this.has(e)?this.map[e]:null},I.prototype.has=function(e){return this.map.hasOwnProperty(_(e))},I.prototype.set=function(e,t){this.map[_(e)]=E(t)},I.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},I.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),S(e)},I.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),S(e)},I.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),S(e)},g&&(I.prototype[Symbol.iterator]=I.prototype.entries);var k=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function L(e,t){if(!(this instanceof L))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');var r,n,i=(t=t||{}).body;if(e instanceof L){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new I(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,i||null==e._bodyInit||(i=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new I(t.headers)),this.method=(r=t.method||this.method||"GET",n=r.toUpperCase(),k.indexOf(n)>-1?n:r),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(i),!("GET"!==this.method&&"HEAD"!==this.method||"no-store"!==t.cache&&"no-cache"!==t.cache)){var s=/([?&])_=[^&]*/;if(s.test(this.url))this.url=this.url.replace(s,"$1_="+(new Date).getTime());else{this.url+=(/\?/.test(this.url)?"&":"?")+"_="+(new Date).getTime()}}}function N(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function R(e,t){if(!(this instanceof R))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText=void 0===t.statusText?"":""+t.statusText,this.headers=new I(t.headers),this.url=t.url||"",this._initBody(e)}L.prototype.clone=function(){return new L(this,{body:this._bodyInit})},O.call(L.prototype),O.call(R.prototype),R.prototype.clone=function(){return new R(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new I(this.headers),url:this.url})},R.error=function(){var e=new R(null,{status:0,statusText:""});return e.type="error",e};var U=[301,302,303,307,308];R.redirect=function(e,t){if(-1===U.indexOf(t))throw new RangeError("Invalid status code");return new R(null,{status:t,headers:{location:e}})};var P,B=d.DOMException;try{new B}catch(e){(B=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack}).prototype=Object.create(Error.prototype),B.prototype.constructor=B}function F(e,t){return new Promise((function(r,n){var i=new L(e,t);if(i.signal&&i.signal.aborted)return n(new B("Aborted","AbortError"));var s=new XMLHttpRequest;function o(){s.abort()}s.onload=function(){var e,t,n={status:s.status,statusText:s.statusText,headers:(e=s.getAllResponseHeaders()||"",t=new I,e.replace(/\r?\n[\t ]+/g," ").split("\r").map((function(e){return 0===e.indexOf("\n")?e.substr(1,e.length):e})).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;setTimeout((function(){r(new R(i,n))}),0)},s.onerror=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.ontimeout=function(){setTimeout((function(){n(new TypeError("Network request failed"))}),0)},s.onabort=function(){setTimeout((function(){n(new B("Aborted","AbortError"))}),0)},s.open(i.method,function(e){try{return""===e&&d.location.href?d.location.href:e}catch(t){return e}}(i.url),!0),"include"===i.credentials?s.withCredentials=!0:"omit"===i.credentials&&(s.withCredentials=!1),"responseType"in s&&(b?s.responseType="blob":y&&i.headers.get("Content-Type")&&-1!==i.headers.get("Content-Type").indexOf("application/octet-stream")&&(s.responseType="arraybuffer")),!t||"object"!=typeof t.headers||t.headers instanceof I?i.headers.forEach((function(e,t){s.setRequestHeader(t,e)})):Object.getOwnPropertyNames(t.headers).forEach((function(e){s.setRequestHeader(e,E(t.headers[e]))})),i.signal&&(i.signal.addEventListener("abort",o),s.onreadystatechange=function(){4===s.readyState&&i.signal.removeEventListener("abort",o)}),s.send(void 0===i._bodyInit?null:i._bodyInit)}))}F.polyfill=!0,d.fetch||(d.fetch=F,d.Headers=I,d.Request=L,d.Response=R);var j=new Uint8Array(16);function M(){if(!P&&!(P="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return P(j)}const D=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const q=function(e){return"string"==typeof e&&D.test(e)};for(var G=[],V=0;V<256;++V)G.push((V+256).toString(16).substr(1));const $=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]).toLowerCase();if(!q(r))throw TypeError("Stringified UUID is invalid");return r};var H,z,W=0,K=0;const J=function(e,t,r){var n=t&&r||0,i=t||new Array(16),s=(e=e||{}).node||H,o=void 0!==e.clockseq?e.clockseq:z;if(null==s||null==o){var a=e.random||(e.rng||M)();null==s&&(s=H=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==o&&(o=z=16383&(a[6]<<8|a[7]))}var c=void 0!==e.msecs?e.msecs:Date.now(),h=void 0!==e.nsecs?e.nsecs:K+1,l=c-W+(h-K)/1e4;if(l<0&&void 0===e.clockseq&&(o=o+1&16383),(l<0||c>W)&&void 0===e.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");W=c,K=h,z=o;var u=(1e4*(268435455&(c+=122192928e5))+h)%4294967296;i[n++]=u>>>24&255,i[n++]=u>>>16&255,i[n++]=u>>>8&255,i[n++]=255&u;var f=c/4294967296*1e4&268435455;i[n++]=f>>>8&255,i[n++]=255&f,i[n++]=f>>>24&15|16,i[n++]=f>>>16&255,i[n++]=o>>>8|128,i[n++]=255&o;for(var d=0;d<6;++d)i[n+d]=s[d];return t||$(i)};String.prototype.reverse||(String.prototype.reverse=function(){this.split("").reverse().join("")});class X{constructor(){this.id=(new Date).valueOf(),this.name="",this.login_url="",this.site_url="",this.username=new Z("","Username","username"),this.password=new Z("","Password","password"),this.autofill_type=oe,this.automatic_sign_in=!1,this.remember_me=!1,this.user_tags=["general"],this.form_type="",this.recordId=ie,this.status=""}score(){return function(e=""){const t={password:e,raw:{upperCaseCount:0,lowerCaseCount:0,consAlphaUC:0,consAlphaLC:0,numberCount:0,consNumber:0,symbolCount:0,consSymbol:0,midChar:0},score:{rating:"",className:"",percentage:0,total:0,isWeak:!0}};t.raw.length=e.length,t.score.length=4*t.raw.length,t.score.total+=t.score.length;const r=e.replace(/\s+/g,"").split(/\s*/),n={alphaUC:"",alphaLC:"",number:"0",symbol:"0"};for(let e=0;e<r.length;e++)r[e].match(/[A-Z]/g)?(""!==n.alphaUC&&n.alphaUC+1==e&&t.raw.consAlphaUC++,n.alphaUC=e,t.raw.upperCaseCount++):r[e].match(/[a-z]/g)?(""!==n.alphaLC&&n.alphaLC+1==e&&t.raw.consAlphaLC++,n.alphaLC=e,t.raw.lowerCaseCount++):r[e].match(/[0-9]/g)?(e>0&&e<r.length-1&&t.raw.midChar++,""!==n.number&&n.number+1==e&&t.raw.consNumber++,n.number=e,t.raw.numberCount++):r[e].match(/[^a-zA-Z0-9_]/g)&&(e>0&&e<r.length-1&&t.raw.midChar++,""!==n.symbol&&n.symbol+1==e&&t.raw.consSymbol++,n.symbol=e,t.raw.symbolCount++);const{upperCaseCount:i}=t.raw;i>0&&i<e.length&&(t.score.total+=2*(e.length-i));const{lowerCaseCount:s}=t.raw;s>0&&s<e.length&&(t.score.total+=2*(e.length-s));const{numberCount:o}=t.raw;o>0&&o<e.length&&(t.score.total+=4*o);const{symbolCount:a}=t.raw;a>0&&(t.score.total+=6*a),t.raw.midChar>0&&(t.score.total+=2*t.raw.midChar),(s>0||i>0)&&0===a&&0===o&&(t.score.total=t.score.total-e.length),0===s&&0===i&&0===a&&o>0&&(t.score.total=t.score.total-e.length);const c=function(e){const t=e.split("");let r=!1,n=0,i=0;for(let e=0;e<t.length;e++){r=!1;for(let n=0;n<t.length;n++)t[e]==t[n]&&e!==n&&(r=!0,i+=Math.abs(t.length/(n-e)));if(r){n++;const e=t.length-n;i=e?Math.ceil(i/e):Math.ceil(i)}}return{raw:n,score:i}}(e);t.raw.repeatCharacters=c.raw,t.score.repeatCharacters=c.score,t.score.total-=c.score,t.raw.consAlphaLC>0&&(t.score.total-=2*t.raw.consAlphaLC),t.raw.consAlphaUC>0&&(t.score.total-=2*t.raw.consAlphaUC),t.raw.consNumber>0&&(t.score.total-=2*t.raw.consNumber);let h=l("abcdefghijklmnopqrstuvwxyz",23);return h>0&&(t.score.total=t.score.total-3*h),h=l("01234567890",8),h>0&&(t.score.total=t.score.total-3*h),h=l(")!@#$%^&*()",8),h>0&&(t.score.total=t.score.total-3*h),t.score.total<=20?t.score.rating="Very Weak":t.score.total<=40?t.score.rating="Weak":t.score.total<=60?t.score.rating="Average":t.score.total<=80?t.score.rating="Strong":t.score.rating="Very Strong",t.score.percentage=Math.min(Math.max(t.score.total,0),100),t.score.className=t.score.rating.toLowerCase().replace(" ","-"),t.score.isWeak=t.score.total<40,t;function l(t,r){let n=0;for(let i=0;i<r;i++){const r=t.substring(i,parseInt(i+3)),s=r.reverse();-1===e.toLowerCase().indexOf(r)&&-1===e.toLowerCase().indexOf(s)||n++}return n}}(this.password.value).score}static fixSiteUrl(e){return e.startsWith("http")?e:"https://"+e}wrapSecret(){let e={name:this.name,site_url:X.fixSiteUrl(this.site_url),login_url:this.login_url,username:this.username,password:this.password,automatic_sign_in:this.automatic_sign_in,autofill_type:this.autofill_type,remember_me:this.remember_me,user_tags:this.user_tags};return{classType:ae,value:(t=JSON.stringify(e),btoa(unescape(encodeURIComponent(t))))};var t}equals(e){let t=!1;if(this.user_tags===e.user_tags)t=!0;else if(Array.isArray(this.user_tags)&&Array.isArray(e.user_tags)&&this.user_tags.length===e.user_tags.length){let r=this.user_tags.sort(),n=e.user_tags.sort();t=r.every(((e,t)=>n[t]===e))}return this.name===e.name&&this.site_url===e.site_url&&this.username.equals(e.username)&&this.password.equals(e.password)&&this.autofill_type===e.autofill_type&&this.automatic_sign_in===e.automatic_sign_in&&this.remember_me===e.remember_me&&t&&this.recordId===e.recordId}updateAutomaticSignIn(e){this.recordId===ie&&(this.automatic_sign_in=e.automatic_sign_in||!1)}static createNewInstance(e){let t=(e,r)=>{let n=Object.getOwnPropertyNames(e),i=Object.getOwnPropertyNames(r);if(i.every((e=>n.includes(e)))&&e.user_tags&&!Array.isArray(e.user_tags))throw new Error("the source is not a Secret object");return i.forEach((n=>{"object"!=typeof e[n]||null===e[n]||Array.isArray(e[n])?Array.isArray(e[n])?r[n]=JSON.parse(JSON.stringify(e[n])):r[n]=e[n]:r[n]=t(e[n],new Z)})),r};return t(e,new X)}static createNewInstanceArray(e){return e.map((e=>this.createNewInstance(e)))}}class Z{constructor(e,t,r){this.value=e,this.label=t,this.field_name=r}equals(e){return this.value===e.value&&this.label===e.label&&this.field_name===e.field_name}}const Y="ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|be|bf|bg|bh|bi|bj|bm|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|cl|cm|cn|co|cr|cu|cv|cw|cx|cz|de|dj|dk|dm|do|dz|ec|ee|eg|es|et|eu|fi|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|im|in|io|iq|ir|is|it|je|jo|jp|kg|ki|km|kn|kp|kr|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|na|nc|ne|nf|ng|nl|no|nr|nu|nz|om|pa|pe|pf|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|sk|sl|sm|sn|so|sr|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|yt".split("|"),Q="com|edu|gov|net|mil|org|nom|sch|caa|res|off|gob|int|tur|ip6|uri|urn|asn|act|nsw|qld|tas|vic|pro|biz|adm|adv|agr|arq|art|ato|bio|bmd|cim|cng|cnt|ecn|eco|emp|eng|esp|etc|eti|far|fnd|fot|fst|g12|ggf|imb|ind|inf|jor|jus|leg|lel|mat|med|mus|not|ntr|odo|ppg|psc|psi|qsl|rec|slg|srv|teo|tmp|trd|vet|zlg|web|ltd|sld|pol|fin|k12|lib|pri|aip|fie|eun|sci|prd|cci|pvt|mod|idv|rel|sex|gen|nic|abr|bas|cal|cam|emr|fvg|laz|lig|lom|mar|mol|pmn|pug|sar|sic|taa|tos|umb|vao|vda|ven|mie|北海道|和歌山|神奈川|鹿児島|ass|rep|tra|per|ngo|soc|grp|plc|its|air|and|bus|can|ddr|jfk|mad|nrw|nyc|ski|spy|tcm|ulm|usa|war|fhs|vgs|dep|eid|fet|fla|flå|gol|hof|hol|sel|vik|cri|iwi|ing|abo|fam|gok|gon|gop|gos|aid|atm|gsm|sos|elk|waw|est|aca|bar|cpa|jur|law|sec|plo|www|bir|cbg|jar|khv|msk|nov|nsk|ptz|rnd|spb|stv|tom|tsk|udm|vrn|cmw|kms|nkz|snz|pub|fhv|red|ens|nat|rns|rnu|bbs|tel|bel|kep|nhs|dni|fed|isa|nsn|gub|e12|tec|орг|обр|упр|alt|nis|jpn|mex|ath|iki|nid|gda|inc".split("|"),ee={secondLevelDomains:"",findDomains(e,t,r=!0,n="../resources/subdomains.txt",i=(e=>e)){return new Promise(((s,o)=>{t||s([]);const a=this.exactMatchFindDomains(e,t,i,r);this.readSubdomains(n).then((n=>{const o=this.filterSecrets(n,t,e,i,r),c=(h=o,a.filter((e=>!h.find((t=>e[l]===t[l])))).concat(h));var h,l;s(c)})).catch((e=>{e.response&&e.response.then((t=>{e.message+=t})),o(e)}))}))},extractRootDomainName(e){let t=e;const r=e.split("."),n=r.length;n>2&&(t=`${r[n-2]}.${r[n-1]}`,2==r[n-2].length&&2==r[n-1].length&&(t=`${r[n-3]}.${t}`));return t.split(".")[0]},exactMatchFindDomains(e,t,r=(e=>e),n=!0){if(!t)return[];const i=new URL(t),s=this.isHttpsProtocol(i.protocol),o=i.hostname.replace(/^www\./,"");return e.filter((e=>{const t=X.fixSiteUrl(r(e)),a=new URL(t),c=a.hostname.replace(/^www\./,"");return!(i.port!==a.port||o!==c||n&&!s&&i.protocol!==a.protocol)}))},isHttpsProtocol:e=>"https:"===e,findSecrets(e,t,r=!0,n="../resources/subdomains.txt"){return this.findDomains(e,t,r,n,this.getDomain)},exactMatchFindSecrets(e,t,r=!0){return this.exactMatchFindDomains(e,t,this.getDomain,r)},getDomain:e=>e.site_url,filterSecrets(e,t,r,n,i){return r.filter((r=>{const s=new URL(X.fixSiteUrl(n(r))),o=new URL(t);if(s.port!==o.port||i&&this.isHttpsProtocol(s.protocol)&&s.protocol!==o.protocol)return!1;const{hostname:a}=s;let c=a.split("."),h=this.searchForSimilarHostnames(o.hostname,c);if(!h&&c.length>2){const t=`${c[c.length-2]}.${c[c.length-1]}`;new RegExp(`^${t}$`,"im").test(e)&&(c=c.slice(0,c.length-2),c.push(t));let r=0;for(;!1===h&&r<c.length-1;)h=this.searchForSimilarHostnames(o.hostname,c.slice(r)),r++}return h}))},findReasonableDomain(e,t="../resources/subdomains.txt"){return new Promise(((r,n)=>{const i=e.split(".");i.length>2?this.readSubdomains(t).then((e=>{const t=`${i[i.length-2]}.${i[i.length-1]}`;new RegExp(`^${t}$`,"im").test(e)?r(`${i[i.length-3]}.${t}`):r(t)})).catch((e=>{n(e)})):r(e)}))},searchForSimilarHostnames(e,t){const r=t.join("."),n=new RegExp(`\\b${r}$`,"i");return e.search(n)>=0},readSubdomains(e){return new Promise(((t,r)=>{this.secondLevelDomains?t(this.secondLevelDomains):fetch(e,{method:"GET"}).then((e=>{if(e.ok)return e.text();const t=new Error(`${e.status}: ${e.statusText}`);r(t)})).then((e=>{this.secondLevelDomains=e,t(this.secondLevelDomains)}))}))},extractTopLevelDomainName(e){if(e.length){const t=e.split(".");for(;t.length>3;)t.shift();return 3===t.length&&(t[1].length>2&&t[2].length>2||-1===Q.indexOf(t[1])&&-1===Y.indexOf(t[2]))&&t.shift(),t.join(".")}return""}},te={qrCodeTimeout:6e4,sessionTimeout:9e5,loadCredentialsTimeout:6e4,channelServiceEndpoint:"{cs}",contentCloud:{serverUrl:"{cc}",paths:{lock:"/content-cloud-mgmt/v1/lock-slave",retrieveKeys:"/content-cloud-mgmt/v1/retrieve-encryption-keys",retrieveContent:"/content-cloud/v1/retrieve",retrieveById:"/content-cloud/v1/retrieve-by-id",insert:"/content-cloud/v1/insert",bin:"/content-cloud/v1/move-to-bin",restore:"/content-cloud/v1/restore-from-bin",removeBinned:"/content-cloud/v1/remove-binned",logout:"/content-cloud-mgmt/v1/remove-own-access"}},moreInfoLink:"{portal}passwords/",qrCodePrefix:"{code}",support:{link:"https://support.yoti.com/"},logoProxyPath:"logo",browserEngine:chrome,browserName:"chrome"},re=[{key:"contentType",value:"GLOBAL_CONFIGURATION"}],ne=[{key:"contentType",value:"CREDENTIAL"}],ie="000001",se="SAVED",oe=2,ae="UpmCredential.v2",ce="UpmGlobalConfiguration.v1",he="char_based",le="Something went wrong. Any changes you made haven’t been saved. Please try again.",ue=()=>({classType:ce,value:{autofill_type:!0,automatic_sign_in:!1,lock_timeout:te.sessionTimeout,inactive_signout_timeout:0,password_generator:{char_based:{avoid_ambiguous:!0,letters:!0,length:16,lowercase:!0,numerals:!0,symbols:!1},word_based:{capitalize:!0,length:4,separator:"-"},active:he}}});function fe(e,t){let r;return n()(re,e)?r=ue():n()(ne,e)&&(r=(new X).wrapSecret()),t&&(r.value.name=t),r}function de(e){const{port:t}=e;return t?`${e.hostname}:${t}`:e.hostname}function pe(e,t){this.name="DeleteContentError",this.message=t||"Failed to delete secret from the db",this.stack=e.stack}function ge(e,t){this.name="InsertSecretError",this.message=t||"Failed to insert secret to db",this.stack=e.stack}pe.prototype=Object.create(Error.prototype),pe.prototype.constructor=pe,ge.prototype=Object.create(Error.prototype),ge.prototype.constructor=ge;function be(e,t){this.name="NetworkError",this.message=t||"Connection error occured",this.stack=e.stack}be.prototype=Object.create(Error.prototype),be.prototype.constructor=be;function me(e,t){this.name="SessionTimeOutError",this.message=t||"Session timed out",this.stack=e.stack}me.prototype=Object.create(Error.prototype),me.prototype.constructor=me;function ye(e,t){this.name="NotFoundCredentialError",this.message=t||"Credential does not exist anymore!",this.stack=e&&e.stack||""}ye.prototype=Object.create(Error.prototype),ye.prototype.constructor=ye;te.browserEngine.runtime.getURL("resources/yoti.png"),te.browserEngine.runtime.getURL("resources/yoti-disabled.png"),te.browserEngine.runtime.getURL("resources/yoti-locked@2x.png"),te.browserEngine.runtime.getURL("resources/yoti-login-detected@2x.png");const ve={name:"logged in",value:"loggedIn"},we={name:"logged out",value:"loggedOut"},_e={name:"locked",value:"locked"};class Ee{constructor(t,r,n=!0){e(this,"failToValidate",(()=>{throw new me(new Error)})),this.isNonceNeeded=n,this.keyPair=t,this.serverUrl=r}requestBody(e){return this.request=e,this}get(e){return this.requestMethod="GET",this.endpoint=e,this}post(e){return this.requestMethod="POST",this.endpoint=e,this}fetch(e=this.failToValidate){return new Promise(((t,r)=>{try{e&&e();const n=this.isNonceNeeded?`?nonce=${J()}&timestamp=${Date.now()}`:"";let i=`${this.requestMethod}&${this.endpoint}${n}`;this.request&&(i+=`&${btoa(JSON.stringify(this.request))}`);const s=f.signMessage(i,this.keyPair.privateKey);return fetch(this.serverUrl+this.endpoint+n,{method:this.requestMethod,body:this.request?JSON.stringify(this.request):"",headers:{"Content-Type":"application/json","X-Yoti-Auth-Digest":s,"X-Yoti-Auth-Key":this.request.requester_pub_key},credentials:"same-origin"}).catch((e=>{throw new be(e)})).then((e=>{if(e.ok)return e.json();const t=new Error(`${e.status}: ${e.statusText}`);throw t.response=e.text(),t})).then((e=>{t(e)})).catch((e=>{e.response?e.response.then((t=>{e.message+=` ${t}`,r(e)})):r(e)}))}catch(e){r(e)}}))}}class Se{static post(e,t,r){const n=u.find(a),i=u.find(c);return Promise.all([n,i]).then((n=>{const i=f.generateKeys(n[0]);e.requester_pub_key=f.trimPem(n[0].publicKey),e.cloud_id=n[1];return new Ee(i,CHANNEL_SERVICE_CONFIG.contentCloud.serverUrl).requestBody(e).post(t).fetch(r)}))}static get(e,t){const r=u.find(a),n=u.find(c);return Promise.all([r,n]).then((r=>{const n=f.generateKeys(r[0]);return new Ee(n,CHANNEL_SERVICE_CONFIG.contentCloud.serverUrl).get(e).fetch(t)}))}static retrieveEncryptedContent(e,t,r){return Se.post({data_group:"UPM",query_tags:e,start_date:t},CHANNEL_SERVICE_CONFIG.contentCloud.paths.retrieveContent,r)}static decryptContent(e=[],t){return u.find(a).then((r=>{const n=f.generateKeys(r);return Se.post({},CHANNEL_SERVICE_CONFIG.contentCloud.paths.retrieveKeys,t).then((t=>{const{keys:r}=t.response;return e.map((e=>Se.decryptItem(e,r,n)))}))}))}static decryptItem(e,t,r){let n;try{const i=t.find((t=>e.encryption_key_id===t.encryption_key_id));if(!i)return null;const s=f.decryptMessage(i.opaque_encryption_key,r.privateKey);n=f.hybridDecryptMessage(e.encrypted_content,s),n&&(n={decryptedContent:n,recordId:e.record_id,timestamp:e.timestamp})}catch(e){n="failed to decrypt content."}return n}static async retrieveContent(e,t){try{const r=await u.find(a),n=f.generateKeys(r),{response:{keys:i}}=await Se.post({},CHANNEL_SERVICE_CONFIG.contentCloud.paths.retrieveKeys,t),o=4;let c=1,h=!1;const{response:{records:l,more_records:d}}=await Se.retrieveEncryptedContent(e,void 0,t);if(h=d,l){let r;const a=l.map((e=>Se.decryptItem(e,i,n))).filter((e=>null!==e)),u=a.map((({timestamp:e})=>e)).sort();for(r=u[u.length-1];h&&c<o;){const{response:{records:s,more_records:o}}=await Se.retrieveEncryptedContent(e,r,t);if(h=o,s){const e=s.map((e=>Se.decryptItem(e,i,n))).filter((e=>null!==e)),t=e.map((({timestamp:e})=>e)).sort();r=t[t.length-1],a.push(...e)}c+=1}return s()(a,"recordId")}return[]}catch(e){return[]}}static saveContent(e,t,r){const n=u.find(a),i=Se.post({},CHANNEL_SERVICE_CONFIG.contentCloud.paths.retrieveKeys,r);return Promise.all([n,i]).then((n=>{const i=f.generateKeys(n[0]),s=n[1].response.keys.find((e=>e.active)),o=f.decryptMessage(s.opaque_encryption_key,i.privateKey),a={data_group:"UPM",encrypted_content:f.hybridEncryptMessage(JSON.stringify(t),o),encryption_key_id:s.encryption_key_id,tags:e};return Se.post(a,CHANNEL_SERVICE_CONFIG.contentCloud.paths.insert,r)}))}static deleteContent(e,t){const r={record_id:e,data_group:"UPM"};return Se.post(r,CHANNEL_SERVICE_CONFIG.contentCloud.paths.bin,t)}static restoreContent(e,t){const r={record_id:e,data_group:"UPM"};return Se.post(r,CHANNEL_SERVICE_CONFIG.contentCloud.paths.restore,t)}static hardDeleteContent(e,t){const r=Se.deleteContent(e,t);return Promise.resolve(r).then((()=>{const r={record_id:e,data_group:"UPM"};return{recordId:e,callback:()=>Se.post(r,CHANNEL_SERVICE_CONFIG.contentCloud.paths.removeBinned,t)}}))}}class Ie{static get browserRuntime(){return CHANNEL_SERVICE_CONFIG.browserEngine}static handleResponse(e){return e.response}static background({funcName:e,isAsync:t,args:r}){return CHANNEL_SERVICE_CONFIG.browserEngine.runtime.sendMessage({target:"background",funcName:e,isAsync:t,args:r}).then((e=>this.handleResponse(e))).catch((e=>{}))}static enableIcon(){this.background({funcName:"enableIcon"})}static lockIcon(){this.background({funcName:"lockIcon"})}static async save(e,t){this.background({funcName:"save",args:[e,t],isAsync:!0})}static async find(e){return this.background({funcName:"find",args:[e],isAsync:!0})}static setSelected(e,t){this.background({funcName:"setSelected",args:[e,t]})}static openUrl(e){e.startsWith("http")||(e=`https://${e}`),this.browserRuntime.tabs.create({url:e})}static openYotiUrl(e){const t=this.browserRuntime.runtime.getURL(e);this.browserRuntime.tabs.create({url:t})}static checkError(){if(this.browserRuntime.runtime.lastError)throw{name:"StorageApi",message:this.browserRuntime.runtime.lastError}}static async checkSessionTimeout(e){return this.background({funcName:"checkSessionTimeout",isAsync:!0,...e&&{args:[e]}}).then((e=>e))}static checkIn(e=Date.now()){this.background({funcName:"checkIn",args:[e]})}static async checkOut(){return this.background({funcName:"sendLockRequest",isAsync:!0})}static async logOut(){this.background({funcName:"sendLogoutRequest",isAsync:!0}).catch((e=>{})).then(this.cleanStorage)}static cleanStorage(){u.cleanStorage()}static cleanUp(){this.background({funcName:"cleanUp"})}static async fetchContent(e){return this.background({funcName:"fetchContent",isAsync:!0,args:[e]})}static async fetchGlobalSettings(){return this.background({funcName:"fetchGlobalSettings",isAsync:!0})}static async fetchEncryptedContent(e){return this.background({funcName:"fetchEncryptedContent",isAsync:!0,args:[e]})}static async decryptContent(e,t){return this.background({funcName:"decryptContent",isAsync:!0,args:[e,t]})}static async getSecrets(){return this.background({funcName:"getSecrets",isAsync:!0})}static setSecrets(e){this.background({funcName:"setSecrets",args:[e]})}static async hasSecrets(){return this.background({funcName:"hasSecrets",isAsync:!0})}static storeLogo(e,t){this.background({funcName:"storeLogo",args:[e,t]})}static get logos(){return this.background({funcName:"getLogos"})}static async globalSettings(){return this.background({funcName:"getGlobalSettings",isAsync:!0})}static setGlobalSettings(e){return this.background({funcName:"setGlobalSettings",args:[e]})}static async createWebSocket(e,t){return this.background({funcName:"createWebSocket",isAsync:!0,args:[e,t]})}static closeWebSocket(){this.background({funcName:"closeWebSocket"})}static checkWebSocketOpen(){return this.background({funcName:"isWsOpen"})}static async saveRequest(e){return this.background({funcName:"saveRequest",isAsync:!0,args:[e]})}static registerWSListener(e){this.background({funcName:"registerSocketListener",args:[e]})}static removeWSListener(e){this.background({funcName:"removeSocketListener",args:[e]})}static broadcastMessage(e){this.background({funcName:"broadcastMessage",args:[e]})}static loadFromInternalState(e){return this.background({funcName:"getFromInternalState",args:[e]})}static saveOnInternalState(e,t){return this.background({funcName:"saveOnInternalState",args:[e,t]})}static async isNewEnrolment(){return this.background({funcName:"isNewEnrolment"})}static isTutorialPassed(){return this.background({funcName:"isTutorialPassed"})}static updateNewEnrolment(e){this.background({funcName:"updateNewEnrolment",args:[e],isAsync:!0})}static async logIn(){return this.background({funcName:"loggedIn",isAsync:!0})}static unlockFromPopUp(){return this.background({funcName:"unlockFromPopUp"})}static async getTimeout(){return this.background({funcName:"getTimeout",isAsync:!0})}static async validateSession(){return this.background({funcName:"validateSession",isAsync:!0}).then((e=>e?()=>e:void 0))}}const Te="char_based",xe="word_based";class Ce{static async globalGeneratorSettings(){return(await Ie.globalSettings())?.password_generator}static async globalActiveGeneratorSettings(){const e=await Ie.globalSettings(),t=e.password_generator.active;return this.clone(e.password_generator[t])}static async globalActiveGeneratorType(){return(await Ie.globalSettings()).password_generator.active}static async globalCharGeneratorSettings(){const e=await Ie.globalSettings();return this.clone(e.password_generator.char_based)}static async globalWordGeneratorSettings(){const e=await Ie.globalSettings();return this.clone(e.password_generator.word_based)}static async updateGlobalGeneratorSettings(e){const t=this.getTypeFromSettings(e),r=await Ie.globalSettings();t===Te?r.password_generator.char_based=e:r.password_generator.word_based=e,r.password_generator.active=t,Ie.setGlobalSettings(r)}static getTypeFromSettings(e){if("letters"in e)return Te;if("capitalize"in e)return xe;throw new Error("Cannot read type from generator settings",e)}static async saveSettingsToDb(e,t){if(this.savingInProgress)return Promise.resolve();this.savingInProgress=!0;try{const r=await Ie.globalSettings();try{const n=await Ie.fetchContent(re);await this.deleteContents(n,t);const i=this.clone(r),s=this.getTypeFromSettings(e);i.password_generator[s]=this.clone(e),i.password_generator.active=s;const o=this.clone(i);delete o.recordId;const a={classType:ce,value:o};return await Se.saveContent(re,a,t)}catch(e){throw e instanceof pe||r.recordId===ie||await Se.restoreContent(r.recordId,t),e}}finally{this.savingInProgress=!1}}static clone(e){return JSON.parse(JSON.stringify(e))}static deleteContents(e,t){return new Promise(((r,n)=>{const i=e.map((e=>Se.hardDeleteContent(e.recordId,t)));Promise.all(i).then((e=>{r(),e.callback()})).catch((e=>{n(new pe(e,le))}))}))}static validatePasswordSettings(e){try{const t=Object.keys(ue().value.password_generator.word_based),r=Object.keys(ue().value.password_generator.char_based),n=Object.keys(e.word_based),i=Object.keys(e.char_based);return[n.length===t.length,i.length===r.length,t.every((e=>n.includes(e))),r.every((e=>i.includes(e)))].every((e=>e))}catch(e){return!1}}}e(Ce,"savingInProgress",!1);const Ae="FORM_TYPE_RESET_PASSWORD";const Oe="FIND_SECRETS",ke="REGISTER_FORM_SUBMIT_LISTENER",Le="QUERY_FOUND_SECRETS",Ne="DELETE_FOUND_SECRETS",Re="SAVE_SECRET",Ue="UPDATE_CHECK_IN",Pe="SECRETS_CHANGED",Be="LOCKED",Fe="LOGGED_OUT",je="LOGGED_IN",Me="SEND_FORM_VALUE",De="CHECK_STATUS",qe="SELECT_SECRET",Ge="SELECT_SECRET_CHANGE_PASSWORD",Ve="CANCEL_SECRET",$e="UPDATE_SECRET",He="UNLOCK",ze="CANCEL_UNLOCK",We="SOCKET_STATUS";function Ke(e,t){const r=e.url,n=new URL(r),i=de(n),s=t.selectedSecretsChangePwd[e.id],o=t.capturedSecrets[`${n.protocol}//${i}`];if(o&&!o.status)if(o.form_type===Ae)ee.findSecrets(t.secrets,r).then((e=>t.broadcastMessage("RESET_PASSWORD",{secret:o,secrets:e,selSecretChangePwdRecId:s})));else{const e=ee.exactMatchFindSecrets(t.secrets,r).filter((e=>e.username.value===o.username.value&&e.password.value!==o.password.value));e.length>1?t.broadcastMessage("MESSAGE_TYPES_UPDATE_PASSWORD",{secret:o,secrets:e}):(e[0]&&(o.recordId=e[0].recordId),t.broadcastMessage("SECRETS_CAPTURED",{secret:o}))}}var Je=r(4943),Xe=r.n(Je);class Ze{constructor(e){this.eventBus=null,this.isOpen=!1,this.wsListener=null,this.find=e}registerListener(e){this.wsListener=e}removeListener(){this.wsListener=null}createSocket(e){this.eventBus=new(Xe())(`${CHANNEL_SERVICE_CONFIG.channelServiceEndpoint}/eventbus`,{transports:"websocket"});let t=!1;return new Promise(((r,n)=>{this.find(a).then((e=>f.generateKeys(e))).then((i=>{this.eventBus.onopen=()=>{this.isOpen=!0,this.eventBus.registerHandler(`upm_unlock_${e}`,((e,s)=>{if(e)n(e);else{if("SUCCESS"===JSON.parse(f.decryptMessage(s.body,i.privateKey)).status){t=!0,s.reply();const e={status:"success"};r(e),this.eventBus.close(),this.wsListener&&this.wsListener.onSuccess(e)}}}))},this.eventBus.onclose=()=>{if(this.isOpen=!1,!t){const e={status:"timedout"};n(e),this.wsListener&&this.wsListener.onError(e)}}})).catch((e=>{n(e),this.wsListener&&this.wsListener.onError(e)}))}))}closeSocket(){this.eventBus.close()}}class Ye{constructor(e,t,r=null,n=null){this.type=t,this.hostname=e,this.username=n,this.password=r}setUsername(e){this.username=e}getUsername(){return this.username}setPassword(e){this.password=e}getPassword(){return this.password}equals(e){return e instanceof Ye&&this.hostname===e.hostname&&this.type===e.type}findObjectInArray(e){return e.find((e=>e.equals(this)))}static findInArray(e,t,r){let n=new Ye(e,t);return r.find((e=>e.equals(n)))}}var Qe=r(1795),et=r.n(Qe),tt=r(7240),rt=r.n(tt);const nt=new class{constructor(){e(this,"loadBrowserDetails",(()=>({manufacturer:et().manufacturer,name:et().name,version:et().version,os:et().os}))),e(this,"getMetaData",(()=>{const{os:e}=this.browserDetails,t={};return this.browserDetails.name&&(t.manufacture_name=this.browserDetails.name),this.browserDetails.version&&(t.model_name=this.browserDetails.version),e&&e.family&&(t.os_name=e.family),e&&e.version&&(t.os_version=e.version),t})),e(this,"getEncodedMetaData",(()=>{const e=this.getMetaData();return rt().encodeMetadata(e)})),e(this,"getBrowserDetails",(()=>this.browserDetails)),this.browserDetails=this.loadBrowserDetails()}};class it{constructor(e,t){this.sendLockRequest=e,this.sessionId,this.find=t}unlock(){let e;const t=(e,t)=>{const r={requester_pub_key:t,session_id:e};return Se.post(r,"/content-cloud-mgmt/v1/unlock-needed",!1)};return this.find(a).then((e=>f.generateKeys(e))).then((t=>{e=f.keyToString(t.publicKey);const r={publicKey:btoa(e),metadata:btoa(String.fromCharCode.apply(null,new Uint8Array(nt.getEncodedMetaData())))};return new Ee(t,CHANNEL_SERVICE_CONFIG.channelServiceEndpoint).requestBody(r).post("/sessions").fetch(!1)})).then((r=>(this.sessionId=r.session_id,t(this.sessionId,e)))).catch((r=>{if(r.message.indexOf("B-PUBKEY-UNLOCKED")>0)return this.sendLockRequest().then((()=>t(this.sessionId,e)));throw r}))}}const st=e=>JSON.parse(JSON.stringify(e));importScripts("/libs/popup-libs.min.js","/popup/config.js");const ot=new class{constructor(t){e(this,"validateSession",(()=>this.checkSessionTimeout().then((e=>{if(e?.value!==ve.value)throw new me(new Error);return!0})))),e(this,"find",(e=>{const t=this.getFromInternalState(e);return t?new Promise((e=>e(t))):u.find(e).then((t=>new Promise((r=>{this.save(e,t),r(t)}))))})),this.browserEngine=t,this.socketHandler=new Ze(this.find);const r=()=>{this.secrets=[],this.selectedSecrets={},this.selectedSecretsChangePwd={},this.globalSettings=this.loadGlobalSettings(),this.timeoutIds=[],this.listeners={},this.capturedSecrets={},this.formValues=[],this.cancelledSecrets=[],this.logos={},this.internalState={},this.newEnrolment=!1,this.tutorialPassed=!1,this.intervals=[]};r(),this.cleanUp=()=>{this.setSecrets([]),this.removeAllListeners(),this.clearTimeouts(),this.clearIntervals(),this.loadCookies(),r()},t.windows.onRemoved.addListener((()=>{t.windows.getAll({}).then((e=>{e.length<1&&this.sendLockRequest()}))})),t.runtime.onConnect.addListener((e=>{const{tab:t}=e.sender;e.onMessage.addListener((r=>{if(!t.url)return;const n=new URL(t.url),i=n.port,s=i?`${n.protocol}//${n.hostname}:${i}`:`${n.protocol}//${n.hostname}`;new Promise(((e,n)=>{const i={type:r.type,data:{},error:{}};switch(r.type){case Oe:this.markSecretAsSelectedOrCancelled(this.secrets,t.url).then((t=>{i.data={secrets:t,globalSettings:this.globalSettings},this.setBadgeText(t),e(i)})).catch((e=>{i.error.message=e.message,n(i)}));break;case ke:this.registerRequestListener(t,r.data.formUrl,r.data.fieldNames,r.data.formType),e(i);break;case Le:this.queryFoundSecrets(t,r.data.referrer).then((t=>{i.data=t,e(i)}));break;case Ne:this.removeFoundSecrets(t.url,r.data.referrer),e(i);break;case Re:{const t=this.getCapturedDomains();let o;ee.findDomains(t,s,!1).then((e=>(e[0]&&(o=e[0]),this.saveRequest(r.data.secret)))).then((t=>{t.type&&1===t.type?r.data.secret.status="ALREADY_SAVED":(r.data.secret.status=se,this.capturedSecrets[o]&&(this.capturedSecrets[o].status=se)),i.data.secret=r.data.secret,e(i)})).catch((e=>{this.capturedSecrets[o]&&(this.capturedSecrets[o].status="SAVE_FAILED",i.data.secret=this.capturedSecrets[o]),i.error.message=e.toString(),n(i)}));break}case Ue:this.startSession((()=>{}),r.data.time),e(i);break;case Me:{const{hostname:n}=new URL(t.url);let s=new Ye(n,r.data.formType);const o=s.findObjectInArray(this.formValues);o?s=o:this.formValues.push(s),s[r.data.inputType]=r.data.inputValue,e(i);break}case De:this.checkLogin().then((t=>{this.broadcastMessage(t),i.data=t,e(i)}));break;case qe:this.setSelected(r.data.recordId,t.url),this.markSecretAsSelectedOrCancelled(this.secrets,t.url).then((t=>{i.data={secrets:t,globalSettings:this.globalSettings},e(i)})).catch((e=>{i.error.message=e.message,n(i)}));break;case Ge:this.setSelectedSecretChangePwd(r.data.recordId,t.id),e(i);break;case Ve:r.data.secrets.forEach((e=>{this.cancelledSecrets.push(e.recordId)})),this.markSecretAsSelectedOrCancelled(this.secrets,t.url).then((t=>{i.data={secrets:t,globalSettings:this.globalSettings},e(i)})).catch((e=>{i.error.message=e.message,n(i)}));break;case $e:this.updateCapturedSecret(r.data.secret,r.data.key,r.data.value),e(i);break;case He:this.unlock().then((t=>{i.data=t,e(i)})).catch((e=>{i.error=e,n(i)}));break;case We:i.data={isOpen:this.socketHandler.isOpen},e(i);break;case ze:this.closeWebSocket(),i.data={isOpen:this.socketHandler.isOpen},e(i)}})).then((t=>{e.postMessage(t)})).catch((t=>{e.postMessage(t)}))}))}))}sendBgScriptMsg(e){this.browserEngine.runtime.sendMessage(e)}checkIn(e=Date.now()){this.save(o,e).then((()=>{this.startSession((()=>{location?.reload?.(!0)}),e)}))}async checkSessionTimeout(e){const t=Date.now();return this.find(o).then((r=>{if(!r||r.error)return this.cleanUp(),we;const n=this.getTimeout();return t-r<n?(e&&this.checkIn(t),ve):(1!==r&&this.sendLockRequest(),_e)}))}unlockFromPopUp(){const e=new it(this.sendLockRequest.bind(this),this.find);e.unlock().then((()=>(this.sendBgScriptMsg({type:"SET_STATE",newState:{timedout:!1}}),this.createWebSocket(e.sessionId,(()=>this.sendBgScriptMsg({type:"CHANGE_ROUTE",newRoute:"/loading"})))))).then((e=>{if("success"!==e.status)throw new Error(e);this.checkIn(),this.sendBgScriptMsg({type:"CHANGE_ROUTE",newRoute:"/secrets"})})).catch((e=>{"timedout"===e.status?this.sendBgScriptMsg({type:"SET_STATE",newState:{timedout:!0}}):this.sendBgScriptMsg({type:"DISPLAY_ERROR",errorMsg:e.message})}))}markSecretAsSelectedOrCancelled(e,t){return ee.findSecrets(e,t).then((e=>{const r=this.markSecretsCancelled(e),n=this.markSecretsSelected(e,t);return Promise.all([r,n]).then((()=>e))}))}getFromInternalState(e){return this.internalState[e]}saveOnInternalState(e,t){this.internalState[e]=t}loadGlobalSettings(){u.find(l).then((e=>e||ue()))}isNewEnrolment(){return this.newEnrolment}isTutorialPassed(){return this.tutorialPassed}updateNewEnrolment(e){this.newEnrolment=!1,this.tutorialPassed=e,this.browserEngine.cookies.set(function(e){return{name:"YPM",url:"https://www.yoti.com",secure:!0,value:`${e}`,expirationDate:(new Date).getTime()/1e3+31536e3}}(e))}loadCookies(){this.browserEngine.cookies.get({name:"YPM",url:"https://www.yoti.com"}).then((e=>{e?(this.newEnrolment=!1,this.tutorialPassed=JSON.parse(e.value)):this.newEnrolment=!0}))}setSelected(e,t){t.endsWith("/")&&(t=t.substring(0,t.length-1)),this.selectedSecrets[t]=e;const r=new URL(t),n=de(r);this.capturedSecrets[`${r.protocol}//${n}`].status="SECRET_SELECTED_FOR_UPDATE"}setSelectedSecretChangePwd(e,t){this.selectedSecretsChangePwd[t]=e}setSecrets(e=[]){this.secrets=X.createNewInstanceArray(st(e)),this.save(h,e?.length),this.broadcastMessage(Pe)}getSecrets(){return new Promise((e=>this.secrets.length>0?e(this.secrets):this.hasSecrets().then((t=>t?this.fetchContent(ne).then((t=>{const r=this.orderSecrets(t);return this.setSecrets(r),e(r)})):e([])))))}hasSecrets(){return this.find(h).then((e=>!!e))}storeLogo(e,t){this.logos[e]=t}getLogos(){return this.logos}addSecret(e,t){const r=this.secrets.findIndex((t=>e.recordId===t.recordId)),n=X.createNewInstance(st(e));n.recordId=t,-1===r?this.secrets.push(n):this.secrets.splice(r,1,n),this.broadcastMessage(Pe)}removeSecret(e){this.secrets=this.secrets.filter((t=>!n()(t,e))),this.broadcastMessage(Pe)}broadcastMessage(e,t={}){const r={type:e,data:t};this.browserEngine.tabs.query({}).then((e=>e.forEach((e=>this.browserEngine.tabs.sendMessage(e.id,r).catch((e=>{e.message.includes("Receiving end does not exist")}))))))}save(e,t){return this.saveOnInternalState(e,t),u.save(e,t)}sendLockRequest(){return this.find(o).then((e=>{e&&(this.lockIcon(),this.save(o,1))})).catch((e=>{})),this.cleanUp(),this.broadcastMessage(Be),this.find(a).then((e=>{if(e){const t={pub_key_to_lock:f.trimPem(e.publicKey)};return Se.post(t,CHANNEL_SERVICE_CONFIG.contentCloud.paths.lock,!1)}}))}sendLogoutRequest(){this.broadcastMessage(Fe);const e=Se.post({},CHANNEL_SERVICE_CONFIG.contentCloud.paths.logout,!1);return this.cleanUp(),u.cleanStorage(),this.logoutIcon(),e}startSession(e,t=Date.now()){this.checkLogin(t).then((r=>{r===je?(this.broadcastMessage(je),this.save(o,t),this.clearTimeouts()):(this.sendLockRequest(),e())}))}getTimeout(){return(e=this.globalSettings?this.globalSettings.lock_timeout:null)&&600!==e?e:te.sessionTimeout;var e}deleteFormAndReference(e){const t=e.replace(/^https?:\/\//i,""),r=[`${t}[REGISTER]`,`${t}[LOGIN]`,`${t}[FORM_TYPE_RESET_PASSWORD]`];r.map((e=>this.listeners[e])).filter((e=>void 0!==e)).forEach((e=>this.cleanListener(e))),delete this.capturedSecrets[e],r.forEach((e=>delete this.listeners[e])),this.formValues=this.formValues.filter((e=>e.hostname!==t))}removeAllListeners(){Object.keys(this.listeners).forEach((e=>this.cleanListener(this.listeners[e])))}cleanListener(e){this.browserEngine.webRequest.onResponseStarted.hasListener(e.onCompleteListener)&&this.browserEngine.webRequest.onResponseStarted.removeListener(e.onCompleteListener),this.browserEngine.webRequest.onBeforeRequest.hasListener(e.onBeforeListener)&&this.browserEngine.webRequest.onBeforeRequest.removeListener(e.onBeforeListener),this.browserEngine.webRequest.onBeforeRedirect.hasListener(e.onRedirectListener)&&this.browserEngine.webRequest.onBeforeRedirect.removeListener(e.onRedirectListener)}checkLogin(e=Date.now()){return this.find(o).then((t=>{if(t){const r=this.getTimeout();return e-t<r?je:Be}return Fe}))}clearTimeouts(){this.timeoutIds.forEach((e=>clearTimeout(e))),this.timeoutIds=[]}clearIntervals(){this.intervals.forEach((e=>clearInterval(e))),this.intervals=[]}saveRequest(e){const t=X.createNewInstance(e);return Promise.all([this.getSecrets(),this.getGlobalSettings()]).then((([r,n])=>(t.updateAutomaticSignIn(n),class{static clone(e){return JSON.parse(JSON.stringify(e))}static upsertSecret(e,t,r){let n,i;return e instanceof X||(e=X.createNewInstance(e)),e.recordId===ie&&t.some((t=>this.isDuplicated(t,e)))?Promise.resolve({msg:"Password Manager has already saved those login details.",type:1}):(i=e.recordId===ie?new Promise(((e,t)=>e(ie))):Se.hardDeleteContent(e.recordId,r),i.then((e=>(n=e.callback,e.recordId))).catch((e=>{throw new pe(e,le)})).then((()=>Se.saveContent(ne,e.wrapSecret(),r))).then((e=>(n&&n(),e))).catch((t=>{let n=t;throw t instanceof pe||(e.recordId!==ie&&Se.restoreContent(e.recordId,r),n=new ge(t,le)),n})))}static isDuplicated(e,t){return e.site_url===t.site_url&&e.username.value===t.username.value}static isExisting(e,t){return e.some((e=>e.site_url===t.site_url&&e.username.value===t.username.value))}}.upsertSecret(t,r,this.validateSession).then((t=>(t.response&&this.addSecret(e,t.response.record_id),t))))))}fetchContent(e){return Se.retrieveContent(e,this.validateSession).then((t=>(t||[]).map((t=>this.parseContent(t,e)))))}async fetchGlobalSettings(){try{const e=await this.fetchContent(re);let t,r=!1;if(!e.length){const e=ue();return await Se.saveContent(re,e,this.validateSession),e.value}if(e.length>1){const n=e.sort(((e,t)=>{const r=e.timestamp,n=t.timestamp,i=new Date(r).getTime();return new Date(n).getTime()-i}));r=!0,[t]=n}else[t]=e;if(t.password_generator&&Ce.validatePasswordSettings(t.password_generator)||(r=!0,t.password_generator=ue().value.password_generator),r){await Ce.deleteContents(e,this.validateSession);const r=ue();r.value=t,await Se.saveContent(re,r,this.validateSession)}return u.save(l,t),t}catch(e){throw new Error(e)}}getGlobalSettings(){return new Promise((e=>this.globalSettings?e(this.globalSettings):u.find(l).then((t=>e(t||this.fetchGlobalSettings())))))}setGlobalSettings(e){this.globalSettings=e}parseContent(e,t){let r;try{const t=JSON.parse(e.decryptedContent);switch(t.classType){case ae:r=JSON.parse((n=t.value,decodeURIComponent(escape(atob(n)))));break;default:r="object"==typeof t.value?t.value:{value:t.value}}}catch(e){r=fe(t,"Failed to decrypt content").value}var n,i;return(i=r||{}).recordId=e.recordId,i.timestamp=e.timestamp,i}async fetchEncryptedContent(e){let t=1,r=!1;const n=[],{response:{records:i,more_records:o}}=await Se.retrieveEncryptedContent(e,void 0,this.validateSession);if(i&&n.push(...i),r=o,i&&r){const o=await this.find(a),c=f.generateKeys(o),{response:{keys:h}}=await Se.post({},CHANNEL_SERVICE_CONFIG.contentCloud.paths.retrieveKeys,this.validateSession);let l;const u=i.map((e=>Se.decryptItem(e,h,c))).filter((e=>null!==e)).map((({timestamp:e})=>e)).sort();for(l=u[u.length-1];r&&t<4;){const{response:{records:i,more_records:s}}=await Se.retrieveEncryptedContent(e,l,this.validateSession);if(r=s,i){const e=i.map((e=>Se.decryptItem(e,h,c))).filter((e=>null!==e)).map((({timestamp:e})=>e)).sort();l=e[e.length-1],n.push(...i)}t+=1}return s()(n,"recordId")}return i}decryptContent(e,t){return Se.decryptContent(e,this.validateSession).then((e=>(e||[]).map((e=>this.parseContent(e,t)))))}registerRequestListener(e,t,r,n){const i=e.url;this.checkLogin().then((e=>{if(e!==je)return;let r="";try{r=new URL(t)}catch(e){r=new URL(i)}const n=r.hostname.replace(/^www.*?\./i,"");return ee.findReasonableDomain(n)})).then((s=>{if(s){const o=`*://*.${s}/*`,{hostname:a}=new URL(i),c=`${a}[${n}]`;let h=this.listeners[c];if(!h){const s=()=>Ye.findInArray(a,n,this.formValues)||new Ye;h=h||{},h.onBeforeListener=function(e,t,r,n,i,s){return function(o){return new Promise((a=>{if("POST"!==o.method)a({});else if(o.requestBody){const c=new URL(n),h=de(c);try{const{username:l,password:u,type:f}=i();if(u&&u.length>1&&f===s){let i="";if(o.requestBody.formData)for(const e in o.requestBody.formData)i+=o.requestBody.formData[e].toString();else o.requestBody.raw&&o.requestBody.raw[0]?i=String.fromCharCode.apply(null,new Uint8Array(o.requestBody.raw[0].bytes)):o.requestBody[t.username]&&o.requestBody[t.password]&&(i+=o.requestBody[t.username],i+=o.requestBody[t.password]);if(i.includes(u)||i.includes(encodeURIComponent(u))){const i=ee.exactMatchFindSecrets(e.secrets,n).filter((e=>e.username.value===l)),o=i.filter((e=>e.password.value!==u))[0];if(0===i.length||o){const n=`${c.protocol}//${h}`,i=new X;i.username.value=l,i.username.field_name=t.username,i.password.value=u,i.password.field_name=t.password,i.name=ee.extractTopLevelDomainName(h),i.site_url=n,i.login_url=r,i.form_type=s,i.recordId=ie,o&&o.autofill_type&&(i.autofill_type=o.autofill_type),e.capturedSecrets[n]=i}a({})}}else a({})}catch(e){a({})}}else a({})}))}}(this,r,t,i,s,n),this.browserEngine.webRequest.onBeforeRequest.addListener(h.onBeforeListener,{urls:[o]},["requestBody"]),h.onCompleteListener=function(e,t){return function(r){return new Promise((n=>{"POST"!==r.method?n({}):r.responseHeaders?Ke(t,e):n({})}))}}(this,e),this.browserEngine.webRequest.onResponseStarted.addListener(h.onCompleteListener,{urls:[o]},["responseHeaders"]),h.onRedirectListener=function(e,t){return function(r){return new Promise((n=>{"POST"!==r.method?n({}):r.responseHeaders?Ke(t,e):n({})}))}}(this,e),this.browserEngine.webRequest.onBeforeRedirect.addListener(h.onRedirectListener,{urls:[o]},["responseHeaders"]),this.listeners[c]=h}}}))}queryFoundSecrets(e,t){const r=e.url;return this.checkLogin().then((n=>{const i={};if(n!==je)return i;!function(e,t){Ke(e,t)}(e,this);const s=this.getCapturedDomains(),o=ee.findDomains(s,r,!1),a=ee.findDomains(s,t,!1);return Promise.all([o,a]).then((e=>{const t=e[0],r=e[1],n=t.concat(r)[0];return this.capturedSecrets[n]})).then((e=>(i.secret=e,i)))}))}removeFoundSecrets(e,t){const r=this.getCapturedDomains(),n=ee.findDomains(r,e,!1),i=ee.findDomains(r,t,!1);Promise.all([n,i]).then((e=>{const t=e[0],r=e[1];t.concat(r).forEach((e=>{this.deleteFormAndReference(e)}))}))}getCapturedDomains(){return Object.keys(this.capturedSecrets).map((e=>e))}markSecretsSelected(e,t){return ee.findDomains(this.getCapturedDomains(),t).then((t=>{if(t.length>0){const r=this.selectedSecrets[t[0]];e.forEach((e=>{e.selected=e.recordId===r}))}}))}markSecretsCancelled(e){this.cancelledSecrets.length>0&&e.forEach((e=>{this.cancelledSecrets.some((t=>t===e.recordId))&&(e.cancelled=!0)}))}unlock(){const e=new it(this.sendLockRequest.bind(this),this.find);return e.unlock().then((()=>this.createWebSocket(e.sessionId)))}createWebSocket(e,t=(()=>{})){let r;return new Promise(((n,i)=>{this.socketHandler.createSocket(e).then((e=>{r=e})).then((()=>this.save(o,Date.now()))).then((()=>this.startSession((()=>{})))).then((()=>{t()})).then((()=>Promise.all([this.fetchGlobalSettings(),this.fetchContent(ne)]))).then((([e,t])=>{this.globalSettings=e,this.setSecrets(this.orderSecrets(t)),this.enableIcon(),this.launchIntervals()})).then((()=>n(r))).catch((e=>i(e)))}))}loggedIn(){return Promise.all([this.fetchGlobalSettings(),this.fetchContent(ne)]).then((([e,t])=>{this.setSecrets(this.orderSecrets(t)),this.launchIntervals(),this.globalSettings=e}))}orderSecrets(e){let t=[];return e.forEach((e=>{const r=X.createNewInstance(e);t=function(e,t,r){const n=function(e,t){return t.map((t=>{const r=t.split(".");return 1===r.length?e[t]:n(e[r[0]],r.splice(1,r.length-1))})).join("").toLowerCase()},i=[];let s=!1;if(0===e.length)i.push(t);else{if(n(e[0],r)>n(t,r))return[t].concat(e);if(n(e[e.length-1],r)<n(t,r))return e.concat([t]);for(let o=0;o<e.length;o++)n(e[o],r)<n(t,r)||s?i.push(e[o]):(i.push(t),i.push(e[o]),s=!0)}return i}(t,r,["name","username.value"])})),t}launchIntervals(){if(this.intervals.length)return;this.intervals.push(setInterval((()=>{Promise.all([this.fetchGlobalSettings(),this.fetchEncryptedContent(ne)]).then((([e,t])=>{JSON.stringify(e)!==JSON.stringify(this.globalSettings)&&(this.globalSettings=e),this.mergeSecrets(t).then((e=>{const t=this.orderSecrets(e);JSON.stringify(t)!==JSON.stringify(this.secrets)&&this.setSecrets(t)}))}))}),CHANNEL_SERVICE_CONFIG.loadCredentialsTimeout))}mergeSecrets(e=[]){const t=[];return new Promise((r=>{this.secrets.forEach((r=>{-1!==e.findIndex((e=>e.record_id===r.recordId))&&t.push(r)}));const n=[];if(e.forEach((e=>{-1===this.secrets.findIndex((t=>e.record_id===t.recordId))&&n.push(e)})),n.length)return this.decryptContent(n,ne).then((e=>{e.forEach((e=>{t.push(e)})),r(t)}));r(t)}))}closeWebSocket(){this.socketHandler.closeSocket()}isWsOpen(){return this.socketHandler.isOpen}updateCapturedSecret(e,t,r){const n=Object.keys(this.capturedSecrets).find((t=>{if(this.capturedSecrets[t].id===e.id)return!0}));n&&(this.capturedSecrets[n][t]=r)}enableIcon(){this.browserEngine.action.setIcon({path:{16:"resources/icons/DBE_icon_16px_active.png",32:"resources/icons/DBE_icon_32px_active.png",48:"resources/icons/DBE_icon_48px_active.png",64:"resources/icons/DBE_icon_64px_active.png",96:"resources/icons/DBE_icon_96px_active.png",128:"resources/icons/DBE_icon_128px_active.png"}})}lockIcon(){try{this.browserEngine.action.setIcon({path:{16:"resources/icons/DBE_icon_16px_locked_inset.png",32:"resources/icons/DBE_icon_32px_locked_inset.png",48:"resources/icons/DBE_icon_48px_locked_inset.png",64:"resources/icons/DBE_icon_64px_locked_inset.png",96:"resources/icons/DBE_icon_96px_locked_inset.png",128:"resources/icons/DBE_icon_128px_locked_inset.png"}})}catch(e){}}setBadgeText(e){this.browserEngine.action.setBadgeText({text:`${e&&e.length?e.length:""}`}),this.browserEngine.action.setBadgeBackgroundColor({color:"#09D2B0"})}logoutIcon(){this.browserEngine.action.setIcon({path:{16:"resources/icons/DBE_icon_16px_signed_out.png",32:"resources/icons/DBE_icon_32px_signed_out.png",48:"resources/icons/DBE_icon_48px_signed_out.png",64:"resources/icons/DBE_icon_64px_signed_out.png",96:"resources/icons/DBE_icon_96px_signed_out.png",128:"resources/icons/DBE_icon_128px_signed_out.png"}})}registerSocketListener(e){this.socketHandler.registerListener(e)}removeSocketListener(e){this.socketHandler.removeListener(e)}}(CHANNEL_SERVICE_CONFIG.browserEngine);CHANNEL_SERVICE_CONFIG.browserEngine.runtime.onStartup.addListener((()=>{ot.sendLockRequest()})),CHANNEL_SERVICE_CONFIG.browserEngine.runtime.onMessage.addListener((function(e,t,r){const{funcName:n,args:i=[],target:s,isAsync:o}=e;if("background"!==s)return!1;if(o)return ot[n](...i).then((e=>r({response:e}))).catch((e=>{r({error:e.message})})),!0;const a=ot[n](...i);return r({response:a})}))})()})();